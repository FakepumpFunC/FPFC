import{r as es,f as wt,h as dr,g as mt,i as ts,j as rs,k as Qt,s as Zi,P as Bn}from"./index-B0gxhfGN.js";var Dr={},Un;function ns(){if(Un)return Dr;Un=1;var r=es().Buffer,e=r.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(f){if(!f)return"utf8";for(var c;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(c)return;f=(""+f).toLowerCase(),c=!0}}function n(f){var c=t(f);if(typeof c!="string"&&(r.isEncoding===e||!e(f)))throw new Error("Unknown encoding: "+f);return c||f}Dr.StringDecoder=o;function o(f){this.encoding=n(f);var c;switch(this.encoding){case"utf16le":this.text=F,this.end=S,c=4;break;case"utf8":this.fillLast=O,c=4;break;case"base64":this.text=B,this.end=q,c=3;break;default:this.write=N,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(c)}o.prototype.write=function(f){if(f.length===0)return"";var c,v;if(this.lastNeed){if(c=this.fillLast(f),c===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<f.length?c?c+this.text(f,v):this.text(f,v):c||""},o.prototype.end=D,o.prototype.text=R,o.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function s(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function u(f,c,v){var Y=c.length-1;if(Y<v)return 0;var K=s(c[Y]);return K>=0?(K>0&&(f.lastNeed=K-1),K):--Y<v||K===-2?0:(K=s(c[Y]),K>=0?(K>0&&(f.lastNeed=K-2),K):--Y<v||K===-2?0:(K=s(c[Y]),K>=0?(K>0&&(K===2?K=0:f.lastNeed=K-3),K):0))}function w(f,c,v){if((c[0]&192)!==128)return f.lastNeed=0,"�";if(f.lastNeed>1&&c.length>1){if((c[1]&192)!==128)return f.lastNeed=1,"�";if(f.lastNeed>2&&c.length>2&&(c[2]&192)!==128)return f.lastNeed=2,"�"}}function O(f){var c=this.lastTotal-this.lastNeed,v=w(this,f);if(v!==void 0)return v;if(this.lastNeed<=f.length)return f.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,c,0,f.length),this.lastNeed-=f.length}function R(f,c){var v=u(this,f,c);if(!this.lastNeed)return f.toString("utf8",c);this.lastTotal=v;var Y=f.length-(v-this.lastNeed);return f.copy(this.lastChar,0,Y),f.toString("utf8",c,Y)}function D(f){var c=f&&f.length?this.write(f):"";return this.lastNeed?c+"�":c}function F(f,c){if((f.length-c)%2===0){var v=f.toString("utf16le",c);if(v){var Y=v.charCodeAt(v.length-1);if(Y>=55296&&Y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",c,f.length-1)}function S(f){var c=f&&f.length?this.write(f):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,v)}return c}function B(f,c){var v=(f.length-c)%3;return v===0?f.toString("base64",c):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",c,f.length-v))}function q(f){var c=f&&f.length?this.write(f):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function N(f){return f.toString(this.encoding)}function A(f){return f&&f.length?this.write(f):""}return Dr}function Dt(r){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(r)}function is(r,e){if(Dt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Dt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function os(r){var e=is(r,"string");return Dt(e)=="symbol"?e:e+""}function ge(r,e,t){return(e=os(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function qn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function $e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qn(Object(t),!0).forEach(function(n){ge(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var kr={exports:{}},jr={exports:{}},Wr,$n;function Te(){if($n)return Wr;$n=1;class r extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let o=0;o<t.length;o++)n+=`    ${t[o].stack}
`;super(n),this.name="AggregateError",this.errors=t}}return Wr={AggregateError:r,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},Wr}var Fr={exports:{}},Br,Hn;function eo(){return Hn||(Hn=1,Br={format(r,...e){return r.replace(/%([sdifj])/g,function(...[t,n]){const o=e.shift();return n==="f"?o.toFixed(6):n==="j"?JSON.stringify(o):n==="s"&&typeof o=="object"?`${o.constructor!==Object?o.constructor.name:""} {}`.trim():o.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),Br}var Ur,zn;function xe(){if(zn)return Ur;zn=1;const{format:r,inspect:e}=eo(),{AggregateError:t}=Te(),n=globalThis.AggregateError||t,o=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,w="__node_internal_",O={};function R(A,f){if(!A)throw new O.ERR_INTERNAL_ASSERTION(f)}function D(A){let f="",c=A.length;const v=A[0]==="-"?1:0;for(;c>=v+4;c-=3)f=`_${A.slice(c-3,c)}${f}`;return`${A.slice(0,c)}${f}`}function F(A,f,c){if(typeof f=="function")return R(f.length<=c.length,`Code: ${A}; The provided arguments length (${c.length}) does not match the required ones (${f.length}).`),f(...c);const v=(f.match(/%[dfijoOs]/g)||[]).length;return R(v===c.length,`Code: ${A}; The provided arguments length (${c.length}) does not match the required ones (${v}).`),c.length===0?f:r(f,...c)}function S(A,f,c){c||(c=Error);class v extends c{constructor(...K){super(F(A,f,K))}toString(){return`${this.name} [${A}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:c.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${A}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=A,v.prototype[o]=!0,O[A]=v}function B(A){const f=w+A.name;return Object.defineProperty(A,"name",{value:f}),A}function q(A,f){if(A&&f&&A!==f){if(Array.isArray(f.errors))return f.errors.push(A),f;const c=new n([f,A],f.message);return c.code=f.code,c}return A||f}class N extends Error{constructor(f="The operation was aborted",c=void 0){if(c!==void 0&&typeof c!="object")throw new O.ERR_INVALID_ARG_TYPE("options","Object",c);super(f,c),this.code="ABORT_ERR",this.name="AbortError"}}return S("ERR_ASSERTION","%s",Error),S("ERR_INVALID_ARG_TYPE",(A,f,c)=>{R(typeof A=="string","'name' must be a string"),Array.isArray(f)||(f=[f]);let v="The ";A.endsWith(" argument")?v+=`${A} `:v+=`"${A}" ${A.includes(".")?"property":"argument"} `,v+="must be ";const Y=[],K=[],fe=[];for(const i of f)R(typeof i=="string","All expected entries have to be of type string"),s.includes(i)?Y.push(i.toLowerCase()):u.test(i)?K.push(i):(R(i!=="object",'The value "object" should be written as "Object"'),fe.push(i));if(K.length>0){const i=Y.indexOf("object");i!==-1&&(Y.splice(Y,i,1),K.push("Object"))}if(Y.length>0){switch(Y.length){case 1:v+=`of type ${Y[0]}`;break;case 2:v+=`one of type ${Y[0]} or ${Y[1]}`;break;default:{const i=Y.pop();v+=`one of type ${Y.join(", ")}, or ${i}`}}(K.length>0||fe.length>0)&&(v+=" or ")}if(K.length>0){switch(K.length){case 1:v+=`an instance of ${K[0]}`;break;case 2:v+=`an instance of ${K[0]} or ${K[1]}`;break;default:{const i=K.pop();v+=`an instance of ${K.join(", ")}, or ${i}`}}fe.length>0&&(v+=" or ")}switch(fe.length){case 0:break;case 1:fe[0].toLowerCase()!==fe[0]&&(v+="an "),v+=`${fe[0]}`;break;case 2:v+=`one of ${fe[0]} or ${fe[1]}`;break;default:{const i=fe.pop();v+=`one of ${fe.join(", ")}, or ${i}`}}if(c==null)v+=`. Received ${c}`;else if(typeof c=="function"&&c.name)v+=`. Received function ${c.name}`;else if(typeof c=="object"){var he;if((he=c.constructor)!==null&&he!==void 0&&he.name)v+=`. Received an instance of ${c.constructor.name}`;else{const i=e(c,{depth:-1});v+=`. Received ${i}`}}else{let i=e(c,{colors:!1});i.length>25&&(i=`${i.slice(0,25)}...`),v+=`. Received type ${typeof c} (${i})`}return v},TypeError),S("ERR_INVALID_ARG_VALUE",(A,f,c="is invalid")=>{let v=e(f);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${A.includes(".")?"property":"argument"} '${A}' ${c}. Received ${v}`},TypeError),S("ERR_INVALID_RETURN_VALUE",(A,f,c)=>{var v;const Y=c!=null&&(v=c.constructor)!==null&&v!==void 0&&v.name?`instance of ${c.constructor.name}`:`type ${typeof c}`;return`Expected ${A} to be returned from the "${f}" function but got ${Y}.`},TypeError),S("ERR_MISSING_ARGS",(...A)=>{R(A.length>0,"At least one arg needs to be specified");let f;const c=A.length;switch(A=(Array.isArray(A)?A:[A]).map(v=>`"${v}"`).join(" or "),c){case 1:f+=`The ${A[0]} argument`;break;case 2:f+=`The ${A[0]} and ${A[1]} arguments`;break;default:{const v=A.pop();f+=`The ${A.join(", ")}, and ${v} arguments`}break}return`${f} must be specified`},TypeError),S("ERR_OUT_OF_RANGE",(A,f,c)=>{R(f,'Missing "range" argument');let v;if(Number.isInteger(c)&&Math.abs(c)>2**32)v=D(String(c));else if(typeof c=="bigint"){v=String(c);const Y=BigInt(2)**BigInt(32);(c>Y||c<-Y)&&(v=D(v)),v+="n"}else v=e(c);return`The value of "${A}" is out of range. It must be ${f}. Received ${v}`},RangeError),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),S("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),S("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),S("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),S("ERR_STREAM_WRITE_AFTER_END","write after end",Error),S("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Ur={AbortError:N,aggregateTwoErrors:B(q),hideStackFrames:B,codes:O},Ur}var Nt={exports:{}},Gn;function kt(){if(Gn)return Nt.exports;Gn=1;const{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Nt.exports=r,Nt.exports.AbortSignal=e,Nt.exports.default=r,Nt.exports}var Kn;function je(){return Kn||(Kn=1,function(r){const e=wt(),{format:t,inspect:n}=eo(),{codes:{ERR_INVALID_ARG_TYPE:o}}=xe(),{kResistStopPropagation:s,AggregateError:u,SymbolDispose:w}=Te(),O=globalThis.AbortSignal||kt().AbortSignal,R=globalThis.AbortController||kt().AbortController,D=Object.getPrototypeOf(async function(){}).constructor,F=globalThis.Blob||e.Blob,S=typeof F<"u"?function(A){return A instanceof F}:function(A){return!1},B=(N,A)=>{if(N!==void 0&&(N===null||typeof N!="object"||!("aborted"in N)))throw new o(A,"AbortSignal",N)},q=(N,A)=>{if(typeof N!="function")throw new o(A,"Function",N)};r.exports={AggregateError:u,kEmptyObject:Object.freeze({}),once(N){let A=!1;return function(...f){A||(A=!0,N.apply(this,f))}},createDeferredPromise:function(){let N,A;return{promise:new Promise((c,v)=>{N=c,A=v}),resolve:N,reject:A}},promisify(N){return new Promise((A,f)=>{N((c,...v)=>c?f(c):A(...v))})},debuglog(){return function(){}},format:t,inspect:n,types:{isAsyncFunction(N){return N instanceof D},isArrayBufferView(N){return ArrayBuffer.isView(N)}},isBlob:S,deprecate(N,A){return N},addAbortListener:dr().addAbortListener||function(A,f){if(A===void 0)throw new o("signal","AbortSignal",A);B(A,"signal"),q(f,"listener");let c;return A.aborted?queueMicrotask(()=>f()):(A.addEventListener("abort",f,{__proto__:null,once:!0,[s]:!0}),c=()=>{A.removeEventListener("abort",f)}),{__proto__:null,[w](){var v;(v=c)===null||v===void 0||v()}}},AbortSignalAny:O.any||function(A){if(A.length===1)return A[0];const f=new R,c=()=>f.abort();return A.forEach(v=>{B(v,"signals"),v.addEventListener("abort",c,{once:!0})}),f.signal.addEventListener("abort",()=>{A.forEach(v=>v.removeEventListener("abort",c))},{once:!0}),f.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Fr)),Fr.exports}var Zt={},qr,Vn;function jt(){if(Vn)return qr;Vn=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:o,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:w,NumberParseInt:O,ObjectPrototypeHasOwnProperty:R,RegExpPrototypeExec:D,String:F,StringPrototypeToUpperCase:S,StringPrototypeTrim:B}=Te(),{hideStackFrames:q,codes:{ERR_SOCKET_BAD_PORT:N,ERR_INVALID_ARG_TYPE:A,ERR_INVALID_ARG_VALUE:f,ERR_OUT_OF_RANGE:c,ERR_UNKNOWN_SIGNAL:v}}=xe(),{normalizeEncoding:Y}=je(),{isAsyncFunction:K,isArrayBufferView:fe}=je().types,he={};function i(P){return P===(P|0)}function g(P){return P===P>>>0}const a=/^[0-7]+$/,d="must be a 32-bit unsigned integer or an octal string";function h(P,V,Q){if(typeof P>"u"&&(P=Q),typeof P=="string"){if(D(a,P)===null)throw new f(V,P,d);P=O(P,8)}return m(P,V),P}const l=q((P,V,Q=w,z=u)=>{if(typeof P!="number")throw new A(V,"number",P);if(!o(P))throw new c(V,"an integer",P);if(P<Q||P>z)throw new c(V,`>= ${Q} && <= ${z}`,P)}),I=q((P,V,Q=-2147483648,z=2147483647)=>{if(typeof P!="number")throw new A(V,"number",P);if(!o(P))throw new c(V,"an integer",P);if(P<Q||P>z)throw new c(V,`>= ${Q} && <= ${z}`,P)}),m=q((P,V,Q=!1)=>{if(typeof P!="number")throw new A(V,"number",P);if(!o(P))throw new c(V,"an integer",P);const z=Q?1:0,we=4294967295;if(P<z||P>we)throw new c(V,`>= ${z} && <= ${we}`,P)});function T(P,V){if(typeof P!="string")throw new A(V,"string",P)}function M(P,V,Q=void 0,z){if(typeof P!="number")throw new A(V,"number",P);if(Q!=null&&P<Q||z!=null&&P>z||(Q!=null||z!=null)&&s(P))throw new c(V,`${Q!=null?`>= ${Q}`:""}${Q!=null&&z!=null?" && ":""}${z!=null?`<= ${z}`:""}`,P)}const b=q((P,V,Q)=>{if(!e(Q,P)){const we="must be one of: "+t(n(Q,Ne=>typeof Ne=="string"?`'${Ne}'`:F(Ne)),", ");throw new f(V,P,we)}});function k(P,V){if(typeof P!="boolean")throw new A(V,"boolean",P)}function _(P,V,Q){return P==null||!R(P,V)?Q:P[V]}const W=q((P,V,Q=null)=>{const z=_(Q,"allowArray",!1),we=_(Q,"allowFunction",!1);if(!_(Q,"nullable",!1)&&P===null||!z&&r(P)||typeof P!="object"&&(!we||typeof P!="function"))throw new A(V,"Object",P)}),J=q((P,V)=>{if(P!=null&&typeof P!="object"&&typeof P!="function")throw new A(V,"a dictionary",P)}),j=q((P,V,Q=0)=>{if(!r(P))throw new A(V,"Array",P);if(P.length<Q){const z=`must be longer than ${Q}`;throw new f(V,P,z)}});function ie(P,V){j(P,V);for(let Q=0;Q<P.length;Q++)T(P[Q],`${V}[${Q}]`)}function Z(P,V){j(P,V);for(let Q=0;Q<P.length;Q++)k(P[Q],`${V}[${Q}]`)}function se(P,V){j(P,V);for(let Q=0;Q<P.length;Q++){const z=P[Q],we=`${V}[${Q}]`;if(z==null)throw new A(we,"AbortSignal",z);le(z,we)}}function ae(P,V="signal"){if(T(P,V),he[P]===void 0)throw he[S(P)]!==void 0?new v(P+" (signals must use all capital letters)"):new v(P)}const H=q((P,V="buffer")=>{if(!fe(P))throw new A(V,["Buffer","TypedArray","DataView"],P)});function G(P,V){const Q=Y(V),z=P.length;if(Q==="hex"&&z%2!==0)throw new f("encoding",V,`is invalid for data of length ${z}`)}function oe(P,V="Port",Q=!0){if(typeof P!="number"&&typeof P!="string"||typeof P=="string"&&B(P).length===0||+P!==+P>>>0||P>65535||P===0&&!Q)throw new N(V,P,Q);return P|0}const le=q((P,V)=>{if(P!==void 0&&(P===null||typeof P!="object"||!("aborted"in P)))throw new A(V,"AbortSignal",P)}),de=q((P,V)=>{if(typeof P!="function")throw new A(V,"Function",P)}),C=q((P,V)=>{if(typeof P!="function"||K(P))throw new A(V,"Function",P)}),L=q((P,V)=>{if(P!==void 0)throw new A(V,"undefined",P)});function U(P,V,Q){if(!e(Q,P))throw new A(V,`('${t(Q,"|")}')`,P)}const re=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function te(P,V){if(typeof P>"u"||!D(re,P))throw new f(V,P,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ee(P){if(typeof P=="string")return te(P,"hints"),P;if(r(P)){const V=P.length;let Q="";if(V===0)return Q;for(let z=0;z<V;z++){const we=P[z];te(we,"hints"),Q+=we,z!==V-1&&(Q+=", ")}return Q}throw new f("hints",P,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return qr={isInt32:i,isUint32:g,parseFileMode:h,validateArray:j,validateStringArray:ie,validateBooleanArray:Z,validateAbortSignalArray:se,validateBoolean:k,validateBuffer:H,validateDictionary:J,validateEncoding:G,validateFunction:de,validateInt32:I,validateInteger:l,validateNumber:M,validateObject:W,validateOneOf:b,validatePlainFunction:C,validatePort:oe,validateSignalName:ae,validateString:T,validateUint32:m,validateUndefined:L,validateUnion:U,validateAbortSignal:le,validateLinkHeaderValue:ee},qr}var er={exports:{}},$r={exports:{}},Jn;function _t(){if(Jn)return $r.exports;Jn=1;var r=$r.exports={},e,t;function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=o}catch{t=o}})();function s(N){if(e===setTimeout)return setTimeout(N,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(N,0);try{return e(N,0)}catch{try{return e.call(null,N,0)}catch{return e.call(this,N,0)}}}function u(N){if(t===clearTimeout)return clearTimeout(N);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(N);try{return t(N)}catch{try{return t.call(null,N)}catch{return t.call(this,N)}}}var w=[],O=!1,R,D=-1;function F(){!O||!R||(O=!1,R.length?w=R.concat(w):D=-1,w.length&&S())}function S(){if(!O){var N=s(F);O=!0;for(var A=w.length;A;){for(R=w,w=[];++D<A;)R&&R[D].run();D=-1,A=w.length}R=null,O=!1,u(N)}}r.nextTick=function(N){var A=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)A[f-1]=arguments[f];w.push(new B(N,A)),w.length===1&&!O&&s(S)};function B(N,A){this.fun=N,this.array=A}B.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function q(){}return r.on=q,r.addListener=q,r.once=q,r.off=q,r.removeListener=q,r.removeAllListeners=q,r.emit=q,r.prependListener=q,r.prependOnceListener=q,r.listeners=function(N){return[]},r.binding=function(N){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(N){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},$r.exports}var Hr,Yn;function nt(){if(Yn)return Hr;Yn=1;const{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Te(),n=t("nodejs.stream.destroyed"),o=t("nodejs.stream.errored"),s=t("nodejs.stream.readable"),u=t("nodejs.stream.writable"),w=t("nodejs.stream.disturbed"),O=t("nodejs.webstream.isClosedPromise"),R=t("nodejs.webstream.controllerErrorFunction");function D(_,W=!1){var J;return!!(_&&typeof _.pipe=="function"&&typeof _.on=="function"&&(!W||typeof _.pause=="function"&&typeof _.resume=="function")&&(!_._writableState||((J=_._readableState)===null||J===void 0?void 0:J.readable)!==!1)&&(!_._writableState||_._readableState))}function F(_){var W;return!!(_&&typeof _.write=="function"&&typeof _.on=="function"&&(!_._readableState||((W=_._writableState)===null||W===void 0?void 0:W.writable)!==!1))}function S(_){return!!(_&&typeof _.pipe=="function"&&_._readableState&&typeof _.on=="function"&&typeof _.write=="function")}function B(_){return _&&(_._readableState||_._writableState||typeof _.write=="function"&&typeof _.on=="function"||typeof _.pipe=="function"&&typeof _.on=="function")}function q(_){return!!(_&&!B(_)&&typeof _.pipeThrough=="function"&&typeof _.getReader=="function"&&typeof _.cancel=="function")}function N(_){return!!(_&&!B(_)&&typeof _.getWriter=="function"&&typeof _.abort=="function")}function A(_){return!!(_&&!B(_)&&typeof _.readable=="object"&&typeof _.writable=="object")}function f(_){return q(_)||N(_)||A(_)}function c(_,W){return _==null?!1:W===!0?typeof _[r]=="function":W===!1?typeof _[e]=="function":typeof _[r]=="function"||typeof _[e]=="function"}function v(_){if(!B(_))return null;const W=_._writableState,J=_._readableState,j=W||J;return!!(_.destroyed||_[n]||j!=null&&j.destroyed)}function Y(_){if(!F(_))return null;if(_.writableEnded===!0)return!0;const W=_._writableState;return W!=null&&W.errored?!1:typeof(W==null?void 0:W.ended)!="boolean"?null:W.ended}function K(_,W){if(!F(_))return null;if(_.writableFinished===!0)return!0;const J=_._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.finished)!="boolean"?null:!!(J.finished||W===!1&&J.ended===!0&&J.length===0)}function fe(_){if(!D(_))return null;if(_.readableEnded===!0)return!0;const W=_._readableState;return!W||W.errored?!1:typeof(W==null?void 0:W.ended)!="boolean"?null:W.ended}function he(_,W){if(!D(_))return null;const J=_._readableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.endEmitted)!="boolean"?null:!!(J.endEmitted||W===!1&&J.ended===!0&&J.length===0)}function i(_){return _&&_[s]!=null?_[s]:typeof(_==null?void 0:_.readable)!="boolean"?null:v(_)?!1:D(_)&&_.readable&&!he(_)}function g(_){return _&&_[u]!=null?_[u]:typeof(_==null?void 0:_.writable)!="boolean"?null:v(_)?!1:F(_)&&_.writable&&!Y(_)}function a(_,W){return B(_)?v(_)?!0:!((W==null?void 0:W.readable)!==!1&&i(_)||(W==null?void 0:W.writable)!==!1&&g(_)):null}function d(_){var W,J;return B(_)?_.writableErrored?_.writableErrored:(W=(J=_._writableState)===null||J===void 0?void 0:J.errored)!==null&&W!==void 0?W:null:null}function h(_){var W,J;return B(_)?_.readableErrored?_.readableErrored:(W=(J=_._readableState)===null||J===void 0?void 0:J.errored)!==null&&W!==void 0?W:null:null}function l(_){if(!B(_))return null;if(typeof _.closed=="boolean")return _.closed;const W=_._writableState,J=_._readableState;return typeof(W==null?void 0:W.closed)=="boolean"||typeof(J==null?void 0:J.closed)=="boolean"?(W==null?void 0:W.closed)||(J==null?void 0:J.closed):typeof _._closed=="boolean"&&I(_)?_._closed:null}function I(_){return typeof _._closed=="boolean"&&typeof _._defaultKeepAlive=="boolean"&&typeof _._removedConnection=="boolean"&&typeof _._removedContLen=="boolean"}function m(_){return typeof _._sent100=="boolean"&&I(_)}function T(_){var W;return typeof _._consuming=="boolean"&&typeof _._dumped=="boolean"&&((W=_.req)===null||W===void 0?void 0:W.upgradeOrConnect)===void 0}function M(_){if(!B(_))return null;const W=_._writableState,J=_._readableState,j=W||J;return!j&&m(_)||!!(j&&j.autoDestroy&&j.emitClose&&j.closed===!1)}function b(_){var W;return!!(_&&((W=_[w])!==null&&W!==void 0?W:_.readableDidRead||_.readableAborted))}function k(_){var W,J,j,ie,Z,se,ae,H,G,oe;return!!(_&&((W=(J=(j=(ie=(Z=(se=_[o])!==null&&se!==void 0?se:_.readableErrored)!==null&&Z!==void 0?Z:_.writableErrored)!==null&&ie!==void 0?ie:(ae=_._readableState)===null||ae===void 0?void 0:ae.errorEmitted)!==null&&j!==void 0?j:(H=_._writableState)===null||H===void 0?void 0:H.errorEmitted)!==null&&J!==void 0?J:(G=_._readableState)===null||G===void 0?void 0:G.errored)!==null&&W!==void 0?W:!((oe=_._writableState)===null||oe===void 0)&&oe.errored))}return Hr={isDestroyed:v,kIsDestroyed:n,isDisturbed:b,kIsDisturbed:w,isErrored:k,kIsErrored:o,isReadable:i,kIsReadable:s,kIsClosedPromise:O,kControllerErrorFunction:R,kIsWritable:u,isClosed:l,isDuplexNodeStream:S,isFinished:a,isIterable:c,isReadableNodeStream:D,isReadableStream:q,isReadableEnded:fe,isReadableFinished:he,isReadableErrored:h,isNodeStream:B,isWebStream:f,isWritable:g,isWritableNodeStream:F,isWritableStream:N,isWritableEnded:Y,isWritableFinished:K,isWritableErrored:d,isServerRequest:T,isServerResponse:m,willEmitClose:M,isTransformStream:A},Hr}var Xn;function lt(){if(Xn)return er.exports;Xn=1;const r=_t(),{AbortError:e,codes:t}=xe(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:o}=t,{kEmptyObject:s,once:u}=je(),{validateAbortSignal:w,validateFunction:O,validateObject:R,validateBoolean:D}=jt(),{Promise:F,PromisePrototypeThen:S,SymbolDispose:B}=Te(),{isClosed:q,isReadable:N,isReadableNodeStream:A,isReadableStream:f,isReadableFinished:c,isReadableErrored:v,isWritable:Y,isWritableNodeStream:K,isWritableStream:fe,isWritableFinished:he,isWritableErrored:i,isNodeStream:g,willEmitClose:a,kIsClosedPromise:d}=nt();let h;function l(b){return b.setHeader&&typeof b.abort=="function"}const I=()=>{};function m(b,k,_){var W,J;if(arguments.length===2?(_=k,k=s):k==null?k=s:R(k,"options"),O(_,"callback"),w(k.signal,"options.signal"),_=u(_),f(b)||fe(b))return T(b,k,_);if(!g(b))throw new n("stream",["ReadableStream","WritableStream","Stream"],b);const j=(W=k.readable)!==null&&W!==void 0?W:A(b),ie=(J=k.writable)!==null&&J!==void 0?J:K(b),Z=b._writableState,se=b._readableState,ae=()=>{b.writable||oe()};let H=a(b)&&A(b)===j&&K(b)===ie,G=he(b,!1);const oe=()=>{G=!0,b.destroyed&&(H=!1),!(H&&(!b.readable||j))&&(!j||le)&&_.call(b)};let le=c(b,!1);const de=()=>{le=!0,b.destroyed&&(H=!1),!(H&&(!b.writable||ie))&&(!ie||G)&&_.call(b)},C=P=>{_.call(b,P)};let L=q(b);const U=()=>{L=!0;const P=i(b)||v(b);if(P&&typeof P!="boolean")return _.call(b,P);if(j&&!le&&A(b,!0)&&!c(b,!1))return _.call(b,new o);if(ie&&!G&&!he(b,!1))return _.call(b,new o);_.call(b)},re=()=>{L=!0;const P=i(b)||v(b);if(P&&typeof P!="boolean")return _.call(b,P);_.call(b)},te=()=>{b.req.on("finish",oe)};l(b)?(b.on("complete",oe),H||b.on("abort",U),b.req?te():b.on("request",te)):ie&&!Z&&(b.on("end",ae),b.on("close",ae)),!H&&typeof b.aborted=="boolean"&&b.on("aborted",U),b.on("end",de),b.on("finish",oe),k.error!==!1&&b.on("error",C),b.on("close",U),L?r.nextTick(U):Z!=null&&Z.errorEmitted||se!=null&&se.errorEmitted?H||r.nextTick(re):(!j&&(!H||N(b))&&(G||Y(b)===!1)||!ie&&(!H||Y(b))&&(le||N(b)===!1)||se&&b.req&&b.aborted)&&r.nextTick(re);const ee=()=>{_=I,b.removeListener("aborted",U),b.removeListener("complete",oe),b.removeListener("abort",U),b.removeListener("request",te),b.req&&b.req.removeListener("finish",oe),b.removeListener("end",ae),b.removeListener("close",ae),b.removeListener("finish",oe),b.removeListener("end",de),b.removeListener("error",C),b.removeListener("close",U)};if(k.signal&&!L){const P=()=>{const V=_;ee(),V.call(b,new e(void 0,{cause:k.signal.reason}))};if(k.signal.aborted)r.nextTick(P);else{h=h||je().addAbortListener;const V=h(k.signal,P),Q=_;_=u((...z)=>{V[B](),Q.apply(b,z)})}}return ee}function T(b,k,_){let W=!1,J=I;if(k.signal)if(J=()=>{W=!0,_.call(b,new e(void 0,{cause:k.signal.reason}))},k.signal.aborted)r.nextTick(J);else{h=h||je().addAbortListener;const ie=h(k.signal,J),Z=_;_=u((...se)=>{ie[B](),Z.apply(b,se)})}const j=(...ie)=>{W||r.nextTick(()=>_.apply(b,ie))};return S(b[d].promise,j,j),I}function M(b,k){var _;let W=!1;return k===null&&(k=s),(_=k)!==null&&_!==void 0&&_.cleanup&&(D(k.cleanup,"cleanup"),W=k.cleanup),new F((J,j)=>{const ie=m(b,k,Z=>{W&&ie(),Z?j(Z):J()})})}return er.exports=m,er.exports.finished=M,er.exports}var zr,Qn;function St(){if(Qn)return zr;Qn=1;const r=_t(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=xe(),{Symbol:o}=Te(),{kIsDestroyed:s,isDestroyed:u,isFinished:w,isServerRequest:O}=nt(),R=o("kDestroy"),D=o("kConstruct");function F(a,d,h){a&&(a.stack,d&&!d.errored&&(d.errored=a),h&&!h.errored&&(h.errored=a))}function S(a,d){const h=this._readableState,l=this._writableState,I=l||h;return l!=null&&l.destroyed||h!=null&&h.destroyed?(typeof d=="function"&&d(),this):(F(a,l,h),l&&(l.destroyed=!0),h&&(h.destroyed=!0),I.constructed?B(this,a,d):this.once(R,function(m){B(this,e(m,a),d)}),this)}function B(a,d,h){let l=!1;function I(m){if(l)return;l=!0;const T=a._readableState,M=a._writableState;F(m,M,T),M&&(M.closed=!0),T&&(T.closed=!0),typeof h=="function"&&h(m),m?r.nextTick(q,a,m):r.nextTick(N,a)}try{a._destroy(d||null,I)}catch(m){I(m)}}function q(a,d){A(a,d),N(a)}function N(a){const d=a._readableState,h=a._writableState;h&&(h.closeEmitted=!0),d&&(d.closeEmitted=!0),(h!=null&&h.emitClose||d!=null&&d.emitClose)&&a.emit("close")}function A(a,d){const h=a._readableState,l=a._writableState;l!=null&&l.errorEmitted||h!=null&&h.errorEmitted||(l&&(l.errorEmitted=!0),h&&(h.errorEmitted=!0),a.emit("error",d))}function f(){const a=this._readableState,d=this._writableState;a&&(a.constructed=!0,a.closed=!1,a.closeEmitted=!1,a.destroyed=!1,a.errored=null,a.errorEmitted=!1,a.reading=!1,a.ended=a.readable===!1,a.endEmitted=a.readable===!1),d&&(d.constructed=!0,d.destroyed=!1,d.closed=!1,d.closeEmitted=!1,d.errored=null,d.errorEmitted=!1,d.finalCalled=!1,d.prefinished=!1,d.ended=d.writable===!1,d.ending=d.writable===!1,d.finished=d.writable===!1)}function c(a,d,h){const l=a._readableState,I=a._writableState;if(I!=null&&I.destroyed||l!=null&&l.destroyed)return this;l!=null&&l.autoDestroy||I!=null&&I.autoDestroy?a.destroy(d):d&&(d.stack,I&&!I.errored&&(I.errored=d),l&&!l.errored&&(l.errored=d),h?r.nextTick(A,a,d):A(a,d))}function v(a,d){if(typeof a._construct!="function")return;const h=a._readableState,l=a._writableState;h&&(h.constructed=!1),l&&(l.constructed=!1),a.once(D,d),!(a.listenerCount(D)>1)&&r.nextTick(Y,a)}function Y(a){let d=!1;function h(l){if(d){c(a,l??new t);return}d=!0;const I=a._readableState,m=a._writableState,T=m||I;I&&(I.constructed=!0),m&&(m.constructed=!0),T.destroyed?a.emit(R,l):l?c(a,l,!0):r.nextTick(K,a)}try{a._construct(l=>{r.nextTick(h,l)})}catch(l){r.nextTick(h,l)}}function K(a){a.emit(D)}function fe(a){return(a==null?void 0:a.setHeader)&&typeof a.abort=="function"}function he(a){a.emit("close")}function i(a,d){a.emit("error",d),r.nextTick(he,a)}function g(a,d){!a||u(a)||(!d&&!w(a)&&(d=new n),O(a)?(a.socket=null,a.destroy(d)):fe(a)?a.abort():fe(a.req)?a.req.abort():typeof a.destroy=="function"?a.destroy(d):typeof a.close=="function"?a.close():d?r.nextTick(i,a,d):r.nextTick(he,a),a.destroyed||(a[s]=!0))}return zr={construct:v,destroyer:g,destroy:S,undestroy:f,errorOrDestroy:c},zr}var Gr,Zn;function vn(){if(Zn)return Gr;Zn=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Te(),{EventEmitter:t}=dr();function n(s){t.call(this,s)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(s,u){const w=this;function O(N){s.writable&&s.write(N)===!1&&w.pause&&w.pause()}w.on("data",O);function R(){w.readable&&w.resume&&w.resume()}s.on("drain",R),!s._isStdio&&(!u||u.end!==!1)&&(w.on("end",F),w.on("close",S));let D=!1;function F(){D||(D=!0,s.end())}function S(){D||(D=!0,typeof s.destroy=="function"&&s.destroy())}function B(N){q(),t.listenerCount(this,"error")===0&&this.emit("error",N)}o(w,"error",B),o(s,"error",B);function q(){w.removeListener("data",O),s.removeListener("drain",R),w.removeListener("end",F),w.removeListener("close",S),w.removeListener("error",B),s.removeListener("error",B),w.removeListener("end",q),w.removeListener("close",q),s.removeListener("close",q)}return w.on("end",q),w.on("close",q),s.on("close",q),s.emit("pipe",w),s};function o(s,u,w){if(typeof s.prependListener=="function")return s.prependListener(u,w);!s._events||!s._events[u]?s.on(u,w):r(s._events[u])?s._events[u].unshift(w):s._events[u]=[w,s._events[u]]}return Gr={Stream:n,prependListener:o},Gr}var Kr={exports:{}},ei;function hr(){return ei||(ei=1,function(r){const{SymbolDispose:e}=Te(),{AbortError:t,codes:n}=xe(),{isNodeStream:o,isWebStream:s,kControllerErrorFunction:u}=nt(),w=lt(),{ERR_INVALID_ARG_TYPE:O}=n;let R;const D=(F,S)=>{if(typeof F!="object"||!("aborted"in F))throw new O(S,"AbortSignal",F)};r.exports.addAbortSignal=function(S,B){if(D(S,"signal"),!o(B)&&!s(B))throw new O("stream",["ReadableStream","WritableStream","Stream"],B);return r.exports.addAbortSignalNoValidate(S,B)},r.exports.addAbortSignalNoValidate=function(F,S){if(typeof F!="object"||!("aborted"in F))return S;const B=o(S)?()=>{S.destroy(new t(void 0,{cause:F.reason}))}:()=>{S[u](new t(void 0,{cause:F.reason}))};if(F.aborted)B();else{R=R||je().addAbortListener;const q=R(F,B);w(S,q[e])}return S}}(Kr)),Kr.exports}var Vr,ti;function ss(){if(ti)return Vr;ti=1;const{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Te(),{Buffer:o}=wt(),{inspect:s}=je();return Vr=class{constructor(){this.head=null,this.tail=null,this.length=0}push(w){const O={data:w,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}unshift(w){const O={data:w,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length}shift(){if(this.length===0)return;const w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}clear(){this.head=this.tail=null,this.length=0}join(w){if(this.length===0)return"";let O=this.head,R=""+O.data;for(;(O=O.next)!==null;)R+=w+O.data;return R}concat(w){if(this.length===0)return o.alloc(0);const O=o.allocUnsafe(w>>>0);let R=this.head,D=0;for(;R;)t(O,R.data,D),D+=R.data.length,R=R.next;return O}consume(w,O){const R=this.head.data;if(w<R.length){const D=R.slice(0,w);return this.head.data=R.slice(w),D}return w===R.length?this.shift():O?this._getString(w):this._getBuffer(w)}first(){return this.head.data}*[e](){for(let w=this.head;w;w=w.next)yield w.data}_getString(w){let O="",R=this.head,D=0;do{const F=R.data;if(w>F.length)O+=F,w-=F.length;else{w===F.length?(O+=F,++D,R.next?this.head=R.next:this.head=this.tail=null):(O+=r(F,0,w),this.head=R,R.data=r(F,w));break}++D}while((R=R.next)!==null);return this.length-=D,O}_getBuffer(w){const O=o.allocUnsafe(w),R=w;let D=this.head,F=0;do{const S=D.data;if(w>S.length)t(O,S,R-w),w-=S.length;else{w===S.length?(t(O,S,R-w),++F,D.next?this.head=D.next:this.head=this.tail=null):(t(O,new n(S.buffer,S.byteOffset,w),R-w),this.head=D,D.data=S.slice(w));break}++F}while((D=D.next)!==null);return this.length-=F,O}[Symbol.for("nodejs.util.inspect.custom")](w,O){return s(this,{...O,depth:0,customInspect:!1})}},Vr}var Jr,ri;function gr(){if(ri)return Jr;ri=1;const{MathFloor:r,NumberIsInteger:e}=Te(),{validateInteger:t}=jt(),{ERR_INVALID_ARG_VALUE:n}=xe().codes;let o=16*1024,s=16;function u(D,F,S){return D.highWaterMark!=null?D.highWaterMark:F?D[S]:null}function w(D){return D?s:o}function O(D,F){t(F,"value",0),D?s=F:o=F}function R(D,F,S,B){const q=u(F,B,S);if(q!=null){if(!e(q)||q<0){const N=B?`options.${S}`:"options.highWaterMark";throw new n(N,q)}return r(q)}return w(D.objectMode)}return Jr={getHighWaterMark:R,getDefaultHighWaterMark:w,setDefaultHighWaterMark:O},Jr}var Yr,ni;function to(){if(ni)return Yr;ni=1;const r=_t(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Te(),{Buffer:o}=wt(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:u}=xe().codes;function w(O,R,D){let F;if(typeof R=="string"||R instanceof o)return new O({objectMode:!0,...D,read(){this.push(R),this.push(null)}});let S;if(R&&R[t])S=!0,F=R[t]();else if(R&&R[n])S=!1,F=R[n]();else throw new s("iterable",["Iterable"],R);const B=new O({objectMode:!0,highWaterMark:1,...D});let q=!1;B._read=function(){q||(q=!0,A())},B._destroy=function(f,c){e(N(f),()=>r.nextTick(c,f),v=>r.nextTick(c,v||f))};async function N(f){const c=f!=null,v=typeof F.throw=="function";if(c&&v){const{value:Y,done:K}=await F.throw(f);if(await Y,K)return}if(typeof F.return=="function"){const{value:Y}=await F.return();await Y}}async function A(){for(;;){try{const{value:f,done:c}=S?await F.next():F.next();if(c)B.push(null);else{const v=f&&typeof f.then=="function"?await f:f;if(v===null)throw q=!1,new u;if(B.push(v))continue;q=!1}}catch(f){B.destroy(f)}break}}return B}return Yr=w,Yr}var Xr,ii;function pr(){if(ii)return Xr;ii=1;const r=_t(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:s,ObjectKeys:u,ObjectSetPrototypeOf:w,Promise:O,SafeSet:R,SymbolAsyncDispose:D,SymbolAsyncIterator:F,Symbol:S}=Te();Xr=z,z.ReadableState=Q;const{EventEmitter:B}=dr(),{Stream:q,prependListener:N}=vn(),{Buffer:A}=wt(),{addAbortSignal:f}=hr(),c=lt();let v=je().debuglog("stream",p=>{v=p});const Y=ss(),K=St(),{getHighWaterMark:fe,getDefaultHighWaterMark:he}=gr(),{aggregateTwoErrors:i,codes:{ERR_INVALID_ARG_TYPE:g,ERR_METHOD_NOT_IMPLEMENTED:a,ERR_OUT_OF_RANGE:d,ERR_STREAM_PUSH_AFTER_EOF:h,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:l},AbortError:I}=xe(),{validateObject:m}=jt(),T=S("kPaused"),{StringDecoder:M}=ns(),b=to();w(z.prototype,q.prototype),w(z,q);const k=()=>{},{errorOrDestroy:_}=K,W=1,J=2,j=4,ie=8,Z=16,se=32,ae=64,H=128,G=256,oe=512,le=1024,de=2048,C=4096,L=8192,U=16384,re=32768,te=65536,ee=1<<17,P=1<<18;function V(p){return{enumerable:!1,get(){return(this.state&p)!==0},set(E){E?this.state|=p:this.state&=~p}}}s(Q.prototype,{objectMode:V(W),ended:V(J),endEmitted:V(j),reading:V(ie),constructed:V(Z),sync:V(se),needReadable:V(ae),emittedReadable:V(H),readableListening:V(G),resumeScheduled:V(oe),errorEmitted:V(le),emitClose:V(de),autoDestroy:V(C),destroyed:V(L),closed:V(U),closeEmitted:V(re),multiAwaitDrain:V(te),readingMore:V(ee),dataEmitted:V(P)});function Q(p,E,X){typeof X!="boolean"&&(X=E instanceof rt()),this.state=de|C|Z|se,p&&p.objectMode&&(this.state|=W),X&&p&&p.readableObjectMode&&(this.state|=W),this.highWaterMark=p?fe(this,p,"readableHighWaterMark",X):he(!1),this.buffer=new Y,this.length=0,this.pipes=[],this.flowing=null,this[T]=null,p&&p.emitClose===!1&&(this.state&=-2049),p&&p.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=p&&p.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,p&&p.encoding&&(this.decoder=new M(p.encoding),this.encoding=p.encoding)}function z(p){if(!(this instanceof z))return new z(p);const E=this instanceof rt();this._readableState=new Q(p,this,E),p&&(typeof p.read=="function"&&(this._read=p.read),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.construct=="function"&&(this._construct=p.construct),p.signal&&!E&&f(p.signal,this)),q.call(this,p),K.construct(this,()=>{this._readableState.needReadable&&Pe(this,this._readableState)})}z.prototype.destroy=K.destroy,z.prototype._undestroy=K.undestroy,z.prototype._destroy=function(p,E){E(p)},z.prototype[B.captureRejectionSymbol]=function(p){this.destroy(p)},z.prototype[D]=function(){let p;return this.destroyed||(p=this.readableEnded?null:new I,this.destroy(p)),new O((E,X)=>c(this,ne=>ne&&ne!==p?X(ne):E(null)))},z.prototype.push=function(p,E){return we(this,p,E,!1)},z.prototype.unshift=function(p,E){return we(this,p,E,!0)};function we(p,E,X,ne){v("readableAddChunk",E);const ue=p._readableState;let Oe;if((ue.state&W)===0&&(typeof E=="string"?(X=X||ue.defaultEncoding,ue.encoding!==X&&(ne&&ue.encoding?E=A.from(E,X).toString(ue.encoding):(E=A.from(E,X),X=""))):E instanceof A?X="":q._isUint8Array(E)?(E=q._uint8ArrayToBuffer(E),X=""):E!=null&&(Oe=new g("chunk",["string","Buffer","Uint8Array"],E))),Oe)_(p,Oe);else if(E===null)ue.state&=-9,Ce(p,ue);else if((ue.state&W)!==0||E&&E.length>0)if(ne)if((ue.state&j)!==0)_(p,new l);else{if(ue.destroyed||ue.errored)return!1;Ne(p,ue,E,!0)}else if(ue.ended)_(p,new h);else{if(ue.destroyed||ue.errored)return!1;ue.state&=-9,ue.decoder&&!X?(E=ue.decoder.write(E),ue.objectMode||E.length!==0?Ne(p,ue,E,!1):Pe(p,ue)):Ne(p,ue,E,!1)}else ne||(ue.state&=-9,Pe(p,ue));return!ue.ended&&(ue.length<ue.highWaterMark||ue.length===0)}function Ne(p,E,X,ne){E.flowing&&E.length===0&&!E.sync&&p.listenerCount("data")>0?((E.state&te)!==0?E.awaitDrainWriters.clear():E.awaitDrainWriters=null,E.dataEmitted=!0,p.emit("data",X)):(E.length+=E.objectMode?1:X.length,ne?E.buffer.unshift(X):E.buffer.push(X),(E.state&ae)!==0&&He(p)),Pe(p,E)}z.prototype.isPaused=function(){const p=this._readableState;return p[T]===!0||p.flowing===!1},z.prototype.setEncoding=function(p){const E=new M(p);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;const X=this._readableState.buffer;let ne="";for(const ue of X)ne+=E.write(ue);return X.clear(),ne!==""&&X.push(ne),this._readableState.length=ne.length,this};const be=1073741824;function Le(p){if(p>be)throw new d("size","<= 1GiB",p);return p--,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p++,p}function Ie(p,E){return p<=0||E.length===0&&E.ended?0:(E.state&W)!==0?1:n(p)?E.flowing&&E.length?E.buffer.first().length:E.length:p<=E.length?p:E.ended?E.length:0}z.prototype.read=function(p){v("read",p),p===void 0?p=NaN:t(p)||(p=o(p,10));const E=this._readableState,X=p;if(p>E.highWaterMark&&(E.highWaterMark=Le(p)),p!==0&&(E.state&=-129),p===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return v("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?vt(this):He(this),null;if(p=Ie(p,E),p===0&&E.ended)return E.length===0&&vt(this),null;let ne=(E.state&ae)!==0;if(v("need readable",ne),(E.length===0||E.length-p<E.highWaterMark)&&(ne=!0,v("length less than watermark",ne)),E.ended||E.reading||E.destroyed||E.errored||!E.constructed)ne=!1,v("reading, ended or constructing",ne);else if(ne){v("do read"),E.state|=ie|se,E.length===0&&(E.state|=ae);try{this._read(E.highWaterMark)}catch(Oe){_(this,Oe)}E.state&=-33,E.reading||(p=Ie(X,E))}let ue;return p>0?ue=it(p,E):ue=null,ue===null?(E.needReadable=E.length<=E.highWaterMark,p=0):(E.length-=p,E.multiAwaitDrain?E.awaitDrainWriters.clear():E.awaitDrainWriters=null),E.length===0&&(E.ended||(E.needReadable=!0),X!==p&&E.ended&&vt(this)),ue!==null&&!E.errorEmitted&&!E.closeEmitted&&(E.dataEmitted=!0,this.emit("data",ue)),ue};function Ce(p,E){if(v("onEofChunk"),!E.ended){if(E.decoder){const X=E.decoder.end();X&&X.length&&(E.buffer.push(X),E.length+=E.objectMode?1:X.length)}E.ended=!0,E.sync?He(p):(E.needReadable=!1,E.emittedReadable=!0,ut(p))}}function He(p){const E=p._readableState;v("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(v("emitReadable",E.flowing),E.emittedReadable=!0,r.nextTick(ut,p))}function ut(p){const E=p._readableState;v("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&!E.errored&&(E.length||E.ended)&&(p.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,Et(p)}function Pe(p,E){!E.readingMore&&E.constructed&&(E.readingMore=!0,r.nextTick(Ft,p,E))}function Ft(p,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){const X=E.length;if(v("maybeReadMore read 0"),p.read(0),X===E.length)break}E.readingMore=!1}z.prototype._read=function(p){throw new a("_read()")},z.prototype.pipe=function(p,E){const X=this,ne=this._readableState;ne.pipes.length===1&&(ne.multiAwaitDrain||(ne.multiAwaitDrain=!0,ne.awaitDrainWriters=new R(ne.awaitDrainWriters?[ne.awaitDrainWriters]:[]))),ne.pipes.push(p),v("pipe count=%d opts=%j",ne.pipes.length,E);const Oe=(!E||E.end!==!1)&&p!==r.stdout&&p!==r.stderr?Ht:ft;ne.endEmitted?r.nextTick(Oe):X.once("end",Oe),p.on("unpipe",Me);function Me(Qe,ze){v("onunpipe"),Qe===X&&ze&&ze.hasUnpiped===!1&&(ze.hasUnpiped=!0,Ar())}function Ht(){v("onend"),p.end()}let De,zt=!1;function Ar(){v("cleanup"),p.removeListener("close",Ve),p.removeListener("finish",Tt),De&&p.removeListener("drain",De),p.removeListener("error",Rt),p.removeListener("unpipe",Me),X.removeListener("end",Ht),X.removeListener("end",ft),X.removeListener("data",Kt),zt=!0,De&&ne.awaitDrainWriters&&(!p._writableState||p._writableState.needDrain)&&De()}function Gt(){zt||(ne.pipes.length===1&&ne.pipes[0]===p?(v("false write response, pause",0),ne.awaitDrainWriters=p,ne.multiAwaitDrain=!1):ne.pipes.length>1&&ne.pipes.includes(p)&&(v("false write response, pause",ne.awaitDrainWriters.size),ne.awaitDrainWriters.add(p)),X.pause()),De||(De=Sr(X,p),p.on("drain",De))}X.on("data",Kt);function Kt(Qe){v("ondata");const ze=p.write(Qe);v("dest.write",ze),ze===!1&&Gt()}function Rt(Qe){if(v("onerror",Qe),ft(),p.removeListener("error",Rt),p.listenerCount("error")===0){const ze=p._writableState||p._readableState;ze&&!ze.errorEmitted?_(p,Qe):p.emit("error",Qe)}}N(p,"error",Rt);function Ve(){p.removeListener("finish",Tt),ft()}p.once("close",Ve);function Tt(){v("onfinish"),p.removeListener("close",Ve),ft()}p.once("finish",Tt);function ft(){v("unpipe"),X.unpipe(p)}return p.emit("pipe",X),p.writableNeedDrain===!0?Gt():ne.flowing||(v("pipe resume"),X.resume()),p};function Sr(p,E){return function(){const ne=p._readableState;ne.awaitDrainWriters===E?(v("pipeOnDrain",1),ne.awaitDrainWriters=null):ne.multiAwaitDrain&&(v("pipeOnDrain",ne.awaitDrainWriters.size),ne.awaitDrainWriters.delete(E)),(!ne.awaitDrainWriters||ne.awaitDrainWriters.size===0)&&p.listenerCount("data")&&p.resume()}}z.prototype.unpipe=function(p){const E=this._readableState,X={hasUnpiped:!1};if(E.pipes.length===0)return this;if(!p){const ue=E.pipes;E.pipes=[],this.pause();for(let Oe=0;Oe<ue.length;Oe++)ue[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}const ne=e(E.pipes,p);return ne===-1?this:(E.pipes.splice(ne,1),E.pipes.length===0&&this.pause(),p.emit("unpipe",this,X),this)},z.prototype.on=function(p,E){const X=q.prototype.on.call(this,p,E),ne=this._readableState;return p==="data"?(ne.readableListening=this.listenerCount("readable")>0,ne.flowing!==!1&&this.resume()):p==="readable"&&!ne.endEmitted&&!ne.readableListening&&(ne.readableListening=ne.needReadable=!0,ne.flowing=!1,ne.emittedReadable=!1,v("on readable",ne.length,ne.reading),ne.length?He(this):ne.reading||r.nextTick(Ye,this)),X},z.prototype.addListener=z.prototype.on,z.prototype.removeListener=function(p,E){const X=q.prototype.removeListener.call(this,p,E);return p==="readable"&&r.nextTick(Bt,this),X},z.prototype.off=z.prototype.removeListener,z.prototype.removeAllListeners=function(p){const E=q.prototype.removeAllListeners.apply(this,arguments);return(p==="readable"||p===void 0)&&r.nextTick(Bt,this),E};function Bt(p){const E=p._readableState;E.readableListening=p.listenerCount("readable")>0,E.resumeScheduled&&E[T]===!1?E.flowing=!0:p.listenerCount("data")>0?p.resume():E.readableListening||(E.flowing=null)}function Ye(p){v("readable nexttick read 0"),p.read(0)}z.prototype.resume=function(){const p=this._readableState;return p.flowing||(v("resume"),p.flowing=!p.readableListening,bt(this,p)),p[T]=!1,this};function bt(p,E){E.resumeScheduled||(E.resumeScheduled=!0,r.nextTick(Er,p,E))}function Er(p,E){v("resume",E.reading),E.reading||p.read(0),E.resumeScheduled=!1,p.emit("resume"),Et(p),E.flowing&&!E.reading&&p.read(0)}z.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[T]=!0,this};function Et(p){const E=p._readableState;for(v("flow",E.flowing);E.flowing&&p.read()!==null;);}z.prototype.wrap=function(p){let E=!1;p.on("data",ne=>{!this.push(ne)&&p.pause&&(E=!0,p.pause())}),p.on("end",()=>{this.push(null)}),p.on("error",ne=>{_(this,ne)}),p.on("close",()=>{this.destroy()}),p.on("destroy",()=>{this.destroy()}),this._read=()=>{E&&p.resume&&(E=!1,p.resume())};const X=u(p);for(let ne=1;ne<X.length;ne++){const ue=X[ne];this[ue]===void 0&&typeof p[ue]=="function"&&(this[ue]=p[ue].bind(p))}return this},z.prototype[F]=function(){return Ut(this)},z.prototype.iterator=function(p){return p!==void 0&&m(p,"options"),Ut(this,p)};function Ut(p,E){typeof p.read!="function"&&(p=z.wrap(p,{objectMode:!0}));const X=qt(p,E);return X.stream=p,X}async function*qt(p,E){let X=k;function ne(Me){this===p?(X(),X=k):X=Me}p.on("readable",ne);let ue;const Oe=c(p,{writable:!1},Me=>{ue=Me?i(ue,Me):null,X(),X=k});try{for(;;){const Me=p.destroyed?null:p.read();if(Me!==null)yield Me;else{if(ue)throw ue;if(ue===null)return;await new O(ne)}}}catch(Me){throw ue=i(ue,Me),ue}finally{(ue||(E==null?void 0:E.destroyOnReturn)!==!1)&&(ue===void 0||p._readableState.autoDestroy)?K.destroyer(p,null):(p.off("readable",ne),Oe())}}s(z.prototype,{readable:{__proto__:null,get(){const p=this._readableState;return!!p&&p.readable!==!1&&!p.destroyed&&!p.errorEmitted&&!p.endEmitted},set(p){this._readableState&&(this._readableState.readable=!!p)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(p){this._readableState&&(this._readableState.flowing=p)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(p){this._readableState&&(this._readableState.destroyed=p)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(Q.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[T]!==!1},set(p){this[T]=!!p}}}),z._fromList=it;function it(p,E){if(E.length===0)return null;let X;return E.objectMode?X=E.buffer.shift():!p||p>=E.length?(E.decoder?X=E.buffer.join(""):E.buffer.length===1?X=E.buffer.first():X=E.buffer.concat(E.length),E.buffer.clear()):X=E.buffer.consume(p,E.decoder),X}function vt(p){const E=p._readableState;v("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,r.nextTick(Xe,E,p))}function Xe(p,E){if(v("endReadableNT",p.endEmitted,p.length),!p.errored&&!p.closeEmitted&&!p.endEmitted&&p.length===0){if(p.endEmitted=!0,E.emit("end"),E.writable&&E.allowHalfOpen===!1)r.nextTick(vr,E);else if(p.autoDestroy){const X=E._writableState;(!X||X.autoDestroy&&(X.finished||X.writable===!1))&&E.destroy()}}}function vr(p){p.writable&&!p.writableEnded&&!p.destroyed&&p.end()}z.from=function(p,E){return b(z,p,E)};let At;function $t(){return At===void 0&&(At={}),At}return z.fromWeb=function(p,E){return $t().newStreamReadableFromReadableStream(p,E)},z.toWeb=function(p,E){return $t().newReadableStreamFromStreamReadable(p,E)},z.wrap=function(p,E){var X,ne;return new z({objectMode:(X=(ne=p.readableObjectMode)!==null&&ne!==void 0?ne:p.objectMode)!==null&&X!==void 0?X:!0,...E,destroy(ue,Oe){K.destroyer(p,ue),Oe(ue)}}).wrap(p)},Xr}var Qr,oi;function An(){if(oi)return Qr;oi=1;const r=_t(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:s,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:w,Symbol:O,SymbolHasInstance:R}=Te();Qr=m,m.WritableState=l;const{EventEmitter:D}=dr(),F=vn().Stream,{Buffer:S}=wt(),B=St(),{addAbortSignal:q}=hr(),{getHighWaterMark:N,getDefaultHighWaterMark:A}=gr(),{ERR_INVALID_ARG_TYPE:f,ERR_METHOD_NOT_IMPLEMENTED:c,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:Y,ERR_STREAM_DESTROYED:K,ERR_STREAM_ALREADY_FINISHED:fe,ERR_STREAM_NULL_VALUES:he,ERR_STREAM_WRITE_AFTER_END:i,ERR_UNKNOWN_ENCODING:g}=xe().codes,{errorOrDestroy:a}=B;u(m.prototype,F.prototype),u(m,F);function d(){}const h=O("kOnFinished");function l(C,L,U){typeof U!="boolean"&&(U=L instanceof rt()),this.objectMode=!!(C&&C.objectMode),U&&(this.objectMode=this.objectMode||!!(C&&C.writableObjectMode)),this.highWaterMark=C?N(this,C,"writableHighWaterMark",U):A(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const re=!!(C&&C.decodeStrings===!1);this.decodeStrings=!re,this.defaultEncoding=C&&C.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=_.bind(void 0,L),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,I(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!C||C.emitClose!==!1,this.autoDestroy=!C||C.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[h]=[]}function I(C){C.buffered=[],C.bufferedIndex=0,C.allBuffers=!0,C.allNoop=!0}l.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},o(l.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function m(C){const L=this instanceof rt();if(!L&&!n(m,this))return new m(C);this._writableState=new l(C,this,L),C&&(typeof C.write=="function"&&(this._write=C.write),typeof C.writev=="function"&&(this._writev=C.writev),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.final=="function"&&(this._final=C.final),typeof C.construct=="function"&&(this._construct=C.construct),C.signal&&q(C.signal,this)),F.call(this,C),B.construct(this,()=>{const U=this._writableState;U.writing||ie(this,U),H(this,U)})}o(m,R,{__proto__:null,value:function(C){return n(this,C)?!0:this!==m?!1:C&&C._writableState instanceof l}}),m.prototype.pipe=function(){a(this,new Y)};function T(C,L,U,re){const te=C._writableState;if(typeof U=="function")re=U,U=te.defaultEncoding;else{if(!U)U=te.defaultEncoding;else if(U!=="buffer"&&!S.isEncoding(U))throw new g(U);typeof re!="function"&&(re=d)}if(L===null)throw new he;if(!te.objectMode)if(typeof L=="string")te.decodeStrings!==!1&&(L=S.from(L,U),U="buffer");else if(L instanceof S)U="buffer";else if(F._isUint8Array(L))L=F._uint8ArrayToBuffer(L),U="buffer";else throw new f("chunk",["string","Buffer","Uint8Array"],L);let ee;return te.ending?ee=new i:te.destroyed&&(ee=new K("write")),ee?(r.nextTick(re,ee),a(C,ee,!0),ee):(te.pendingcb++,M(C,te,L,U,re))}m.prototype.write=function(C,L,U){return T(this,C,L,U)===!0},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){const C=this._writableState;C.corked&&(C.corked--,C.writing||ie(this,C))},m.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=w(L)),!S.isEncoding(L))throw new g(L);return this._writableState.defaultEncoding=L,this};function M(C,L,U,re,te){const ee=L.objectMode?1:U.length;L.length+=ee;const P=L.length<L.highWaterMark;return P||(L.needDrain=!0),L.writing||L.corked||L.errored||!L.constructed?(L.buffered.push({chunk:U,encoding:re,callback:te}),L.allBuffers&&re!=="buffer"&&(L.allBuffers=!1),L.allNoop&&te!==d&&(L.allNoop=!1)):(L.writelen=ee,L.writecb=te,L.writing=!0,L.sync=!0,C._write(U,re,L.onwrite),L.sync=!1),P&&!L.errored&&!L.destroyed}function b(C,L,U,re,te,ee,P){L.writelen=re,L.writecb=P,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new K("write")):U?C._writev(te,L.onwrite):C._write(te,ee,L.onwrite),L.sync=!1}function k(C,L,U,re){--L.pendingcb,re(U),j(L),a(C,U)}function _(C,L){const U=C._writableState,re=U.sync,te=U.writecb;if(typeof te!="function"){a(C,new v);return}U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0,L?(L.stack,U.errored||(U.errored=L),C._readableState&&!C._readableState.errored&&(C._readableState.errored=L),re?r.nextTick(k,C,U,L,te):k(C,U,L,te)):(U.buffered.length>U.bufferedIndex&&ie(C,U),re?U.afterWriteTickInfo!==null&&U.afterWriteTickInfo.cb===te?U.afterWriteTickInfo.count++:(U.afterWriteTickInfo={count:1,cb:te,stream:C,state:U},r.nextTick(W,U.afterWriteTickInfo)):J(C,U,1,te))}function W({stream:C,state:L,count:U,cb:re}){return L.afterWriteTickInfo=null,J(C,L,U,re)}function J(C,L,U,re){for(!L.ending&&!C.destroyed&&L.length===0&&L.needDrain&&(L.needDrain=!1,C.emit("drain"));U-- >0;)L.pendingcb--,re();L.destroyed&&j(L),H(C,L)}function j(C){if(C.writing)return;for(let te=C.bufferedIndex;te<C.buffered.length;++te){var L;const{chunk:ee,callback:P}=C.buffered[te],V=C.objectMode?1:ee.length;C.length-=V,P((L=C.errored)!==null&&L!==void 0?L:new K("write"))}const U=C[h].splice(0);for(let te=0;te<U.length;te++){var re;U[te]((re=C.errored)!==null&&re!==void 0?re:new K("end"))}I(C)}function ie(C,L){if(L.corked||L.bufferProcessing||L.destroyed||!L.constructed)return;const{buffered:U,bufferedIndex:re,objectMode:te}=L,ee=U.length-re;if(!ee)return;let P=re;if(L.bufferProcessing=!0,ee>1&&C._writev){L.pendingcb-=ee-1;const V=L.allNoop?d:z=>{for(let we=P;we<U.length;++we)U[we].callback(z)},Q=L.allNoop&&P===0?U:e(U,P);Q.allBuffers=L.allBuffers,b(C,L,!0,L.length,Q,"",V),I(L)}else{do{const{chunk:V,encoding:Q,callback:z}=U[P];U[P++]=null;const we=te?1:V.length;b(C,L,!1,we,V,Q,z)}while(P<U.length&&!L.writing);P===U.length?I(L):P>256?(U.splice(0,P),L.bufferedIndex=0):L.bufferedIndex=P}L.bufferProcessing=!1}m.prototype._write=function(C,L,U){if(this._writev)this._writev([{chunk:C,encoding:L}],U);else throw new c("_write()")},m.prototype._writev=null,m.prototype.end=function(C,L,U){const re=this._writableState;typeof C=="function"?(U=C,C=null,L=null):typeof L=="function"&&(U=L,L=null);let te;if(C!=null){const ee=T(this,C,L);ee instanceof t&&(te=ee)}return re.corked&&(re.corked=1,this.uncork()),te||(!re.errored&&!re.ending?(re.ending=!0,H(this,re,!0),re.ended=!0):re.finished?te=new fe("end"):re.destroyed&&(te=new K("end"))),typeof U=="function"&&(te||re.finished?r.nextTick(U,te):re[h].push(U)),this};function Z(C){return C.ending&&!C.destroyed&&C.constructed&&C.length===0&&!C.errored&&C.buffered.length===0&&!C.finished&&!C.writing&&!C.errorEmitted&&!C.closeEmitted}function se(C,L){let U=!1;function re(te){if(U){a(C,te??v());return}if(U=!0,L.pendingcb--,te){const ee=L[h].splice(0);for(let P=0;P<ee.length;P++)ee[P](te);a(C,te,L.sync)}else Z(L)&&(L.prefinished=!0,C.emit("prefinish"),L.pendingcb++,r.nextTick(G,C,L))}L.sync=!0,L.pendingcb++;try{C._final(re)}catch(te){re(te)}L.sync=!1}function ae(C,L){!L.prefinished&&!L.finalCalled&&(typeof C._final=="function"&&!L.destroyed?(L.finalCalled=!0,se(C,L)):(L.prefinished=!0,C.emit("prefinish")))}function H(C,L,U){Z(L)&&(ae(C,L),L.pendingcb===0&&(U?(L.pendingcb++,r.nextTick((re,te)=>{Z(te)?G(re,te):te.pendingcb--},C,L)):Z(L)&&(L.pendingcb++,G(C,L))))}function G(C,L){L.pendingcb--,L.finished=!0;const U=L[h].splice(0);for(let re=0;re<U.length;re++)U[re]();if(C.emit("finish"),L.autoDestroy){const re=C._readableState;(!re||re.autoDestroy&&(re.endEmitted||re.readable===!1))&&C.destroy()}}s(m.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(C){this._writableState&&(this._writableState.destroyed=C)}},writable:{__proto__:null,get(){const C=this._writableState;return!!C&&C.writable!==!1&&!C.destroyed&&!C.errored&&!C.ending&&!C.ended},set(C){this._writableState&&(this._writableState.writable=!!C)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const C=this._writableState;return C?!C.destroyed&&!C.ending&&C.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const oe=B.destroy;m.prototype.destroy=function(C,L){const U=this._writableState;return!U.destroyed&&(U.bufferedIndex<U.buffered.length||U[h].length)&&r.nextTick(j,U),oe.call(this,C,L),this},m.prototype._undestroy=B.undestroy,m.prototype._destroy=function(C,L){L(C)},m.prototype[D.captureRejectionSymbol]=function(C){this.destroy(C)};let le;function de(){return le===void 0&&(le={}),le}return m.fromWeb=function(C,L){return de().newStreamWritableFromWritableStream(C,L)},m.toWeb=function(C){return de().newWritableStreamFromStreamWritable(C)},Qr}var Zr,si;function as(){if(si)return Zr;si=1;const r=_t(),e=wt(),{isReadable:t,isWritable:n,isIterable:o,isNodeStream:s,isReadableNodeStream:u,isWritableNodeStream:w,isDuplexNodeStream:O,isReadableStream:R,isWritableStream:D}=nt(),F=lt(),{AbortError:S,codes:{ERR_INVALID_ARG_TYPE:B,ERR_INVALID_RETURN_VALUE:q}}=xe(),{destroyer:N}=St(),A=rt(),f=pr(),c=An(),{createDeferredPromise:v}=je(),Y=to(),K=globalThis.Blob||e.Blob,fe=typeof K<"u"?function(l){return l instanceof K}:function(l){return!1},he=globalThis.AbortController||kt().AbortController,{FunctionPrototypeCall:i}=Te();class g extends A{constructor(l){super(l),(l==null?void 0:l.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(l==null?void 0:l.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Zr=function h(l,I){if(O(l))return l;if(u(l))return d({readable:l});if(w(l))return d({writable:l});if(s(l))return d({writable:!1,readable:!1});if(R(l))return d({readable:f.fromWeb(l)});if(D(l))return d({writable:c.fromWeb(l)});if(typeof l=="function"){const{value:T,write:M,final:b,destroy:k}=a(l);if(o(T))return Y(g,T,{objectMode:!0,write:M,final:b,destroy:k});const _=T==null?void 0:T.then;if(typeof _=="function"){let W;const J=i(_,T,j=>{if(j!=null)throw new q("nully","body",j)},j=>{N(W,j)});return W=new g({objectMode:!0,readable:!1,write:M,final(j){b(async()=>{try{await J,r.nextTick(j,null)}catch(ie){r.nextTick(j,ie)}})},destroy:k})}throw new q("Iterable, AsyncIterable or AsyncFunction",I,T)}if(fe(l))return h(l.arrayBuffer());if(o(l))return Y(g,l,{objectMode:!0,writable:!1});if(R(l==null?void 0:l.readable)&&D(l==null?void 0:l.writable))return g.fromWeb(l);if(typeof(l==null?void 0:l.writable)=="object"||typeof(l==null?void 0:l.readable)=="object"){const T=l!=null&&l.readable?u(l==null?void 0:l.readable)?l==null?void 0:l.readable:h(l.readable):void 0,M=l!=null&&l.writable?w(l==null?void 0:l.writable)?l==null?void 0:l.writable:h(l.writable):void 0;return d({readable:T,writable:M})}const m=l==null?void 0:l.then;if(typeof m=="function"){let T;return i(m,l,M=>{M!=null&&T.push(M),T.push(null)},M=>{N(T,M)}),T=new g({objectMode:!0,writable:!1,read(){}})}throw new B(I,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],l)};function a(h){let{promise:l,resolve:I}=v();const m=new he,T=m.signal;return{value:h(async function*(){for(;;){const b=l;l=null;const{chunk:k,done:_,cb:W}=await b;if(r.nextTick(W),_)return;if(T.aborted)throw new S(void 0,{cause:T.reason});({promise:l,resolve:I}=v()),yield k}}(),{signal:T}),write(b,k,_){const W=I;I=null,W({chunk:b,done:!1,cb:_})},final(b){const k=I;I=null,k({done:!0,cb:b})},destroy(b,k){m.abort(),k(b)}}}function d(h){const l=h.readable&&typeof h.readable.read!="function"?f.wrap(h.readable):h.readable,I=h.writable;let m=!!t(l),T=!!n(I),M,b,k,_,W;function J(j){const ie=_;_=null,ie?ie(j):j&&W.destroy(j)}return W=new g({readableObjectMode:!!(l!=null&&l.readableObjectMode),writableObjectMode:!!(I!=null&&I.writableObjectMode),readable:m,writable:T}),T&&(F(I,j=>{T=!1,j&&N(l,j),J(j)}),W._write=function(j,ie,Z){I.write(j,ie)?Z():M=Z},W._final=function(j){I.end(),b=j},I.on("drain",function(){if(M){const j=M;M=null,j()}}),I.on("finish",function(){if(b){const j=b;b=null,j()}})),m&&(F(l,j=>{m=!1,j&&N(l,j),J(j)}),l.on("readable",function(){if(k){const j=k;k=null,j()}}),l.on("end",function(){W.push(null)}),W._read=function(){for(;;){const j=l.read();if(j===null){k=W._read;return}if(!W.push(j))return}}),W._destroy=function(j,ie){!j&&_!==null&&(j=new S),k=null,M=null,b=null,_===null?ie(j):(_=ie,N(I,j),N(l,j))},W}return Zr}var en,ai;function rt(){if(ai)return en;ai=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Te();en=u;const o=pr(),s=An();n(u.prototype,o.prototype),n(u,o);{const D=t(s.prototype);for(let F=0;F<D.length;F++){const S=D[F];u.prototype[S]||(u.prototype[S]=s.prototype[S])}}function u(D){if(!(this instanceof u))return new u(D);o.call(this,D),s.call(this,D),D?(this.allowHalfOpen=D.allowHalfOpen!==!1,D.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),D.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(u.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(D){this._readableState&&this._writableState&&(this._readableState.destroyed=D,this._writableState.destroyed=D)}}});let w;function O(){return w===void 0&&(w={}),w}u.fromWeb=function(D,F){return O().newStreamDuplexFromReadableWritablePair(D,F)},u.toWeb=function(D){return O().newReadableWritablePairFromDuplex(D)};let R;return u.from=function(D){return R||(R=as()),R(D,"body")},en}var tn,li;function ro(){if(li)return tn;li=1;const{ObjectSetPrototypeOf:r,Symbol:e}=Te();tn=u;const{ERR_METHOD_NOT_IMPLEMENTED:t}=xe().codes,n=rt(),{getHighWaterMark:o}=gr();r(u.prototype,n.prototype),r(u,n);const s=e("kCallback");function u(R){if(!(this instanceof u))return new u(R);const D=R?o(this,R,"readableHighWaterMark",!0):null;D===0&&(R={...R,highWaterMark:null,readableHighWaterMark:D,writableHighWaterMark:R.writableHighWaterMark||0}),n.call(this,R),this._readableState.sync=!1,this[s]=null,R&&(typeof R.transform=="function"&&(this._transform=R.transform),typeof R.flush=="function"&&(this._flush=R.flush)),this.on("prefinish",O)}function w(R){typeof this._flush=="function"&&!this.destroyed?this._flush((D,F)=>{if(D){R?R(D):this.destroy(D);return}F!=null&&this.push(F),this.push(null),R&&R()}):(this.push(null),R&&R())}function O(){this._final!==w&&w.call(this)}return u.prototype._final=w,u.prototype._transform=function(R,D,F){throw new t("_transform()")},u.prototype._write=function(R,D,F){const S=this._readableState,B=this._writableState,q=S.length;this._transform(R,D,(N,A)=>{if(N){F(N);return}A!=null&&this.push(A),B.ended||q===S.length||S.length<S.highWaterMark?F():this[s]=F})},u.prototype._read=function(){if(this[s]){const R=this[s];this[s]=null,R()}},tn}var rn,ui;function no(){if(ui)return rn;ui=1;const{ObjectSetPrototypeOf:r}=Te();rn=t;const e=ro();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,o,s){s(null,n)},rn}var nn,fi;function Rn(){if(fi)return nn;fi=1;const r=_t(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:o}=Te(),s=lt(),{once:u}=je(),w=St(),O=rt(),{aggregateTwoErrors:R,codes:{ERR_INVALID_ARG_TYPE:D,ERR_INVALID_RETURN_VALUE:F,ERR_MISSING_ARGS:S,ERR_STREAM_DESTROYED:B,ERR_STREAM_PREMATURE_CLOSE:q},AbortError:N}=xe(),{validateFunction:A,validateAbortSignal:f}=jt(),{isIterable:c,isReadable:v,isReadableNodeStream:Y,isNodeStream:K,isTransformStream:fe,isWebStream:he,isReadableStream:i,isReadableFinished:g}=nt(),a=globalThis.AbortController||kt().AbortController;let d,h,l;function I(j,ie,Z){let se=!1;j.on("close",()=>{se=!0});const ae=s(j,{readable:ie,writable:Z},H=>{se=!H});return{destroy:H=>{se||(se=!0,w.destroyer(j,H||new B("pipe")))},cleanup:ae}}function m(j){return A(j[j.length-1],"streams[stream.length - 1]"),j.pop()}function T(j){if(c(j))return j;if(Y(j))return M(j);throw new D("val",["Readable","Iterable","AsyncIterable"],j)}async function*M(j){h||(h=pr()),yield*h.prototype[n].call(j)}async function b(j,ie,Z,{end:se}){let ae,H=null;const G=de=>{if(de&&(ae=de),H){const C=H;H=null,C()}},oe=()=>new t((de,C)=>{ae?C(ae):H=()=>{ae?C(ae):de()}});ie.on("drain",G);const le=s(ie,{readable:!1},G);try{ie.writableNeedDrain&&await oe();for await(const de of j)ie.write(de)||await oe();se&&(ie.end(),await oe()),Z()}catch(de){Z(ae!==de?R(ae,de):de)}finally{le(),ie.off("drain",G)}}async function k(j,ie,Z,{end:se}){fe(ie)&&(ie=ie.writable);const ae=ie.getWriter();try{for await(const H of j)await ae.ready,ae.write(H).catch(()=>{});await ae.ready,se&&await ae.close(),Z()}catch(H){try{await ae.abort(H),Z(H)}catch(G){Z(G)}}}function _(...j){return W(j,u(m(j)))}function W(j,ie,Z){if(j.length===1&&e(j[0])&&(j=j[0]),j.length<2)throw new S("streams");const se=new a,ae=se.signal,H=Z==null?void 0:Z.signal,G=[];f(H,"options.signal");function oe(){te(new N)}l=l||je().addAbortListener;let le;H&&(le=l(H,oe));let de,C;const L=[];let U=0;function re(Q){te(Q,--U===0)}function te(Q,z){var we;if(Q&&(!de||de.code==="ERR_STREAM_PREMATURE_CLOSE")&&(de=Q),!(!de&&!z)){for(;L.length;)L.shift()(de);(we=le)===null||we===void 0||we[o](),se.abort(),z&&(de||G.forEach(Ne=>Ne()),r.nextTick(ie,de,C))}}let ee;for(let Q=0;Q<j.length;Q++){const z=j[Q],we=Q<j.length-1,Ne=Q>0,be=we||(Z==null?void 0:Z.end)!==!1,Le=Q===j.length-1;if(K(z)){let Ie=function(Ce){Ce&&Ce.name!=="AbortError"&&Ce.code!=="ERR_STREAM_PREMATURE_CLOSE"&&re(Ce)};if(be){const{destroy:Ce,cleanup:He}=I(z,we,Ne);L.push(Ce),v(z)&&Le&&G.push(He)}z.on("error",Ie),v(z)&&Le&&G.push(()=>{z.removeListener("error",Ie)})}if(Q===0)if(typeof z=="function"){if(ee=z({signal:ae}),!c(ee))throw new F("Iterable, AsyncIterable or Stream","source",ee)}else c(z)||Y(z)||fe(z)?ee=z:ee=O.from(z);else if(typeof z=="function"){if(fe(ee)){var P;ee=T((P=ee)===null||P===void 0?void 0:P.readable)}else ee=T(ee);if(ee=z(ee,{signal:ae}),we){if(!c(ee,!0))throw new F("AsyncIterable",`transform[${Q-1}]`,ee)}else{var V;d||(d=no());const Ie=new d({objectMode:!0}),Ce=(V=ee)===null||V===void 0?void 0:V.then;if(typeof Ce=="function")U++,Ce.call(ee,Pe=>{C=Pe,Pe!=null&&Ie.write(Pe),be&&Ie.end(),r.nextTick(re)},Pe=>{Ie.destroy(Pe),r.nextTick(re,Pe)});else if(c(ee,!0))U++,b(ee,Ie,re,{end:be});else if(i(ee)||fe(ee)){const Pe=ee.readable||ee;U++,b(Pe,Ie,re,{end:be})}else throw new F("AsyncIterable or Promise","destination",ee);ee=Ie;const{destroy:He,cleanup:ut}=I(ee,!1,!0);L.push(He),Le&&G.push(ut)}}else if(K(z)){if(Y(ee)){U+=2;const Ie=J(ee,z,re,{end:be});v(z)&&Le&&G.push(Ie)}else if(fe(ee)||i(ee)){const Ie=ee.readable||ee;U++,b(Ie,z,re,{end:be})}else if(c(ee))U++,b(ee,z,re,{end:be});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ee);ee=z}else if(he(z)){if(Y(ee))U++,k(T(ee),z,re,{end:be});else if(i(ee)||c(ee))U++,k(ee,z,re,{end:be});else if(fe(ee))U++,k(ee.readable,z,re,{end:be});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ee);ee=z}else ee=O.from(z)}return(ae!=null&&ae.aborted||H!=null&&H.aborted)&&r.nextTick(oe),ee}function J(j,ie,Z,{end:se}){let ae=!1;if(ie.on("close",()=>{ae||Z(new q)}),j.pipe(ie,{end:!1}),se){let H=function(){ae=!0,ie.end()};g(j)?r.nextTick(H):j.once("end",H)}else Z();return s(j,{readable:!0,writable:!1},H=>{const G=j._readableState;H&&H.code==="ERR_STREAM_PREMATURE_CLOSE"&&G&&G.ended&&!G.errored&&!G.errorEmitted?j.once("end",Z).once("error",Z):Z(H)}),s(ie,{readable:!1,writable:!0},Z)}return nn={pipelineImpl:W,pipeline:_},nn}var on,ci;function io(){if(ci)return on;ci=1;const{pipeline:r}=Rn(),e=rt(),{destroyer:t}=St(),{isNodeStream:n,isReadable:o,isWritable:s,isWebStream:u,isTransformStream:w,isWritableStream:O,isReadableStream:R}=nt(),{AbortError:D,codes:{ERR_INVALID_ARG_VALUE:F,ERR_MISSING_ARGS:S}}=xe(),B=lt();return on=function(...N){if(N.length===0)throw new S("streams");if(N.length===1)return e.from(N[0]);const A=[...N];if(typeof N[0]=="function"&&(N[0]=e.from(N[0])),typeof N[N.length-1]=="function"){const d=N.length-1;N[d]=e.from(N[d])}for(let d=0;d<N.length;++d)if(!(!n(N[d])&&!u(N[d]))){if(d<N.length-1&&!(o(N[d])||R(N[d])||w(N[d])))throw new F(`streams[${d}]`,A[d],"must be readable");if(d>0&&!(s(N[d])||O(N[d])||w(N[d])))throw new F(`streams[${d}]`,A[d],"must be writable")}let f,c,v,Y,K;function fe(d){const h=Y;Y=null,h?h(d):d?K.destroy(d):!a&&!g&&K.destroy()}const he=N[0],i=r(N,fe),g=!!(s(he)||O(he)||w(he)),a=!!(o(i)||R(i)||w(i));if(K=new e({writableObjectMode:!!(he!=null&&he.writableObjectMode),readableObjectMode:!!(i!=null&&i.readableObjectMode),writable:g,readable:a}),g){if(n(he))K._write=function(h,l,I){he.write(h,l)?I():f=I},K._final=function(h){he.end(),c=h},he.on("drain",function(){if(f){const h=f;f=null,h()}});else if(u(he)){const l=(w(he)?he.writable:he).getWriter();K._write=async function(I,m,T){try{await l.ready,l.write(I).catch(()=>{}),T()}catch(M){T(M)}},K._final=async function(I){try{await l.ready,l.close().catch(()=>{}),c=I}catch(m){I(m)}}}const d=w(i)?i.readable:i;B(d,()=>{if(c){const h=c;c=null,h()}})}if(a){if(n(i))i.on("readable",function(){if(v){const d=v;v=null,d()}}),i.on("end",function(){K.push(null)}),K._read=function(){for(;;){const d=i.read();if(d===null){v=K._read;return}if(!K.push(d))return}};else if(u(i)){const h=(w(i)?i.readable:i).getReader();K._read=async function(){for(;;)try{const{value:l,done:I}=await h.read();if(!K.push(l))return;if(I){K.push(null);return}}catch{return}}}}return K._destroy=function(d,h){!d&&Y!==null&&(d=new D),v=null,f=null,c=null,Y===null?h(d):(Y=h,n(i)&&t(i,d))},K},on}var di;function ls(){if(di)return Zt;di=1;const r=globalThis.AbortController||kt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:o},AbortError:s}=xe(),{validateAbortSignal:u,validateInteger:w,validateObject:O}=jt(),R=Te().Symbol("kWeak"),D=Te().Symbol("kResistStopPropagation"),{finished:F}=lt(),S=io(),{addAbortSignalNoValidate:B}=hr(),{isWritable:q,isNodeStream:N}=nt(),{deprecate:A}=je(),{ArrayPrototypePush:f,Boolean:c,MathFloor:v,Number:Y,NumberIsNaN:K,Promise:fe,PromiseReject:he,PromiseResolve:i,PromisePrototypeThen:g,Symbol:a}=Te(),d=a("kEmpty"),h=a("kEof");function l(H,G){if(G!=null&&O(G,"options"),(G==null?void 0:G.signal)!=null&&u(G.signal,"options.signal"),N(H)&&!q(H))throw new e("stream",H,"must be writable");const oe=S(this,H);return G!=null&&G.signal&&B(G.signal,oe),oe}function I(H,G){if(typeof H!="function")throw new t("fn",["Function","AsyncFunction"],H);G!=null&&O(G,"options"),(G==null?void 0:G.signal)!=null&&u(G.signal,"options.signal");let oe=1;(G==null?void 0:G.concurrency)!=null&&(oe=v(G.concurrency));let le=oe-1;return(G==null?void 0:G.highWaterMark)!=null&&(le=v(G.highWaterMark)),w(oe,"options.concurrency",1),w(le,"options.highWaterMark",0),le+=oe,(async function*(){const C=je().AbortSignalAny([G==null?void 0:G.signal].filter(c)),L=this,U=[],re={signal:C};let te,ee,P=!1,V=0;function Q(){P=!0,z()}function z(){V-=1,we()}function we(){ee&&!P&&V<oe&&U.length<le&&(ee(),ee=null)}async function Ne(){try{for await(let be of L){if(P)return;if(C.aborted)throw new s;try{if(be=H(be,re),be===d)continue;be=i(be)}catch(Le){be=he(Le)}V+=1,g(be,z,Q),U.push(be),te&&(te(),te=null),!P&&(U.length>=le||V>=oe)&&await new fe(Le=>{ee=Le})}U.push(h)}catch(be){const Le=he(be);g(Le,z,Q),U.push(Le)}finally{P=!0,te&&(te(),te=null)}}Ne();try{for(;;){for(;U.length>0;){const be=await U[0];if(be===h)return;if(C.aborted)throw new s;be!==d&&(yield be),U.shift(),we()}await new fe(be=>{te=be})}}finally{P=!0,ee&&(ee(),ee=null)}}).call(this)}function m(H=void 0){return H!=null&&O(H,"options"),(H==null?void 0:H.signal)!=null&&u(H.signal,"options.signal"),(async function*(){let oe=0;for await(const de of this){var le;if(H!=null&&(le=H.signal)!==null&&le!==void 0&&le.aborted)throw new s({cause:H.signal.reason});yield[oe++,de]}}).call(this)}async function T(H,G=void 0){for await(const oe of _.call(this,H,G))return!0;return!1}async function M(H,G=void 0){if(typeof H!="function")throw new t("fn",["Function","AsyncFunction"],H);return!await T.call(this,async(...oe)=>!await H(...oe),G)}async function b(H,G){for await(const oe of _.call(this,H,G))return oe}async function k(H,G){if(typeof H!="function")throw new t("fn",["Function","AsyncFunction"],H);async function oe(le,de){return await H(le,de),d}for await(const le of I.call(this,oe,G));}function _(H,G){if(typeof H!="function")throw new t("fn",["Function","AsyncFunction"],H);async function oe(le,de){return await H(le,de)?le:d}return I.call(this,oe,G)}class W extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function J(H,G,oe){var le;if(typeof H!="function")throw new t("reducer",["Function","AsyncFunction"],H);oe!=null&&O(oe,"options"),(oe==null?void 0:oe.signal)!=null&&u(oe.signal,"options.signal");let de=arguments.length>1;if(oe!=null&&(le=oe.signal)!==null&&le!==void 0&&le.aborted){const te=new s(void 0,{cause:oe.signal.reason});throw this.once("error",()=>{}),await F(this.destroy(te)),te}const C=new r,L=C.signal;if(oe!=null&&oe.signal){const te={once:!0,[R]:this,[D]:!0};oe.signal.addEventListener("abort",()=>C.abort(),te)}let U=!1;try{for await(const te of this){var re;if(U=!0,oe!=null&&(re=oe.signal)!==null&&re!==void 0&&re.aborted)throw new s;de?G=await H(G,te,{signal:L}):(G=te,de=!0)}if(!U&&!de)throw new W}finally{C.abort()}return G}async function j(H){H!=null&&O(H,"options"),(H==null?void 0:H.signal)!=null&&u(H.signal,"options.signal");const G=[];for await(const le of this){var oe;if(H!=null&&(oe=H.signal)!==null&&oe!==void 0&&oe.aborted)throw new s(void 0,{cause:H.signal.reason});f(G,le)}return G}function ie(H,G){const oe=I.call(this,H,G);return(async function*(){for await(const de of oe)yield*de}).call(this)}function Z(H){if(H=Y(H),K(H))return 0;if(H<0)throw new o("number",">= 0",H);return H}function se(H,G=void 0){return G!=null&&O(G,"options"),(G==null?void 0:G.signal)!=null&&u(G.signal,"options.signal"),H=Z(H),(async function*(){var le;if(G!=null&&(le=G.signal)!==null&&le!==void 0&&le.aborted)throw new s;for await(const C of this){var de;if(G!=null&&(de=G.signal)!==null&&de!==void 0&&de.aborted)throw new s;H--<=0&&(yield C)}}).call(this)}function ae(H,G=void 0){return G!=null&&O(G,"options"),(G==null?void 0:G.signal)!=null&&u(G.signal,"options.signal"),H=Z(H),(async function*(){var le;if(G!=null&&(le=G.signal)!==null&&le!==void 0&&le.aborted)throw new s;for await(const C of this){var de;if(G!=null&&(de=G.signal)!==null&&de!==void 0&&de.aborted)throw new s;if(H-- >0&&(yield C),H<=0)return}}).call(this)}return Zt.streamReturningOperators={asIndexedPairs:A(m,"readable.asIndexedPairs will be removed in a future version."),drop:se,filter:_,flatMap:ie,map:I,take:ae,compose:l},Zt.promiseReturningOperators={every:M,forEach:k,reduce:J,toArray:j,some:T,find:b},Zt}var sn,hi;function oo(){if(hi)return sn;hi=1;const{ArrayPrototypePop:r,Promise:e}=Te(),{isIterable:t,isNodeStream:n,isWebStream:o}=nt(),{pipelineImpl:s}=Rn(),{finished:u}=lt();so();function w(...O){return new e((R,D)=>{let F,S;const B=O[O.length-1];if(B&&typeof B=="object"&&!n(B)&&!t(B)&&!o(B)){const q=r(O);F=q.signal,S=q.end}s(O,(q,N)=>{q?D(q):R(N)},{signal:F,end:S})})}return sn={finished:u,pipeline:w},sn}var gi;function so(){if(gi)return jr.exports;gi=1;const{Buffer:r}=wt(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Te(),{promisify:{custom:o}}=je(),{streamReturningOperators:s,promiseReturningOperators:u}=ls(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:w}}=xe(),O=io(),{setDefaultHighWaterMark:R,getDefaultHighWaterMark:D}=gr(),{pipeline:F}=Rn(),{destroyer:S}=St(),B=lt(),q=oo(),N=nt(),A=jr.exports=vn().Stream;A.isDestroyed=N.isDestroyed,A.isDisturbed=N.isDisturbed,A.isErrored=N.isErrored,A.isReadable=N.isReadable,A.isWritable=N.isWritable,A.Readable=pr();for(const c of t(s)){let Y=function(...K){if(new.target)throw w();return A.Readable.from(n(v,this,K))};const v=s[c];e(Y,"name",{__proto__:null,value:v.name}),e(Y,"length",{__proto__:null,value:v.length}),e(A.Readable.prototype,c,{__proto__:null,value:Y,enumerable:!1,configurable:!0,writable:!0})}for(const c of t(u)){let Y=function(...K){if(new.target)throw w();return n(v,this,K)};const v=u[c];e(Y,"name",{__proto__:null,value:v.name}),e(Y,"length",{__proto__:null,value:v.length}),e(A.Readable.prototype,c,{__proto__:null,value:Y,enumerable:!1,configurable:!0,writable:!0})}A.Writable=An(),A.Duplex=rt(),A.Transform=ro(),A.PassThrough=no(),A.pipeline=F;const{addAbortSignal:f}=hr();return A.addAbortSignal=f,A.finished=B,A.destroy=S,A.compose=O,A.setDefaultHighWaterMark=R,A.getDefaultHighWaterMark=D,e(A,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return q}}),e(F,o,{__proto__:null,enumerable:!0,get(){return q.pipeline}}),e(B,o,{__proto__:null,enumerable:!0,get(){return q.finished}}),A.Stream=A,A._isUint8Array=function(v){return v instanceof Uint8Array},A._uint8ArrayToBuffer=function(v){return r.from(v.buffer,v.byteOffset,v.byteLength)},jr.exports}var pi;function us(){return pi||(pi=1,function(r){const e=so(),t=oo(),n=e.Readable.destroy;r.exports=e.Readable,r.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,r.exports._isUint8Array=e._isUint8Array,r.exports.isDisturbed=e.isDisturbed,r.exports.isErrored=e.isErrored,r.exports.isReadable=e.isReadable,r.exports.Readable=e.Readable,r.exports.Writable=e.Writable,r.exports.Duplex=e.Duplex,r.exports.Transform=e.Transform,r.exports.PassThrough=e.PassThrough,r.exports.addAbortSignal=e.addAbortSignal,r.exports.finished=e.finished,r.exports.destroy=e.destroy,r.exports.destroy=n,r.exports.pipeline=e.pipeline,r.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),r.exports.Stream=e.Stream,r.exports.default=r.exports}(kr)),kr.exports}var wr=us(),an,wi;function ao(){if(wi)return an;wi=1,an=s,s.default=s,s.stable=R,s.stableStringify=R;var r="[...]",e="[Circular]",t=[],n=[];function o(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(S,B,q,N){typeof N>"u"&&(N=o()),w(S,"",0,[],void 0,0,N);var A;try{n.length===0?A=JSON.stringify(S,B,q):A=JSON.stringify(S,F(B),q)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var f=t.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return A}function u(S,B,q,N){var A=Object.getOwnPropertyDescriptor(N,q);A.get!==void 0?A.configurable?(Object.defineProperty(N,q,{value:S}),t.push([N,q,B,A])):n.push([B,q,S]):(N[q]=S,t.push([N,q,B]))}function w(S,B,q,N,A,f,c){f+=1;var v;if(typeof S=="object"&&S!==null){for(v=0;v<N.length;v++)if(N[v]===S){u(e,S,B,A);return}if(typeof c.depthLimit<"u"&&f>c.depthLimit){u(r,S,B,A);return}if(typeof c.edgesLimit<"u"&&q+1>c.edgesLimit){u(r,S,B,A);return}if(N.push(S),Array.isArray(S))for(v=0;v<S.length;v++)w(S[v],v,v,N,S,f,c);else{var Y=Object.keys(S);for(v=0;v<Y.length;v++){var K=Y[v];w(S[K],K,v,N,S,f,c)}}N.pop()}}function O(S,B){return S<B?-1:S>B?1:0}function R(S,B,q,N){typeof N>"u"&&(N=o());var A=D(S,"",0,[],void 0,0,N)||S,f;try{n.length===0?f=JSON.stringify(A,B,q):f=JSON.stringify(A,F(B),q)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var c=t.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return f}function D(S,B,q,N,A,f,c){f+=1;var v;if(typeof S=="object"&&S!==null){for(v=0;v<N.length;v++)if(N[v]===S){u(e,S,B,A);return}try{if(typeof S.toJSON=="function")return}catch{return}if(typeof c.depthLimit<"u"&&f>c.depthLimit){u(r,S,B,A);return}if(typeof c.edgesLimit<"u"&&q+1>c.edgesLimit){u(r,S,B,A);return}if(N.push(S),Array.isArray(S))for(v=0;v<S.length;v++)D(S[v],v,v,N,S,f,c);else{var Y={},K=Object.keys(S).sort(O);for(v=0;v<K.length;v++){var fe=K[v];D(S[fe],fe,v,N,S,f,c),Y[fe]=S[fe]}if(typeof A<"u")t.push([A,B,S]),A[B]=Y;else return Y}N.pop()}}function F(S){return S=typeof S<"u"?S:function(B,q){return q},function(B,q){if(n.length>0)for(var N=0;N<n.length;N++){var A=n[N];if(A[1]===B&&A[0]===q){q=A[2],n.splice(N,1);break}}return S.call(this,B,q)}}return an}var fs=ao();const cs=mt(fs);var tr={exports:{}},ln,_i;function ds(){if(_i)return ln;_i=1,ln=r;function r(e,t){if(e&&t)return r(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(o){n[o]=e[o]}),n;function n(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];var u=e.apply(this,o),w=o[o.length-1];return typeof u=="function"&&u!==w&&Object.keys(w).forEach(function(O){u[O]=w[O]}),u}}return ln}var bi;function Tn(){if(bi)return tr.exports;bi=1;var r=ds();tr.exports=r(e),tr.exports.strict=r(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(n){var o=function(){return o.called?o.value:(o.called=!0,o.value=n.apply(this,arguments))};return o.called=!1,o}function t(n){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=n.apply(this,arguments)},s=n.name||"Function wrapped with `once`";return o.onceError=s+" shouldn't be called more than once",o.called=!1,o}return tr.exports}var un,yi;function lo(){if(yi)return un;yi=1;var r=Tn(),e=function(){},t=function(s){return s.setHeader&&typeof s.abort=="function"},n=function(s){return s.stdio&&Array.isArray(s.stdio)&&s.stdio.length===3},o=function(s,u,w){if(typeof u=="function")return o(s,null,u);u||(u={}),w=r(w||e);var O=s._writableState,R=s._readableState,D=u.readable||u.readable!==!1&&s.readable,F=u.writable||u.writable!==!1&&s.writable,S=!1,B=function(){s.writable||q()},q=function(){F=!1,D||w.call(s)},N=function(){D=!1,F||w.call(s)},A=function(K){w.call(s,K?new Error("exited with error code: "+K):null)},f=function(K){w.call(s,K)},c=function(){process.nextTick(v)},v=function(){if(!S){if(D&&!(R&&R.ended&&!R.destroyed))return w.call(s,new Error("premature close"));if(F&&!(O&&O.ended&&!O.destroyed))return w.call(s,new Error("premature close"))}},Y=function(){s.req.on("finish",q)};return t(s)?(s.on("complete",q),s.on("abort",c),s.req?Y():s.on("request",Y)):F&&!O&&(s.on("end",B),s.on("close",B)),n(s)&&s.on("exit",A),s.on("end",N),s.on("finish",q),u.error!==!1&&s.on("error",f),s.on("close",c),function(){S=!0,s.removeListener("complete",q),s.removeListener("abort",c),s.removeListener("request",Y),s.req&&s.req.removeListener("finish",q),s.removeListener("end",B),s.removeListener("close",B),s.removeListener("finish",q),s.removeListener("exit",A),s.removeListener("end",N),s.removeListener("error",f),s.removeListener("close",c)}};return un=o,un}var hs=lo();const mi=mt(hs);var gs=Tn();const ps=mt(gs);var fn,Si;function ws(){if(Si)return fn;Si=1;var r=Tn(),e=lo(),t;try{t=ts}catch{}var n=function(){},o=/^v?\.0/.test(process.version),s=function(S){return typeof S=="function"},u=function(S){return!o||!t?!1:(S instanceof(t.ReadStream||n)||S instanceof(t.WriteStream||n))&&s(S.close)},w=function(S){return S.setHeader&&s(S.abort)},O=function(S,B,q,N){N=r(N);var A=!1;S.on("close",function(){A=!0}),e(S,{readable:B,writable:q},function(c){if(c)return N(c);A=!0,N()});var f=!1;return function(c){if(!A&&!f){if(f=!0,u(S))return S.close(n);if(w(S))return S.abort();if(s(S.destroy))return S.destroy();N(c||new Error("stream was destroyed"))}}},R=function(S){S()},D=function(S,B){return S.pipe(B)},F=function(){var S=Array.prototype.slice.call(arguments),B=s(S[S.length-1]||n)&&S.pop()||n;if(Array.isArray(S[0])&&(S=S[0]),S.length<2)throw new Error("pump requires two streams per minimum");var q,N=S.map(function(A,f){var c=f<S.length-1,v=f>0;return O(A,c,v,function(Y){q||(q=Y),Y&&N.forEach(R),!c&&(N.forEach(R),B(q))})});return S.reduce(D)};return fn=F,fn}var _s=ws();const Ei=mt(_s);function rr(){}const vi="SYN",cn="ACK",Ai="BRK";class Ri extends wr.Duplex{constructor(e){let{name:t,target:n,targetWindow:o=window,targetOrigin:s="*"}=e;if(super({objectMode:!0}),ge(this,"_init",void 0),ge(this,"_haveSyn",void 0),ge(this,"_name",void 0),ge(this,"_target",void 0),ge(this,"_targetWindow",void 0),ge(this,"_targetOrigin",void 0),ge(this,"_onMessage",void 0),ge(this,"_synIntervalId",void 0),!t||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=n,this._targetWindow=o,this._targetOrigin=s,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(Ai,null,rr),this._haveSyn=!1,this._init=!1}_handShake(){this._write(vi,null,rr),this.cork()}_onData(e){if(!this._init)e===vi?(this._haveSyn=!0,this._write(cn,null,rr)):e===cn&&(this._init=!0,this._haveSyn||this._write(cn,null,rr),this.uncork());else if(e===Ai)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;this._targetOrigin!=="*"&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,n){this._postMessage(e),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const bs={rpc:{internal:-32603}},Ti={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Ii=bs.rpc.internal,ys="Unspecified error message. This is a bug, please report it.";function uo(r){return Number.isInteger(r)}function Oi(r){return typeof r=="string"&&r.length>0}function Ni(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function fo(r){const e=r;return!(!e||!uo(e.code)||!Oi(e.message)||e.stack&&!Oi(e.stack))}function ms(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ys;if(uo(r)){const t=r.toString();if(Object.hasOwn(Ti,t))return Ti[t].message}return e}const Ss={code:Ii,message:ms(Ii)};function yn(r){try{JSON.parse(JSON.stringify(r,(e,t)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof t=="function"||typeof t=="symbol")throw new Error("Not valid json");return t}),(e,t)=>{if(!(e==="__proto__"||e==="constructor"))return t})}catch{return!1}return!0}function Ci(r){return Object.getOwnPropertyNames(r).reduce((e,t)=>{const n=r[t];return yn(n)&&(e[t]=n),e},{})}function Es(r){return Array.isArray(r)?r.map(e=>yn(e)?e:Ni(e)?Ci(e):null):Ni(r)?Ci(r):yn(r)?r:null}function vs(r,e){if(r&&typeof r=="object"&&"serialize"in r&&typeof r.serialize=="function")return r.serialize();if(fo(r))return r;const t=Es(r);return $e($e({},e),{},{data:{cause:t}})}function Pi(r){let{fallbackError:e=Ss,shouldIncludeStack:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!fo(e))throw new Error("Must provide fallback error with integer number code and string message.");const n=vs(r,e);return t||delete n.stack,n}function Li(r,e,t){try{Reflect.apply(r,e,t)}catch(n){setTimeout(()=>{throw n})}}function As(r){const e=r.length,t=new Array(e);for(let n=0;n<e;n+=1)t[n]=r[n];return t}class _r extends rs.EventEmitter{emit(e){let t=e==="error";const n=this._events;if(n!==void 0)t=t&&n.error===void 0;else if(!t)return!1;for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];if(t){let O;if(s.length>0&&([O]=s),O instanceof Error)throw O;const R=new Error(`Unhandled error.${O?` (${O.message})`:""}`);throw R.context=O,R}const w=n[e];if(w===void 0)return!1;if(typeof w=="function")Li(w,this,s);else{const O=w.length,R=As(w);for(let D=0;D<O;D+=1)Li(R[D],this,s)}return!0}}class Ct extends Error{constructor(e){let{code:t,message:n,data:o}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),ge(this,"code",void 0),ge(this,"data",void 0),this.code=t,o!==void 0&&(this.data=o)}toString(){return cs({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const mn=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,o)=>{n||o.error?e(n||o.error):!t||Array.isArray(o)?r(o):r(o.result)}};function Rs(){const r={};function e(){return!1}const t=new _r;function n(O){const R=r[O.id];if(!R)throw new Error(`StreamMiddleware - Unknown response id "${O.id}"`);delete r[O.id],Object.assign(R.res,O),setTimeout(R.end)}function o(O){t.emit("notification",O)}function s(O,R,D){let F;try{!O.id?o(O):n(O)}catch(S){F=S}D(F)}const u=new wr.Duplex({objectMode:!0,read:e,write:s});return{events:t,middleware:(O,R,D,F)=>{u.push(O),r[O.id]={req:O,res:R,next:D,end:F}},stream:u}}function Ts(){return(r,e,t,n)=>{const o=r.id,s=Math.random().toString(36).slice(2);r.id=s,e.id=s,t(u=>{r.id=o,e.id=o,u()})}}class et extends _r{constructor(){super(),ge(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,n){const o=[];let s=null,u=!1;for(const w of n)if([s,u]=await et._runMiddleware(e,t,w,o),u)break;return[s,u,o.reverse()]}static _runMiddleware(e,t,n,o){return new Promise(s=>{const u=O=>{const R=O||t.error;R&&(typeof R=="object"&&Object.keys(R).includes("stack")===!1&&(R.stack="Stack trace is not available."),t.error=Pi(R,{shouldIncludeStack:!0,fallbackError:{message:(R==null?void 0:R.message)||(R==null?void 0:R.toString()),code:(R==null?void 0:R.code)||-32603,stack:(R==null?void 0:R.stack)||"Stack trace is not available.",data:(R==null?void 0:R.data)||(R==null?void 0:R.message)||(R==null?void 0:R.toString())}})),s([R,!0])},w=O=>{t.error?u(t.error):(O&&(typeof O!="function"&&u(new Ct({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),o.push(O)),s([null,!1]))};try{n(e,t,w,u)}catch(O){u(O)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((n,o)=>{t(s=>s?o(s):n())})}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new Ct({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Ct({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,o)=>{try{const[s,u,w]=await et._runAllMiddleware(e,t,this._middleware);return u?(await et._runReturnHandlers(w),o(s)):n(async O=>{try{await et._runReturnHandlers(w)}catch(R){return O(R)}return O()})}catch(s){return o(s)}}}async _handleBatch(e,t){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(e){return new Promise((t,n)=>{this._handle(e,(o,s)=>{o&&s===void 0?n(o):t(s)}).catch(n)})}async _handle(e,t){if(!e||Array.isArray(e)||typeof e!="object"){const B=new Ct({code:-32603,message:"request must be plain object"});return t(B,{id:void 0,jsonrpc:"2.0",error:B})}if(typeof e.method!="string"){const B=new Ct({code:-32603,message:"method must be string"});return t(B,{id:e.id,jsonrpc:"2.0",error:B})}const n=$e({},e),o={id:n.id,jsonrpc:n.jsonrpc};let s=null;try{await this._processRequest(n,o)}catch(B){s=B}if(s&&(delete o.result,!o.error)){var u,w,O,R,D,F,S;typeof s=="object"&&Object.keys(s).includes("stack")===!1&&(s.stack="Stack trace is not available."),o.error=Pi(s,{shouldIncludeStack:!0,fallbackError:{message:((u=s)===null||u===void 0?void 0:u.message)||((w=s)===null||w===void 0?void 0:w.toString()),code:((O=s)===null||O===void 0?void 0:O.code)||-32603,stack:((R=s)===null||R===void 0?void 0:R.stack)||"Stack trace is not available.",data:((D=s)===null||D===void 0?void 0:D.data)||((F=s)===null||F===void 0?void 0:F.message)||((S=s)===null||S===void 0?void 0:S.toString())}})}return t(s,o)}async _processRequest(e,t){const[n,o,s]=await et._runAllMiddleware(e,t,this._middleware);if(et._checkForCompletion(e,t,o),await et._runReturnHandlers(s),n)throw n}}class Is extends wr.Duplex{constructor(e){let{parent:t,name:n}=e;super({objectMode:!0}),ge(this,"_parent",void 0),ge(this,"_name",void 0),this._parent=t,this._name=n}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}const xi=Symbol("IGNORE_SUBSTREAM");class Os extends wr.Duplex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super($e($e({},e),{},{objectMode:!0})),ge(this,"_substreams",void 0),ge(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new Is({parent:this,name:e});return this._substreams[e]=t,Ns(this,n=>t.destroy(n||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=xi}_read(){}_write(e,t,n){const{name:o,data:s}=e;if(!o)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();const u=this._substreams[o];return u?(u!==xi&&u.push(s),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),n())}}function Ns(r,e){const t=ps(e);mi(r,{readable:!1},t),mi(r,{writable:!1},t)}var Lt={exports:{}};Lt.exports;var Mi;function Cs(){return Mi||(Mi=1,function(r,e){var t=200,n="__lodash_hash_undefined__",o=800,s=16,u=9007199254740991,w="[object Arguments]",O="[object Array]",R="[object AsyncFunction]",D="[object Boolean]",F="[object Date]",S="[object Error]",B="[object Function]",q="[object GeneratorFunction]",N="[object Map]",A="[object Number]",f="[object Null]",c="[object Object]",v="[object Proxy]",Y="[object RegExp]",K="[object Set]",fe="[object String]",he="[object Undefined]",i="[object WeakMap]",g="[object ArrayBuffer]",a="[object DataView]",d="[object Float32Array]",h="[object Float64Array]",l="[object Int8Array]",I="[object Int16Array]",m="[object Int32Array]",T="[object Uint8Array]",M="[object Uint8ClampedArray]",b="[object Uint16Array]",k="[object Uint32Array]",_=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,j={};j[d]=j[h]=j[l]=j[I]=j[m]=j[T]=j[M]=j[b]=j[k]=!0,j[w]=j[O]=j[g]=j[D]=j[a]=j[F]=j[S]=j[B]=j[N]=j[A]=j[c]=j[Y]=j[K]=j[fe]=j[i]=!1;var ie=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt,Z=typeof self=="object"&&self&&self.Object===Object&&self,se=ie||Z||Function("return this")(),ae=e&&!e.nodeType&&e,H=ae&&!0&&r&&!r.nodeType&&r,G=H&&H.exports===ae,oe=G&&ie.process,le=function(){try{var y=H&&H.require&&H.require("util").types;return y||oe&&oe.binding&&oe.binding("util")}catch{}}(),de=le&&le.isTypedArray;function C(y,x,$){switch($.length){case 0:return y.call(x);case 1:return y.call(x,$[0]);case 2:return y.call(x,$[0],$[1]);case 3:return y.call(x,$[0],$[1],$[2])}return y.apply(x,$)}function L(y,x){for(var $=-1,ce=Array(y);++$<y;)ce[$]=x($);return ce}function U(y){return function(x){return y(x)}}function re(y,x){return y==null?void 0:y[x]}function te(y,x){return function($){return y(x($))}}var ee=Array.prototype,P=Function.prototype,V=Object.prototype,Q=se["__core-js_shared__"],z=P.toString,we=V.hasOwnProperty,Ne=function(){var y=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),be=V.toString,Le=z.call(Object),Ie=RegExp("^"+z.call(we).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=G?se.Buffer:void 0,He=se.Symbol,ut=se.Uint8Array;Ce&&Ce.allocUnsafe;var Pe=te(Object.getPrototypeOf,Object),Ft=Object.create,Sr=V.propertyIsEnumerable,Bt=ee.splice,Ye=He?He.toStringTag:void 0,bt=function(){try{var y=Ir(Object,"defineProperty");return y({},"",{}),y}catch{}}(),Er=Ce?Ce.isBuffer:void 0,Et=Math.max,Ut=Date.now,qt=Ir(se,"Map"),it=Ir(Object,"create"),vt=function(){function y(){}return function(x){if(!ct(x))return{};if(Ft)return Ft(x);y.prototype=x;var $=new y;return y.prototype=void 0,$}}();function Xe(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var ce=y[x];this.set(ce[0],ce[1])}}function vr(){this.__data__=it?it(null):{},this.size=0}function At(y){var x=this.has(y)&&delete this.__data__[y];return this.size-=x?1:0,x}function $t(y){var x=this.__data__;if(it){var $=x[y];return $===n?void 0:$}return we.call(x,y)?x[y]:void 0}function p(y){var x=this.__data__;return it?x[y]!==void 0:we.call(x,y)}function E(y,x){var $=this.__data__;return this.size+=this.has(y)?0:1,$[y]=it&&x===void 0?n:x,this}Xe.prototype.clear=vr,Xe.prototype.delete=At,Xe.prototype.get=$t,Xe.prototype.has=p,Xe.prototype.set=E;function X(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var ce=y[x];this.set(ce[0],ce[1])}}function ne(){this.__data__=[],this.size=0}function ue(y){var x=this.__data__,$=Vt(x,y);if($<0)return!1;var ce=x.length-1;return $==ce?x.pop():Bt.call(x,$,1),--this.size,!0}function Oe(y){var x=this.__data__,$=Vt(x,y);return $<0?void 0:x[$][1]}function Me(y){return Vt(this.__data__,y)>-1}function Ht(y,x){var $=this.__data__,ce=Vt($,y);return ce<0?(++this.size,$.push([y,x])):$[ce][1]=x,this}X.prototype.clear=ne,X.prototype.delete=ue,X.prototype.get=Oe,X.prototype.has=Me,X.prototype.set=Ht;function De(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var ce=y[x];this.set(ce[0],ce[1])}}function zt(){this.size=0,this.__data__={hash:new Xe,map:new(qt||X),string:new Xe}}function Ar(y){var x=Yt(this,y).delete(y);return this.size-=x?1:0,x}function Gt(y){return Yt(this,y).get(y)}function Kt(y){return Yt(this,y).has(y)}function Rt(y,x){var $=Yt(this,y),ce=$.size;return $.set(y,x),this.size+=$.size==ce?0:1,this}De.prototype.clear=zt,De.prototype.delete=Ar,De.prototype.get=Gt,De.prototype.has=Kt,De.prototype.set=Rt;function Ve(y){var x=this.__data__=new X(y);this.size=x.size}function Tt(){this.__data__=new X,this.size=0}function ft(y){var x=this.__data__,$=x.delete(y);return this.size=x.size,$}function Qe(y){return this.__data__.get(y)}function ze(y){return this.__data__.has(y)}function mo(y,x){var $=this.__data__;if($ instanceof X){var ce=$.__data__;if(!qt||ce.length<t-1)return ce.push([y,x]),this.size=++$.size,this;$=this.__data__=new De(ce)}return $.set(y,x),this.size=$.size,this}Ve.prototype.clear=Tt,Ve.prototype.delete=ft,Ve.prototype.get=Qe,Ve.prototype.has=ze,Ve.prototype.set=mo;function So(y,x){var $=Cr(y),ce=!$&&Nr(y),_e=!$&&!ce&&Mn(y),me=!$&&!ce&&!_e&&kn(y),ve=$||ce||_e||me,ye=ve?L(y.length,String):[],Ae=ye.length;for(var Ge in y)ve&&(Ge=="length"||_e&&(Ge=="offset"||Ge=="parent")||me&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||Ln(Ge,Ae))||ye.push(Ge);return ye}function Rr(y,x,$){($!==void 0&&!Xt(y[x],$)||$===void 0&&!(x in y))&&Tr(y,x,$)}function Eo(y,x,$){var ce=y[x];(!(we.call(y,x)&&Xt(ce,$))||$===void 0&&!(x in y))&&Tr(y,x,$)}function Vt(y,x){for(var $=y.length;$--;)if(Xt(y[$][0],x))return $;return-1}function Tr(y,x,$){x=="__proto__"&&bt?bt(y,x,{configurable:!0,enumerable:!0,value:$,writable:!0}):y[x]=$}var vo=ko();function Jt(y){return y==null?y===void 0?he:f:Ye&&Ye in Object(y)?jo(y):$o(y)}function Cn(y){return It(y)&&Jt(y)==w}function Ao(y){if(!ct(y)||Uo(y))return!1;var x=Lr(y)?Ie:W;return x.test(Ko(y))}function Ro(y){return It(y)&&Dn(y.length)&&!!j[Jt(y)]}function To(y){if(!ct(y))return qo(y);var x=xn(y),$=[];for(var ce in y)ce=="constructor"&&(x||!we.call(y,ce))||$.push(ce);return $}function Pn(y,x,$,ce,_e){y!==x&&vo(x,function(me,ve){if(_e||(_e=new Ve),ct(me))Io(y,x,ve,$,Pn,ce,_e);else{var ye=ce?ce(Or(y,ve),me,ve+"",y,x,_e):void 0;ye===void 0&&(ye=me),Rr(y,ve,ye)}},jn)}function Io(y,x,$,ce,_e,me,ve){var ye=Or(y,$),Ae=Or(x,$),Ge=ve.get(Ae);if(Ge){Rr(y,$,Ge);return}var We=me?me(ye,Ae,$+"",y,x,ve):void 0,Ot=We===void 0;if(Ot){var xr=Cr(Ae),Mr=!xr&&Mn(Ae),Fn=!xr&&!Mr&&kn(Ae);We=Ae,xr||Mr||Fn?Cr(ye)?We=ye:Vo(ye)?We=xo(ye):Mr?(Ot=!1,We=Co(Ae)):Fn?(Ot=!1,We=Lo(Ae)):We=[]:Jo(Ae)||Nr(Ae)?(We=ye,Nr(ye)?We=Yo(ye):(!ct(ye)||Lr(ye))&&(We=Wo(Ae))):Ot=!1}Ot&&(ve.set(Ae,We),_e(We,Ae,ce,me,ve),ve.delete(Ae)),Rr(y,$,We)}function Oo(y,x){return zo(Ho(y,x,Wn),y+"")}var No=bt?function(y,x){return bt(y,"toString",{configurable:!0,enumerable:!1,value:Qo(x),writable:!0})}:Wn;function Co(y,x){return y.slice()}function Po(y){var x=new y.constructor(y.byteLength);return new ut(x).set(new ut(y)),x}function Lo(y,x){var $=Po(y.buffer);return new y.constructor($,y.byteOffset,y.length)}function xo(y,x){var $=-1,ce=y.length;for(x||(x=Array(ce));++$<ce;)x[$]=y[$];return x}function Mo(y,x,$,ce){var _e=!$;$||($={});for(var me=-1,ve=x.length;++me<ve;){var ye=x[me],Ae=void 0;Ae===void 0&&(Ae=y[ye]),_e?Tr($,ye,Ae):Eo($,ye,Ae)}return $}function Do(y){return Oo(function(x,$){var ce=-1,_e=$.length,me=_e>1?$[_e-1]:void 0,ve=_e>2?$[2]:void 0;for(me=y.length>3&&typeof me=="function"?(_e--,me):void 0,ve&&Fo($[0],$[1],ve)&&(me=_e<3?void 0:me,_e=1),x=Object(x);++ce<_e;){var ye=$[ce];ye&&y(x,ye,ce,me)}return x})}function ko(y){return function(x,$,ce){for(var _e=-1,me=Object(x),ve=ce(x),ye=ve.length;ye--;){var Ae=ve[++_e];if($(me[Ae],Ae,me)===!1)break}return x}}function Yt(y,x){var $=y.__data__;return Bo(x)?$[typeof x=="string"?"string":"hash"]:$.map}function Ir(y,x){var $=re(y,x);return Ao($)?$:void 0}function jo(y){var x=we.call(y,Ye),$=y[Ye];try{y[Ye]=void 0;var ce=!0}catch{}var _e=be.call(y);return ce&&(x?y[Ye]=$:delete y[Ye]),_e}function Wo(y){return typeof y.constructor=="function"&&!xn(y)?vt(Pe(y)):{}}function Ln(y,x){var $=typeof y;return x=x??u,!!x&&($=="number"||$!="symbol"&&J.test(y))&&y>-1&&y%1==0&&y<x}function Fo(y,x,$){if(!ct($))return!1;var ce=typeof x;return(ce=="number"?Pr($)&&Ln(x,$.length):ce=="string"&&x in $)?Xt($[x],y):!1}function Bo(y){var x=typeof y;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?y!=="__proto__":y===null}function Uo(y){return!!Ne&&Ne in y}function xn(y){var x=y&&y.constructor,$=typeof x=="function"&&x.prototype||V;return y===$}function qo(y){var x=[];if(y!=null)for(var $ in Object(y))x.push($);return x}function $o(y){return be.call(y)}function Ho(y,x,$){return x=Et(x===void 0?y.length-1:x,0),function(){for(var ce=arguments,_e=-1,me=Et(ce.length-x,0),ve=Array(me);++_e<me;)ve[_e]=ce[x+_e];_e=-1;for(var ye=Array(x+1);++_e<x;)ye[_e]=ce[_e];return ye[x]=$(ve),C(y,this,ye)}}function Or(y,x){if(!(x==="constructor"&&typeof y[x]=="function")&&x!="__proto__")return y[x]}var zo=Go(No);function Go(y){var x=0,$=0;return function(){var ce=Ut(),_e=s-(ce-$);if($=ce,_e>0){if(++x>=o)return arguments[0]}else x=0;return y.apply(void 0,arguments)}}function Ko(y){if(y!=null){try{return z.call(y)}catch{}try{return y+""}catch{}}return""}function Xt(y,x){return y===x||y!==y&&x!==x}var Nr=Cn(function(){return arguments}())?Cn:function(y){return It(y)&&we.call(y,"callee")&&!Sr.call(y,"callee")},Cr=Array.isArray;function Pr(y){return y!=null&&Dn(y.length)&&!Lr(y)}function Vo(y){return It(y)&&Pr(y)}var Mn=Er||Zo;function Lr(y){if(!ct(y))return!1;var x=Jt(y);return x==B||x==q||x==R||x==v}function Dn(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=u}function ct(y){var x=typeof y;return y!=null&&(x=="object"||x=="function")}function It(y){return y!=null&&typeof y=="object"}function Jo(y){if(!It(y)||Jt(y)!=c)return!1;var x=Pe(y);if(x===null)return!0;var $=we.call(x,"constructor")&&x.constructor;return typeof $=="function"&&$ instanceof $&&z.call($)==Le}var kn=de?U(de):Ro;function Yo(y){return Mo(y,jn(y))}function jn(y){return Pr(y)?So(y):To(y)}var Xo=Do(function(y,x,$){Pn(y,x,$)});function Qo(y){return function(){return y}}function Wn(y){return y}function Zo(){return!1}r.exports=Xo}(Lt,Lt.exports)),Lt.exports}Cs();var fr={exports:{}},Ps=fr.exports,Di;function Ls(){return Di||(Di=1,function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(Ps,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],s={},u=null;function w(N,A){var f=N[A];if(typeof f.bind=="function")return f.bind(N);try{return Function.prototype.bind.call(f,N)}catch{return function(){return Function.prototype.apply.apply(f,[N,arguments])}}}function O(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function R(N){return N==="debug"&&(N="log"),typeof console===t?!1:N==="trace"&&n?O:console[N]!==void 0?w(console,N):console.log!==void 0?w(console,"log"):e}function D(){for(var N=this.getLevel(),A=0;A<o.length;A++){var f=o[A];this[f]=A<N?e:this.methodFactory(f,N,this.name)}if(this.log=this.debug,typeof console===t&&N<this.levels.SILENT)return"No console available for logging"}function F(N){return function(){typeof console!==t&&(D.call(this),this[N].apply(this,arguments))}}function S(N,A,f){return R(N)||F.apply(this,arguments)}function B(N,A){var f=this,c,v,Y,K="loglevel";typeof N=="string"?K+=":"+N:typeof N=="symbol"&&(K=void 0);function fe(d){var h=(o[d]||"silent").toUpperCase();if(!(typeof window===t||!K)){try{window.localStorage[K]=h;return}catch{}try{window.document.cookie=encodeURIComponent(K)+"="+h+";"}catch{}}}function he(){var d;if(!(typeof window===t||!K)){try{d=window.localStorage[K]}catch{}if(typeof d===t)try{var h=window.document.cookie,l=encodeURIComponent(K),I=h.indexOf(l+"=");I!==-1&&(d=/^([^;]+)/.exec(h.slice(I+l.length+1))[1])}catch{}return f.levels[d]===void 0&&(d=void 0),d}}function i(){if(!(typeof window===t||!K)){try{window.localStorage.removeItem(K)}catch{}try{window.document.cookie=encodeURIComponent(K)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function g(d){var h=d;if(typeof h=="string"&&f.levels[h.toUpperCase()]!==void 0&&(h=f.levels[h.toUpperCase()]),typeof h=="number"&&h>=0&&h<=f.levels.SILENT)return h;throw new TypeError("log.setLevel() called with invalid level: "+d)}f.name=N,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=A||S,f.getLevel=function(){return Y??v??c},f.setLevel=function(d,h){return Y=g(d),h!==!1&&fe(Y),D.call(f)},f.setDefaultLevel=function(d){v=g(d),he()||f.setLevel(d,!1)},f.resetLevel=function(){Y=null,i(),D.call(f)},f.enableAll=function(d){f.setLevel(f.levels.TRACE,d)},f.disableAll=function(d){f.setLevel(f.levels.SILENT,d)},f.rebuild=function(){if(u!==f&&(c=g(u.getLevel())),D.call(f),u===f)for(var d in s)s[d].rebuild()},c=g(u?u.getLevel():"WARN");var a=he();a!=null&&(Y=g(a)),D.call(f)}u=new B,u.getLogger=function(A){if(typeof A!="symbol"&&typeof A!="string"||A==="")throw new TypeError("You must supply a name when creating a logger.");var f=s[A];return f||(f=s[A]=new B(A,u.methodFactory)),f};var q=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=q),u},u.getLoggers=function(){return s},u.default=u,u})}(fr)),fr.exports}var co=Ls();const cr=mt(co),xs=cr.getLogger("http-helpers");xs.setLevel(co.levels.INFO);function Ms(r){let e=r;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const Sn={},En={};for(let r=0;r<16;r++){const e=r,t=r*16,n=r.toString(16).toLowerCase();En[n]=e,En[n.toUpperCase()]=e,Sn[n]=t,Sn[n.toUpperCase()]=t}function Ds(r){const e=r.length,t=new Uint8Array(e/2);for(let n=0;n<e;n+=2)t[n/2]=Sn[r[n]]+En[r[n+1]];return t}Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));for(let r=0;r<=256*256-1;r++)BigInt(r);const br=r=>{if(typeof r!="string")throw new Error(`hex argument type ${typeof r} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(r))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${r}`);const e=r.slice(2);return Ds(e.length%2===0?e:Ms(e))},ks=r=>{if(!Number.isSafeInteger(r)||r<0)throw new Error(`Received an invalid integer type: ${r}`);return`0x${r.toString(16)}`},Wt=r=>{const e=ks(r);return br(e)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");Zi.CURVE.n;Zi.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const js="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";br(js);const Ws="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";br(Ws);const Fs="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";br(Fs);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));var ki;(function(r){r.String="string",r.Bytes="view",r.Number="number"})(ki||(ki={}));var ji;(function(r){r.String="string",r.Bytes="view",r.JSON="json"})(ji||(ji={}));var Wi;(function(r){r[r.Number=0]="Number",r[r.BigInt=1]="BigInt",r[r.Uint8Array=2]="Uint8Array",r[r.PrefixedHexString=3]="PrefixedHexString"})(Wi||(Wi={}));var Fi;(function(r){r[r.Deposit=0]="Deposit",r[r.Withdrawal=1]="Withdrawal",r[r.Consolidation=2]="Consolidation"})(Fi||(Fi={}));var pt;(function(r){r[r.Version=0]="Version",r[r.Balance=1]="Balance",r[r.Nonce=2]="Nonce",r[r.CodeHash=3]="CodeHash",r[r.CodeSize=4]="CodeSize"})(pt||(pt={}));Wt(pt.Version);Wt(pt.Balance);Wt(pt.Nonce);Wt(pt.CodeHash);Wt(pt.CodeSize);BigInt(256)**BigInt(31);var dn={exports:{}},nr={},ir={},Bi;function Bs(){if(Bi)return ir;Bi=1,Object.defineProperty(ir,"__esModule",{value:!0});function r(e){var t=4,n=e.length,o=n%t;if(!o)return e;var s=n,u=t-o,w=n+u,O=Buffer.alloc(w);for(O.write(e);u--;)O.write("=",s++);return O.toString()}return ir.default=r,ir}var Ui;function Us(){if(Ui)return nr;Ui=1,Object.defineProperty(nr,"__esModule",{value:!0});var r=Bs();function e(w,O){return O===void 0&&(O="utf8"),Buffer.isBuffer(w)?o(w.toString("base64")):o(Buffer.from(w,O).toString("base64"))}function t(w,O){return O===void 0&&(O="utf8"),Buffer.from(n(w),"base64").toString(O)}function n(w){return w=w.toString(),r.default(w).replace(/\-/g,"+").replace(/_/g,"/")}function o(w){return w.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(w){return Buffer.from(n(w),"base64")}var u=e;return u.encode=e,u.decode=t,u.toBase64=n,u.fromBase64=o,u.toBuffer=s,nr.default=u,nr}var qi;function qs(){return qi||(qi=1,function(r){r.exports=Us().default,r.exports.default=r.exports}(dn)),dn.exports}qs();const Ee={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},st={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};Ee.MAINNET+"",Ee.TESTNET+"",Ee.CYAN+"",Ee.AQUA+"",Ee.CELESTE+"";Ee.AQUA+"",st.SAPPHIRE_MAINNET,Ee.CELESTE+"",st.SAPPHIRE_MAINNET,Ee.CYAN+"",st.SAPPHIRE_MAINNET,Ee.MAINNET+"",st.SAPPHIRE_MAINNET,Ee.TESTNET+"",st.SAPPHIRE_DEVNET;Ee.MAINNET+"",Ee.TESTNET+"",Ee.CYAN+"",Ee.AQUA+"",Ee.CELESTE+"";st.SAPPHIRE_MAINNET+"",st.SAPPHIRE_DEVNET+"",Ee.MAINNET+"",Ee.TESTNET+"",Ee.CYAN+"",Ee.AQUA+"",Ee.CELESTE+"";Ee.MAINNET+"",Ee.TESTNET+"",Ee.CYAN+"",Ee.AQUA+"",Ee.CELESTE+"";function $i(r){let e=!1,t=0,n;try{n=window[r],e=!0,t=n.length;const o="__storage_test__";return n.setItem(o,o),n.removeItem(o),!0}catch(o){const s=o;return s&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&t!==0}}class $s{constructor(){ge(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class Hs{constructor(e,t){ge(this,"storage",void 0),ge(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(e)){let n;t==="local"&&$i("localStorage")?n=window.localStorage:t==="session"&&$i("sessionStorage")?n=window.sessionStorage:n=new $s,this.instanceMap.set(e,new this(e,n))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(n))}}ge(Hs,"instanceMap",new Map);$e($e({},st),Ee);var zs=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,hn=Math.ceil,Ue=Math.floor,ke="[BigNumber Error] ",Hi=ke+"Number primitive has more than 15 significant digits: ",Ke=1e14,pe=14,zi=9007199254740991,gn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ot=1e7,Fe=1e9;function ho(r){var e,t,n,o=c.prototype={constructor:c,toString:null,valueOf:null},s=new c(1),u=20,w=4,O=-7,R=21,D=-1e7,F=1e7,S=!1,B=1,q=0,N={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",f=!0;function c(i,g){var a,d,h,l,I,m,T,M,b=this;if(!(b instanceof c))return new c(i,g);if(g==null){if(i&&i._isBigNumber===!0){b.s=i.s,!i.c||i.e>F?b.c=b.e=null:i.e<D?b.c=[b.e=0]:(b.e=i.e,b.c=i.c.slice());return}if((m=typeof i=="number")&&i*0==0){if(b.s=1/i<0?(i=-i,-1):1,i===~~i){for(l=0,I=i;I>=10;I/=10,l++);l>F?b.c=b.e=null:(b.e=l,b.c=[i]);return}M=String(i)}else{if(!zs.test(M=String(i)))return n(b,M,m);b.s=M.charCodeAt(0)==45?(M=M.slice(1),-1):1}(l=M.indexOf("."))>-1&&(M=M.replace(".","")),(I=M.search(/e/i))>0?(l<0&&(l=I),l+=+M.slice(I+1),M=M.substring(0,I)):l<0&&(l=M.length)}else{if(Re(g,2,A.length,"Base"),g==10&&f)return b=new c(i),fe(b,u+b.e+1,w);if(M=String(i),m=typeof i=="number"){if(i*0!=0)return n(b,M,m,g);if(b.s=1/i<0?(M=M.slice(1),-1):1,c.DEBUG&&M.replace(/^0\.0*|\./,"").length>15)throw Error(Hi+i)}else b.s=M.charCodeAt(0)===45?(M=M.slice(1),-1):1;for(a=A.slice(0,g),l=I=0,T=M.length;I<T;I++)if(a.indexOf(d=M.charAt(I))<0){if(d=="."){if(I>l){l=T;continue}}else if(!h&&(M==M.toUpperCase()&&(M=M.toLowerCase())||M==M.toLowerCase()&&(M=M.toUpperCase()))){h=!0,I=-1,l=0;continue}return n(b,String(i),m,g)}m=!1,M=t(M,g,10,b.s),(l=M.indexOf("."))>-1?M=M.replace(".",""):l=M.length}for(I=0;M.charCodeAt(I)===48;I++);for(T=M.length;M.charCodeAt(--T)===48;);if(M=M.slice(I,++T)){if(T-=I,m&&c.DEBUG&&T>15&&(i>zi||i!==Ue(i)))throw Error(Hi+b.s*i);if((l=l-I-1)>F)b.c=b.e=null;else if(l<D)b.c=[b.e=0];else{if(b.e=l,b.c=[],I=(l+1)%pe,l<0&&(I+=pe),I<T){for(I&&b.c.push(+M.slice(0,I)),T-=pe;I<T;)b.c.push(+M.slice(I,I+=pe));I=pe-(M=M.slice(I)).length}else I-=T;for(;I--;M+="0");b.c.push(+M)}}else b.c=[b.e=0]}c.clone=ho,c.ROUND_UP=0,c.ROUND_DOWN=1,c.ROUND_CEIL=2,c.ROUND_FLOOR=3,c.ROUND_HALF_UP=4,c.ROUND_HALF_DOWN=5,c.ROUND_HALF_EVEN=6,c.ROUND_HALF_CEIL=7,c.ROUND_HALF_FLOOR=8,c.EUCLID=9,c.config=c.set=function(i){var g,a;if(i!=null)if(typeof i=="object"){if(i.hasOwnProperty(g="DECIMAL_PLACES")&&(a=i[g],Re(a,0,Fe,g),u=a),i.hasOwnProperty(g="ROUNDING_MODE")&&(a=i[g],Re(a,0,8,g),w=a),i.hasOwnProperty(g="EXPONENTIAL_AT")&&(a=i[g],a&&a.pop?(Re(a[0],-1e9,0,g),Re(a[1],0,Fe,g),O=a[0],R=a[1]):(Re(a,-1e9,Fe,g),O=-(R=a<0?-a:a))),i.hasOwnProperty(g="RANGE"))if(a=i[g],a&&a.pop)Re(a[0],-1e9,-1,g),Re(a[1],1,Fe,g),D=a[0],F=a[1];else if(Re(a,-1e9,Fe,g),a)D=-(F=a<0?-a:a);else throw Error(ke+g+" cannot be zero: "+a);if(i.hasOwnProperty(g="CRYPTO"))if(a=i[g],a===!!a)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=a;else throw S=!a,Error(ke+"crypto unavailable");else S=a;else throw Error(ke+g+" not true or false: "+a);if(i.hasOwnProperty(g="MODULO_MODE")&&(a=i[g],Re(a,0,9,g),B=a),i.hasOwnProperty(g="POW_PRECISION")&&(a=i[g],Re(a,0,Fe,g),q=a),i.hasOwnProperty(g="FORMAT"))if(a=i[g],typeof a=="object")N=a;else throw Error(ke+g+" not an object: "+a);if(i.hasOwnProperty(g="ALPHABET"))if(a=i[g],typeof a=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(a))f=a.slice(0,10)=="0123456789",A=a;else throw Error(ke+g+" invalid: "+a)}else throw Error(ke+"Object expected: "+i);return{DECIMAL_PLACES:u,ROUNDING_MODE:w,EXPONENTIAL_AT:[O,R],RANGE:[D,F],CRYPTO:S,MODULO_MODE:B,POW_PRECISION:q,FORMAT:N,ALPHABET:A}},c.isBigNumber=function(i){if(!i||i._isBigNumber!==!0)return!1;if(!c.DEBUG)return!0;var g,a,d=i.c,h=i.e,l=i.s;e:if({}.toString.call(d)=="[object Array]"){if((l===1||l===-1)&&h>=-1e9&&h<=Fe&&h===Ue(h)){if(d[0]===0){if(h===0&&d.length===1)return!0;break e}if(g=(h+1)%pe,g<1&&(g+=pe),String(d[0]).length==g){for(g=0;g<d.length;g++)if(a=d[g],a<0||a>=Ke||a!==Ue(a))break e;if(a!==0)return!0}}}else if(d===null&&h===null&&(l===null||l===1||l===-1))return!0;throw Error(ke+"Invalid BigNumber: "+i)},c.maximum=c.max=function(){return Y(arguments,-1)},c.minimum=c.min=function(){return Y(arguments,1)},c.random=function(){var i=9007199254740992,g=Math.random()*i&2097151?function(){return Ue(Math.random()*i)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(a){var d,h,l,I,m,T=0,M=[],b=new c(s);if(a==null?a=u:Re(a,0,Fe),I=hn(a/pe),S)if(crypto.getRandomValues){for(d=crypto.getRandomValues(new Uint32Array(I*=2));T<I;)m=d[T]*131072+(d[T+1]>>>11),m>=9e15?(h=crypto.getRandomValues(new Uint32Array(2)),d[T]=h[0],d[T+1]=h[1]):(M.push(m%1e14),T+=2);T=I/2}else if(crypto.randomBytes){for(d=crypto.randomBytes(I*=7);T<I;)m=(d[T]&31)*281474976710656+d[T+1]*1099511627776+d[T+2]*4294967296+d[T+3]*16777216+(d[T+4]<<16)+(d[T+5]<<8)+d[T+6],m>=9e15?crypto.randomBytes(7).copy(d,T):(M.push(m%1e14),T+=7);T=I/7}else throw S=!1,Error(ke+"crypto unavailable");if(!S)for(;T<I;)m=g(),m<9e15&&(M[T++]=m%1e14);for(I=M[--T],a%=pe,I&&a&&(m=gn[pe-a],M[T]=Ue(I/m)*m);M[T]===0;M.pop(),T--);if(T<0)M=[l=0];else{for(l=-1;M[0]===0;M.splice(0,1),l-=pe);for(T=1,m=M[0];m>=10;m/=10,T++);T<pe&&(l-=pe-T)}return b.e=l,b.c=M,b}}(),c.sum=function(){for(var i=1,g=arguments,a=new c(g[0]);i<g.length;)a=a.plus(g[i++]);return a},t=function(){var i="0123456789";function g(a,d,h,l){for(var I,m=[0],T,M=0,b=a.length;M<b;){for(T=m.length;T--;m[T]*=d);for(m[0]+=l.indexOf(a.charAt(M++)),I=0;I<m.length;I++)m[I]>h-1&&(m[I+1]==null&&(m[I+1]=0),m[I+1]+=m[I]/h|0,m[I]%=h)}return m.reverse()}return function(a,d,h,l,I){var m,T,M,b,k,_,W,J,j=a.indexOf("."),ie=u,Z=w;for(j>=0&&(b=q,q=0,a=a.replace(".",""),J=new c(d),_=J.pow(a.length-j),q=b,J.c=g(Ze(Be(_.c),_.e,"0"),10,h,i),J.e=J.c.length),W=g(a,d,h,I?(m=A,i):(m=i,A)),M=b=W.length;W[--b]==0;W.pop());if(!W[0])return m.charAt(0);if(j<0?--M:(_.c=W,_.e=M,_.s=l,_=e(_,J,ie,Z,h),W=_.c,k=_.r,M=_.e),T=M+ie+1,j=W[T],b=h/2,k=k||T<0||W[T+1]!=null,k=Z<4?(j!=null||k)&&(Z==0||Z==(_.s<0?3:2)):j>b||j==b&&(Z==4||k||Z==6&&W[T-1]&1||Z==(_.s<0?8:7)),T<1||!W[0])a=k?Ze(m.charAt(1),-ie,m.charAt(0)):m.charAt(0);else{if(W.length=T,k)for(--h;++W[--T]>h;)W[T]=0,T||(++M,W=[1].concat(W));for(b=W.length;!W[--b];);for(j=0,a="";j<=b;a+=m.charAt(W[j++]));a=Ze(a,M,m.charAt(0))}return a}}(),e=function(){function i(d,h,l){var I,m,T,M,b=0,k=d.length,_=h%ot,W=h/ot|0;for(d=d.slice();k--;)T=d[k]%ot,M=d[k]/ot|0,I=W*T+M*_,m=_*T+I%ot*ot+b,b=(m/l|0)+(I/ot|0)+W*M,d[k]=m%l;return b&&(d=[b].concat(d)),d}function g(d,h,l,I){var m,T;if(l!=I)T=l>I?1:-1;else for(m=T=0;m<l;m++)if(d[m]!=h[m]){T=d[m]>h[m]?1:-1;break}return T}function a(d,h,l,I){for(var m=0;l--;)d[l]-=m,m=d[l]<h[l]?1:0,d[l]=m*I+d[l]-h[l];for(;!d[0]&&d.length>1;d.splice(0,1));}return function(d,h,l,I,m){var T,M,b,k,_,W,J,j,ie,Z,se,ae,H,G,oe,le,de,C=d.s==h.s?1:-1,L=d.c,U=h.c;if(!L||!L[0]||!U||!U[0])return new c(!d.s||!h.s||(L?U&&L[0]==U[0]:!U)?NaN:L&&L[0]==0||!U?C*0:C/0);for(j=new c(C),ie=j.c=[],M=d.e-h.e,C=l+M+1,m||(m=Ke,M=qe(d.e/pe)-qe(h.e/pe),C=C/pe|0),b=0;U[b]==(L[b]||0);b++);if(U[b]>(L[b]||0)&&M--,C<0)ie.push(1),k=!0;else{for(G=L.length,le=U.length,b=0,C+=2,_=Ue(m/(U[0]+1)),_>1&&(U=i(U,_,m),L=i(L,_,m),le=U.length,G=L.length),H=le,Z=L.slice(0,le),se=Z.length;se<le;Z[se++]=0);de=U.slice(),de=[0].concat(de),oe=U[0],U[1]>=m/2&&oe++;do{if(_=0,T=g(U,Z,le,se),T<0){if(ae=Z[0],le!=se&&(ae=ae*m+(Z[1]||0)),_=Ue(ae/oe),_>1)for(_>=m&&(_=m-1),W=i(U,_,m),J=W.length,se=Z.length;g(W,Z,J,se)==1;)_--,a(W,le<J?de:U,J,m),J=W.length,T=1;else _==0&&(T=_=1),W=U.slice(),J=W.length;if(J<se&&(W=[0].concat(W)),a(Z,W,se,m),se=Z.length,T==-1)for(;g(U,Z,le,se)<1;)_++,a(Z,le<se?de:U,se,m),se=Z.length}else T===0&&(_++,Z=[0]);ie[b++]=_,Z[0]?Z[se++]=L[H]||0:(Z=[L[H]],se=1)}while((H++<G||Z[0]!=null)&&C--);k=Z[0]!=null,ie[0]||ie.splice(0,1)}if(m==Ke){for(b=1,C=ie[0];C>=10;C/=10,b++);fe(j,l+(j.e=b+M*pe-1)+1,I,k)}else j.e=M,j.r=+k;return j}}();function v(i,g,a,d){var h,l,I,m,T;if(a==null?a=w:Re(a,0,8),!i.c)return i.toString();if(h=i.c[0],I=i.e,g==null)T=Be(i.c),T=d==1||d==2&&(I<=O||I>=R)?sr(T,I):Ze(T,I,"0");else if(i=fe(new c(i),g,a),l=i.e,T=Be(i.c),m=T.length,d==1||d==2&&(g<=l||l<=O)){for(;m<g;T+="0",m++);T=sr(T,l)}else if(g-=I,T=Ze(T,l,"0"),l+1>m){if(--g>0)for(T+=".";g--;T+="0");}else if(g+=l-m,g>0)for(l+1==m&&(T+=".");g--;T+="0");return i.s<0&&h?"-"+T:T}function Y(i,g){for(var a,d,h=1,l=new c(i[0]);h<i.length;h++)d=new c(i[h]),(!d.s||(a=dt(l,d))===g||a===0&&l.s===g)&&(l=d);return l}function K(i,g,a){for(var d=1,h=g.length;!g[--h];g.pop());for(h=g[0];h>=10;h/=10,d++);return(a=d+a*pe-1)>F?i.c=i.e=null:a<D?i.c=[i.e=0]:(i.e=a,i.c=g),i}n=function(){var i=/^(-?)0([xbo])(?=\w[\w.]*$)/i,g=/^([^.]+)\.$/,a=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(l,I,m,T){var M,b=m?I:I.replace(h,"");if(d.test(b))l.s=isNaN(b)?null:b<0?-1:1;else{if(!m&&(b=b.replace(i,function(k,_,W){return M=(W=W.toLowerCase())=="x"?16:W=="b"?2:8,!T||T==M?_:k}),T&&(M=T,b=b.replace(g,"$1").replace(a,"0.$1")),I!=b))return new c(b,M);if(c.DEBUG)throw Error(ke+"Not a"+(T?" base "+T:"")+" number: "+I);l.s=null}l.c=l.e=null}}();function fe(i,g,a,d){var h,l,I,m,T,M,b,k=i.c,_=gn;if(k){e:{for(h=1,m=k[0];m>=10;m/=10,h++);if(l=g-h,l<0)l+=pe,I=g,T=k[M=0],b=Ue(T/_[h-I-1]%10);else if(M=hn((l+1)/pe),M>=k.length)if(d){for(;k.length<=M;k.push(0));T=b=0,h=1,l%=pe,I=l-pe+1}else break e;else{for(T=m=k[M],h=1;m>=10;m/=10,h++);l%=pe,I=l-pe+h,b=I<0?0:Ue(T/_[h-I-1]%10)}if(d=d||g<0||k[M+1]!=null||(I<0?T:T%_[h-I-1]),d=a<4?(b||d)&&(a==0||a==(i.s<0?3:2)):b>5||b==5&&(a==4||d||a==6&&(l>0?I>0?T/_[h-I]:0:k[M-1])%10&1||a==(i.s<0?8:7)),g<1||!k[0])return k.length=0,d?(g-=i.e+1,k[0]=_[(pe-g%pe)%pe],i.e=-g||0):k[0]=i.e=0,i;if(l==0?(k.length=M,m=1,M--):(k.length=M+1,m=_[pe-l],k[M]=I>0?Ue(T/_[h-I]%_[I])*m:0),d)for(;;)if(M==0){for(l=1,I=k[0];I>=10;I/=10,l++);for(I=k[0]+=m,m=1;I>=10;I/=10,m++);l!=m&&(i.e++,k[0]==Ke&&(k[0]=1));break}else{if(k[M]+=m,k[M]!=Ke)break;k[M--]=0,m=1}for(l=k.length;k[--l]===0;k.pop());}i.e>F?i.c=i.e=null:i.e<D&&(i.c=[i.e=0])}return i}function he(i){var g,a=i.e;return a===null?i.toString():(g=Be(i.c),g=a<=O||a>=R?sr(g,a):Ze(g,a,"0"),i.s<0?"-"+g:g)}return o.absoluteValue=o.abs=function(){var i=new c(this);return i.s<0&&(i.s=1),i},o.comparedTo=function(i,g){return dt(this,new c(i,g))},o.decimalPlaces=o.dp=function(i,g){var a,d,h,l=this;if(i!=null)return Re(i,0,Fe),g==null?g=w:Re(g,0,8),fe(new c(l),i+l.e+1,g);if(!(a=l.c))return null;if(d=((h=a.length-1)-qe(this.e/pe))*pe,h=a[h])for(;h%10==0;h/=10,d--);return d<0&&(d=0),d},o.dividedBy=o.div=function(i,g){return e(this,new c(i,g),u,w)},o.dividedToIntegerBy=o.idiv=function(i,g){return e(this,new c(i,g),0,1)},o.exponentiatedBy=o.pow=function(i,g){var a,d,h,l,I,m,T,M,b,k=this;if(i=new c(i),i.c&&!i.isInteger())throw Error(ke+"Exponent not an integer: "+he(i));if(g!=null&&(g=new c(g)),m=i.e>14,!k.c||!k.c[0]||k.c[0]==1&&!k.e&&k.c.length==1||!i.c||!i.c[0])return b=new c(Math.pow(+he(k),m?i.s*(2-or(i)):+he(i))),g?b.mod(g):b;if(T=i.s<0,g){if(g.c?!g.c[0]:!g.s)return new c(NaN);d=!T&&k.isInteger()&&g.isInteger(),d&&(k=k.mod(g))}else{if(i.e>9&&(k.e>0||k.e<-1||(k.e==0?k.c[0]>1||m&&k.c[1]>=24e7:k.c[0]<8e13||m&&k.c[0]<=9999975e7)))return l=k.s<0&&or(i)?-0:0,k.e>-1&&(l=1/l),new c(T?1/l:l);q&&(l=hn(q/pe+2))}for(m?(a=new c(.5),T&&(i.s=1),M=or(i)):(h=Math.abs(+he(i)),M=h%2),b=new c(s);;){if(M){if(b=b.times(k),!b.c)break;l?b.c.length>l&&(b.c.length=l):d&&(b=b.mod(g))}if(h){if(h=Ue(h/2),h===0)break;M=h%2}else if(i=i.times(a),fe(i,i.e+1,1),i.e>14)M=or(i);else{if(h=+he(i),h===0)break;M=h%2}k=k.times(k),l?k.c&&k.c.length>l&&(k.c.length=l):d&&(k=k.mod(g))}return d?b:(T&&(b=s.div(b)),g?b.mod(g):l?fe(b,q,w,I):b)},o.integerValue=function(i){var g=new c(this);return i==null?i=w:Re(i,0,8),fe(g,g.e+1,i)},o.isEqualTo=o.eq=function(i,g){return dt(this,new c(i,g))===0},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(i,g){return dt(this,new c(i,g))>0},o.isGreaterThanOrEqualTo=o.gte=function(i,g){return(g=dt(this,new c(i,g)))===1||g===0},o.isInteger=function(){return!!this.c&&qe(this.e/pe)>this.c.length-2},o.isLessThan=o.lt=function(i,g){return dt(this,new c(i,g))<0},o.isLessThanOrEqualTo=o.lte=function(i,g){return(g=dt(this,new c(i,g)))===-1||g===0},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&this.c[0]==0},o.minus=function(i,g){var a,d,h,l,I=this,m=I.s;if(i=new c(i,g),g=i.s,!m||!g)return new c(NaN);if(m!=g)return i.s=-g,I.plus(i);var T=I.e/pe,M=i.e/pe,b=I.c,k=i.c;if(!T||!M){if(!b||!k)return b?(i.s=-g,i):new c(k?I:NaN);if(!b[0]||!k[0])return k[0]?(i.s=-g,i):new c(b[0]?I:w==3?-0:0)}if(T=qe(T),M=qe(M),b=b.slice(),m=T-M){for((l=m<0)?(m=-m,h=b):(M=T,h=k),h.reverse(),g=m;g--;h.push(0));h.reverse()}else for(d=(l=(m=b.length)<(g=k.length))?m:g,m=g=0;g<d;g++)if(b[g]!=k[g]){l=b[g]<k[g];break}if(l&&(h=b,b=k,k=h,i.s=-i.s),g=(d=k.length)-(a=b.length),g>0)for(;g--;b[a++]=0);for(g=Ke-1;d>m;){if(b[--d]<k[d]){for(a=d;a&&!b[--a];b[a]=g);--b[a],b[d]+=Ke}b[d]-=k[d]}for(;b[0]==0;b.splice(0,1),--M);return b[0]?K(i,b,M):(i.s=w==3?-1:1,i.c=[i.e=0],i)},o.modulo=o.mod=function(i,g){var a,d,h=this;return i=new c(i,g),!h.c||!i.s||i.c&&!i.c[0]?new c(NaN):!i.c||h.c&&!h.c[0]?new c(h):(B==9?(d=i.s,i.s=1,a=e(h,i,0,3),i.s=d,a.s*=d):a=e(h,i,0,B),i=h.minus(a.times(i)),!i.c[0]&&B==1&&(i.s=h.s),i)},o.multipliedBy=o.times=function(i,g){var a,d,h,l,I,m,T,M,b,k,_,W,J,j,ie,Z=this,se=Z.c,ae=(i=new c(i,g)).c;if(!se||!ae||!se[0]||!ae[0])return!Z.s||!i.s||se&&!se[0]&&!ae||ae&&!ae[0]&&!se?i.c=i.e=i.s=null:(i.s*=Z.s,!se||!ae?i.c=i.e=null:(i.c=[0],i.e=0)),i;for(d=qe(Z.e/pe)+qe(i.e/pe),i.s*=Z.s,T=se.length,k=ae.length,T<k&&(J=se,se=ae,ae=J,h=T,T=k,k=h),h=T+k,J=[];h--;J.push(0));for(j=Ke,ie=ot,h=k;--h>=0;){for(a=0,_=ae[h]%ie,W=ae[h]/ie|0,I=T,l=h+I;l>h;)M=se[--I]%ie,b=se[I]/ie|0,m=W*M+b*_,M=_*M+m%ie*ie+J[l]+a,a=(M/j|0)+(m/ie|0)+W*b,J[l--]=M%j;J[l]=a}return a?++d:J.splice(0,1),K(i,J,d)},o.negated=function(){var i=new c(this);return i.s=-i.s||null,i},o.plus=function(i,g){var a,d=this,h=d.s;if(i=new c(i,g),g=i.s,!h||!g)return new c(NaN);if(h!=g)return i.s=-g,d.minus(i);var l=d.e/pe,I=i.e/pe,m=d.c,T=i.c;if(!l||!I){if(!m||!T)return new c(h/0);if(!m[0]||!T[0])return T[0]?i:new c(m[0]?d:h*0)}if(l=qe(l),I=qe(I),m=m.slice(),h=l-I){for(h>0?(I=l,a=T):(h=-h,a=m),a.reverse();h--;a.push(0));a.reverse()}for(h=m.length,g=T.length,h-g<0&&(a=T,T=m,m=a,g=h),h=0;g;)h=(m[--g]=m[g]+T[g]+h)/Ke|0,m[g]=Ke===m[g]?0:m[g]%Ke;return h&&(m=[h].concat(m),++I),K(i,m,I)},o.precision=o.sd=function(i,g){var a,d,h,l=this;if(i!=null&&i!==!!i)return Re(i,1,Fe),g==null?g=w:Re(g,0,8),fe(new c(l),i,g);if(!(a=l.c))return null;if(h=a.length-1,d=h*pe+1,h=a[h]){for(;h%10==0;h/=10,d--);for(h=a[0];h>=10;h/=10,d++);}return i&&l.e+1>d&&(d=l.e+1),d},o.shiftedBy=function(i){return Re(i,-9007199254740991,zi),this.times("1e"+i)},o.squareRoot=o.sqrt=function(){var i,g,a,d,h,l=this,I=l.c,m=l.s,T=l.e,M=u+4,b=new c("0.5");if(m!==1||!I||!I[0])return new c(!m||m<0&&(!I||I[0])?NaN:I?l:1/0);if(m=Math.sqrt(+he(l)),m==0||m==1/0?(g=Be(I),(g.length+T)%2==0&&(g+="0"),m=Math.sqrt(+g),T=qe((T+1)/2)-(T<0||T%2),m==1/0?g="5e"+T:(g=m.toExponential(),g=g.slice(0,g.indexOf("e")+1)+T),a=new c(g)):a=new c(m+""),a.c[0]){for(T=a.e,m=T+M,m<3&&(m=0);;)if(h=a,a=b.times(h.plus(e(l,h,M,1))),Be(h.c).slice(0,m)===(g=Be(a.c)).slice(0,m))if(a.e<T&&--m,g=g.slice(m-3,m+1),g=="9999"||!d&&g=="4999"){if(!d&&(fe(h,h.e+u+2,0),h.times(h).eq(l))){a=h;break}M+=4,m+=4,d=1}else{(!+g||!+g.slice(1)&&g.charAt(0)=="5")&&(fe(a,a.e+u+2,1),i=!a.times(a).eq(l));break}}return fe(a,a.e+u+1,w,i)},o.toExponential=function(i,g){return i!=null&&(Re(i,0,Fe),i++),v(this,i,g,1)},o.toFixed=function(i,g){return i!=null&&(Re(i,0,Fe),i=i+this.e+1),v(this,i,g)},o.toFormat=function(i,g,a){var d,h=this;if(a==null)i!=null&&g&&typeof g=="object"?(a=g,g=null):i&&typeof i=="object"?(a=i,i=g=null):a=N;else if(typeof a!="object")throw Error(ke+"Argument not an object: "+a);if(d=h.toFixed(i,g),h.c){var l,I=d.split("."),m=+a.groupSize,T=+a.secondaryGroupSize,M=a.groupSeparator||"",b=I[0],k=I[1],_=h.s<0,W=_?b.slice(1):b,J=W.length;if(T&&(l=m,m=T,T=l,J-=l),m>0&&J>0){for(l=J%m||m,b=W.substr(0,l);l<J;l+=m)b+=M+W.substr(l,m);T>0&&(b+=M+W.slice(l)),_&&(b="-"+b)}d=k?b+(a.decimalSeparator||"")+((T=+a.fractionGroupSize)?k.replace(new RegExp("\\d{"+T+"}\\B","g"),"$&"+(a.fractionGroupSeparator||"")):k):b}return(a.prefix||"")+d+(a.suffix||"")},o.toFraction=function(i){var g,a,d,h,l,I,m,T,M,b,k,_,W=this,J=W.c;if(i!=null&&(m=new c(i),!m.isInteger()&&(m.c||m.s!==1)||m.lt(s)))throw Error(ke+"Argument "+(m.isInteger()?"out of range: ":"not an integer: ")+he(m));if(!J)return new c(W);for(g=new c(s),M=a=new c(s),d=T=new c(s),_=Be(J),l=g.e=_.length-W.e-1,g.c[0]=gn[(I=l%pe)<0?pe+I:I],i=!i||m.comparedTo(g)>0?l>0?g:M:m,I=F,F=1/0,m=new c(_),T.c[0]=0;b=e(m,g,0,1),h=a.plus(b.times(d)),h.comparedTo(i)!=1;)a=d,d=h,M=T.plus(b.times(h=M)),T=h,g=m.minus(b.times(h=g)),m=h;return h=e(i.minus(a),d,0,1),T=T.plus(h.times(M)),a=a.plus(h.times(d)),T.s=M.s=W.s,l=l*2,k=e(M,d,l,w).minus(W).abs().comparedTo(e(T,a,l,w).minus(W).abs())<1?[M,d]:[T,a],F=I,k},o.toNumber=function(){return+he(this)},o.toPrecision=function(i,g){return i!=null&&Re(i,1,Fe),v(this,i,g,2)},o.toString=function(i){var g,a=this,d=a.s,h=a.e;return h===null?d?(g="Infinity",d<0&&(g="-"+g)):g="NaN":(i==null?g=h<=O||h>=R?sr(Be(a.c),h):Ze(Be(a.c),h,"0"):i===10&&f?(a=fe(new c(a),u+h+1,w),g=Ze(Be(a.c),a.e,"0")):(Re(i,2,A.length,"Base"),g=t(Ze(Be(a.c),h,"0"),10,i,d,!0)),d<0&&a.c[0]&&(g="-"+g)),g},o.valueOf=o.toJSON=function(){return he(this)},o._isBigNumber=!0,o[Symbol.toStringTag]="BigNumber",o[Symbol.for("nodejs.util.inspect.custom")]=o.valueOf,r!=null&&c.set(r),c}function qe(r){var e=r|0;return r>0||r===e?e:e-1}function Be(r){for(var e,t,n=1,o=r.length,s=r[0]+"";n<o;){for(e=r[n++]+"",t=pe-e.length;t--;e="0"+e);s+=e}for(o=s.length;s.charCodeAt(--o)===48;);return s.slice(0,o+1||1)}function dt(r,e){var t,n,o=r.c,s=e.c,u=r.s,w=e.s,O=r.e,R=e.e;if(!u||!w)return null;if(t=o&&!o[0],n=s&&!s[0],t||n)return t?n?0:-w:u;if(u!=w)return u;if(t=u<0,n=O==R,!o||!s)return n?0:!o^t?1:-1;if(!n)return O>R^t?1:-1;for(w=(O=o.length)<(R=s.length)?O:R,u=0;u<w;u++)if(o[u]!=s[u])return o[u]>s[u]^t?1:-1;return O==R?0:O>R^t?1:-1}function Re(r,e,t,n){if(r<e||r>t||r!==Ue(r))throw Error(ke+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function or(r){var e=r.c.length-1;return qe(r.e/pe)==e&&r.c[e]%2!=0}function sr(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function Ze(r,e,t){var n,o;if(e<0){for(o=t+".";++e;o+=t);r=o+r}else if(n=r.length,++e>n){for(o=t,e-=n;--e;o+=t);r+=o}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}ho();class Gs extends Error{}Gs.prototype.name="InvalidTokenError";const ar={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},tt={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},Ks={GET_PROVIDER_STATE:"wallet_get_provider_state"},pn={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function Vs(r){return function(t,n,o){o(s=>{n.error&&cr.warn(`Error in RPC response:
`,n),!t.isTorusInternal&&(cr.info(`RPC (${r.origin}):`,t,"->",n),s())})}}var wn={},ht={},Gi;function In(){if(Gi)return ht;Gi=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.EthereumProviderError=ht.EthereumRpcError=void 0;const r=ao();class e extends Error{constructor(u,w,O){if(!Number.isInteger(u))throw new Error('"code" must be an integer.');if(!w||typeof w!="string")throw new Error('"message" must be a nonempty string.');super(w),this.code=u,O!==void 0&&(this.data=O)}serialize(){const u={code:this.code,message:this.message};return this.data!==void 0&&(u.data=this.data),this.stack&&(u.stack=this.stack),u}toString(){return r.default(this.serialize(),o,2)}}ht.EthereumRpcError=e;class t extends e{constructor(u,w,O){if(!n(u))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(u,w,O)}}ht.EthereumProviderError=t;function n(s){return Number.isInteger(s)&&s>=1e3&&s<=4999}function o(s,u){if(u!=="[Circular]")return u}return ht}var _n={},gt={},Ki;function On(){return Ki||(Ki=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.errorValues=gt.errorCodes=void 0,gt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},gt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}),gt}var Vi;function go(){return Vi||(Vi=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=On(),t=In(),n=e.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",s={code:n,message:u(n)};r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function u(S,B=o){if(Number.isInteger(S)){const q=S.toString();if(F(e.errorValues,q))return e.errorValues[q].message;if(R(S))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return B}r.getMessageFromCode=u;function w(S){if(!Number.isInteger(S))return!1;const B=S.toString();return!!(e.errorValues[B]||R(S))}r.isValidCode=w;function O(S,{fallbackError:B=s,shouldIncludeStack:q=!1}={}){var N,A;if(!B||!Number.isInteger(B.code)||typeof B.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(S instanceof t.EthereumRpcError)return S.serialize();const f={};if(S&&typeof S=="object"&&!Array.isArray(S)&&F(S,"code")&&w(S.code)){const v=S;f.code=v.code,v.message&&typeof v.message=="string"?(f.message=v.message,F(v,"data")&&(f.data=v.data)):(f.message=u(f.code),f.data={originalError:D(S)})}else{f.code=B.code;const v=(N=S)===null||N===void 0?void 0:N.message;f.message=v&&typeof v=="string"?v:B.message,f.data={originalError:D(S)}}const c=(A=S)===null||A===void 0?void 0:A.stack;return q&&S&&c&&typeof c=="string"&&(f.stack=c),f}r.serializeError=O;function R(S){return S>=-32099&&S<=-32e3}function D(S){return S&&typeof S=="object"&&!Array.isArray(S)?Object.assign({},S):S}function F(S,B){return Object.prototype.hasOwnProperty.call(S,B)}}(_n)),_n}var Pt={},Ji;function Js(){if(Ji)return Pt;Ji=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.ethErrors=void 0;const r=In(),e=go(),t=On();Pt.ethErrors={rpc:{parse:u=>n(t.errorCodes.rpc.parse,u),invalidRequest:u=>n(t.errorCodes.rpc.invalidRequest,u),invalidParams:u=>n(t.errorCodes.rpc.invalidParams,u),methodNotFound:u=>n(t.errorCodes.rpc.methodNotFound,u),internal:u=>n(t.errorCodes.rpc.internal,u),server:u=>{if(!u||typeof u!="object"||Array.isArray(u))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:w}=u;if(!Number.isInteger(w)||w>-32005||w<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return n(w,u)},invalidInput:u=>n(t.errorCodes.rpc.invalidInput,u),resourceNotFound:u=>n(t.errorCodes.rpc.resourceNotFound,u),resourceUnavailable:u=>n(t.errorCodes.rpc.resourceUnavailable,u),transactionRejected:u=>n(t.errorCodes.rpc.transactionRejected,u),methodNotSupported:u=>n(t.errorCodes.rpc.methodNotSupported,u),limitExceeded:u=>n(t.errorCodes.rpc.limitExceeded,u)},provider:{userRejectedRequest:u=>o(t.errorCodes.provider.userRejectedRequest,u),unauthorized:u=>o(t.errorCodes.provider.unauthorized,u),unsupportedMethod:u=>o(t.errorCodes.provider.unsupportedMethod,u),disconnected:u=>o(t.errorCodes.provider.disconnected,u),chainDisconnected:u=>o(t.errorCodes.provider.chainDisconnected,u),custom:u=>{if(!u||typeof u!="object"||Array.isArray(u))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:w,message:O,data:R}=u;if(!O||typeof O!="string")throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(w,O,R)}}};function n(u,w){const[O,R]=s(w);return new r.EthereumRpcError(u,O||e.getMessageFromCode(u),R)}function o(u,w){const[O,R]=s(w);return new r.EthereumProviderError(u,O||e.getMessageFromCode(u),R)}function s(u){if(u){if(typeof u=="string")return[u];if(typeof u=="object"&&!Array.isArray(u)){const{message:w,data:O}=u;if(w&&typeof w!="string")throw new Error("Must specify string message.");return[w||void 0,O]}}return[]}return Pt}var Yi;function Ys(){return Yi||(Yi=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMessageFromCode=r.serializeError=r.EthereumProviderError=r.EthereumRpcError=r.ethErrors=r.errorCodes=void 0;const e=In();Object.defineProperty(r,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const t=go();Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const n=Js();Object.defineProperty(r,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const o=On();Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}(wn)),wn}var at=Ys(),bn,Xi;function Xs(){return Xi||(Xi=1,bn=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[o]))return!1;for(o=n;o--!==0;){var u=s[o];if(!r(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}),bn}var Qs=Xs();const Zs=mt(Qs);var ea="2.1.0";function po(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}function ta(r){return po(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object"}function ra(r){return po(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object"}function na(r){return ta(r)&&ra(r)}var Je={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:r=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${r} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:r=>`Invalid options. Received: { maxEventListeners: ${r}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:r=>`'args.logger' must include required method '${r}'.`},info:{connected:r=>`Torus: Connected to chain with ID "${r}".`}};const ia={PRODUCTION:"production"},xt={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},oa={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var Nn={translations:oa,localStorageKeyPrefix:"torus-"},Se=cr.getLogger("solana-embed");function sa(){return(r,e,t)=>{(typeof r.method!="string"||!r.method)&&(e.error=at.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:r})),t(n=>{const{error:o}=e;return o&&Se.error(`Torus - RPC Error: ${o.message}`,o),n()})}}function aa(r,e,t){let n=`Torus: Lost connection to "${r}".`;e!=null&&e.stack&&(n+=`
${e.stack}`),Se.warn(n),t&&t.listenerCount("error")>0&&t.emit("error",n)}const lr=()=>Math.random().toString(36).slice(2),wo=async r=>{let e,t;switch(r){case"testing":e="https://solana-testing.tor.us",t="debug";break;case"development":e="http://localhost:8080",t="debug";break;default:e="https://solana.tor.us",t="error";break}return{torusUrl:e,logLevel:t}},la=()=>{let r=window.navigator.language||"en-US";const e=r.split("-");return r=Object.prototype.hasOwnProperty.call(Nn.translations,e[0])?e[0]:"en",r},ua={height:660,width:375},fa={height:740,width:1315},ca={height:700,width:1200},_o={height:600,width:400};function da(r){let e;try{e=window[r];const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){const n=t;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function Mt(r){let{width:e,height:t}=r;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,o=window.screenTop!==void 0?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,u=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,w=1,O=Math.abs((s-e)/2/w+n),R=Math.abs((u-t)/2/w+o);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${t/w},width=${e/w},top=${R},left=${O}`}class bo extends _r{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;if(super(),ge(this,"isTorus",void 0),ge(this,"_rpcEngine",void 0),ge(this,"jsonRpcConnectionEvents",void 0),ge(this,"_state",void 0),!na(e))throw new Error(Je.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const s=new Os;Ei(e,s,e,this._handleStreamDisconnect.bind(this,"Torus")),s.ignoreStream("phishing");const u=Rs();Ei(u.stream,s.createStream(o),u.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const w=new et;w.push(Ts()),w.push(sa()),w.push(Vs({origin:location.origin})),w.push(u.middleware),this._rpcEngine=w,this.jsonRpcConnectionEvents=u.events}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw at.ethErrors.rpc.invalidRequest({message:Je.errors.invalidRequestArgs(),data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw at.ethErrors.rpc.invalidRequest({message:Je.errors.invalidRequestMethod(),data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw at.ethErrors.rpc.invalidRequest({message:Je.errors.invalidRequestParams(),data:e});return new Promise((o,s)=>{this._rpcRequest({method:t,params:n},mn(o,s))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,n)=>{this._rpcRequest(e,mn(t,n))})}_handleStreamDisconnect(e,t){aa(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const yt=r=>{const e=window.document.createElement("template"),t=r.trim();return e.innerHTML=t,e.content.firstChild};function ur(r){return r.version===void 0}class yo extends _r{constructor(e){let{url:t,target:n,features:o,timeout:s=3e4}=e;super(),ge(this,"url",void 0),ge(this,"target",void 0),ge(this,"features",void 0),ge(this,"window",void 0),ge(this,"windowTimer",void 0),ge(this,"iClosedWindow",void 0),ge(this,"timeout",void 0),this.url=t,this.target=n||"_blank",this.features=o||Mt(ca),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=s,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),(e=this.window)!=null&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class yr extends bo{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:o}),ge(this,"embedTranslations",void 0),ge(this,"torusUrl",void 0),ge(this,"dappStorageKey",void 0),ge(this,"windowRefs",void 0),ge(this,"tryWindowHandle",void 0),ge(this,"torusAlertContainer",void 0),ge(this,"torusIframe",void 0),this._state=$e({},yr._defaultState),this.torusUrl="",this.dappStorageKey="";const s=Nn.translations[la()];this.embedTranslations=s.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const u=w=>{const{method:O,params:R}=w;if(O===ar.IFRAME_STATUS){const{isFullScreen:D,rid:F}=R;this._displayIframe({isFull:D,rid:F})}else if(O==="create_window"){const{windowId:D,url:F}=R;this._createPopupBlockAlert(D,F)}else if(O===ar.CLOSE_WINDOW)this._handleCloseWindow(R);else if(O===ar.USER_LOGGED_IN){const{currentLoginProvider:D}=R;this._state.isLoggedIn=!0,this._state.currentLoginProvider=D}else O===ar.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",u)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:n,torusAlertContainer:o,torusIframe:s}=e;this.torusUrl=t,this.dappStorageKey=n,this.torusAlertContainer=o,this.torusIframe=s,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:u,isLoggedIn:w}=await this.request({method:tt.GET_PROVIDER_STATE,params:[]});this._handleConnect(u,w)}catch(t){Se.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{Se.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:n,features:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(s.hash?s.hash+=`&dappStorageKey=${this.dappStorageKey}`:s.hash=`#dappStorageKey=${this.dappStorageKey}`);const u=new yo({url:s,target:n,features:o});if(u.open(),!u.window){this._createPopupBlockAlert(e,s.href);return}this.windowRefs[e]=u,this.request({method:"opened_window",params:{windowId:e}}),u.once("close",()=>{delete this.windowRefs[e],this.request({method:tt.CLOSED_WINDOW,params:{windowId:e}})})}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(e)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case xt.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case xt.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case xt.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case xt.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=e,this.request({method:tt.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const n=t,o=e;Array.isArray(o)||o.jsonrpc||(o.jsonrpc="2.0"),this.tryWindowHandle(o,n)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),Se.debug(Je.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new at.EthereumRpcError(1013,t||Je.errors.disconnected()),Se.debug(n)):(n=new at.EthereumRpcError(1011,t||Je.errors.permanentlyDisconnected()),Se.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const n=this.getLogoUrl(),o=yt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),s=yt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),u=yt('<div id="torusAlert__btn-container"></div>');u.appendChild(s),o.appendChild(u);const w=()=>{s.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:Mt(_o)}),o.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(o)})(),w(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ge(yr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class mr extends bo{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:o}),ge(this,"chainId",void 0),ge(this,"selectedAddress",void 0),ge(this,"tryWindowHandle",void 0),this._state=$e({},mr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const s=u=>{const{method:w,params:O}=u;w===pn.ACCOUNTS_CHANGED?this._handleAccountsChanged(O):w===pn.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(O):w===pn.CHAIN_CHANGED&&this._handleChainChanged(O)};this.jsonRpcConnectionEvents.on("notification",s)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:n}=await this.request({method:Ks.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:n}),this._handleAccountsChanged(e)}catch(e){Se.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{Se.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=t;const s=e;if(!Array.isArray(s)){if(s.jsonrpc||(s.jsonrpc="2.0"),s.method==="solana_accounts"||s.method==="solana_requestAccounts")o=(u,w)=>{this._handleAccountsChanged(w.result||[],s.method==="solana_accounts",n),t(u,w)};else if(s.method==="wallet_getProviderState"){this._rpcEngine.handle(e,o);return}}this.tryWindowHandle(s,o)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),Se.debug(Je.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new at.EthereumRpcError(1013,t||Je.errors.disconnected()),Se.debug(n)):(n=new at.EthereumRpcError(1011,t||Je.errors.permanentlyDisconnected()),Se.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=e;Array.isArray(o)||(Se.error("Torus: Received non-array accounts parameter. Please report this bug.",o),o=[]);for(const s of e)if(typeof s!="string"){Se.error("Torus: Received non-string account. Please report this bug.",e),o=[];break}Zs(this._state.accounts,o)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&Se.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',o),this._state.accounts=o,this.emit("accountsChanged",o)),this.selectedAddress!==o[0]&&(this.selectedAddress=o[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e){Se.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e});return}e==="loading"?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){Se.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}}ge(mr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Qi(r){return new Promise((e,t)=>{try{const n=document.createElement("img");n.onload=()=>e(!0),n.onerror=()=>e(!1),n.src=r}catch(n){t(n)}})}const ha=r=>{const{document:e}=r,t=e.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const n=e.querySelector('head > meta[name="title"]');return n?n.content:e.title&&e.title.length>0?e.title:r.location.hostname};async function ga(r){try{const{document:e}=r;let t=e.querySelector('head > link[rel="shortcut icon"]');return t&&await Qi(t.href)||(t=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),t&&await Qi(t.href))?t.href:""}catch{return""}}const pa=async()=>({name:ha(window),icon:await ga(window)}),wa=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],_a=[tt.SET_PROVIDER],ba=da("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await wo("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){Se.warn(e)}})();class Sa{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,"isInitialized",void 0),ge(this,"torusAlert",void 0),ge(this,"modalZIndex",void 0),ge(this,"alertZIndex",void 0),ge(this,"requestedLoginProvider",void 0),ge(this,"provider",void 0),ge(this,"communicationProvider",void 0),ge(this,"dappStorageKey",void 0),ge(this,"isTopupHidden",!1),ge(this,"torusAlertContainer",void 0),ge(this,"torusUrl",void 0),ge(this,"torusIframe",void 0),ge(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:e=ia.PRODUCTION,enableLogging:t=!1,network:n,showTorusButton:o=!1,useLocalStorage:s=!1,buttonPosition:u=xt.BOTTOM_LEFT,apiKey:w="torus-default",extraParams:O={},whiteLabel:R}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:D,logLevel:F}=await wo(e);Se.enableAll(),Se.info(D,"url loaded"),Se.info(`Solana Embed Version :${ea}`),this.torusUrl=D,Se.setDefaultLevel(F),t?Se.enableAll():Se.disableAll();const S=this.handleDappStorageKey(s),B=new URL(D);B.pathname.endsWith("/")?B.pathname+="frame":B.pathname+="/frame";const q=new URLSearchParams;return S&&q.append("dappStorageKey",S),q.append("origin",window.location.origin),B.hash=q.toString(),this.torusIframe=yt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${B.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=yt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=yt(`<link href="${D}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((N,A)=>{try{this.torusIframe.addEventListener("load",async()=>{const f=await pa();this.torusIframe.contentWindow.postMessage({buttonPosition:u,apiKey:w,network:n,dappMetadata:f,extraParams:O,whiteLabel:R},B.origin),await this._setupWeb3({torusUrl:D}),o&&this.showTorusButton(),R!=null&&R.topupHide?this.isTopupHidden=R.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,N()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(f){A(f)}})}async login(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((n,o)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},mn(n,o))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw Se.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:n}=e,{success:o}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:n}});if(!o)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:tt.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(t){return t instanceof Element||t instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:tt.SET_PROVIDER,params:$e({},e)})}async showWallet(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:tt.WALLET_INSTANCE_ID,params:[]}),o=e?`/${e}`:"",s=new URL(`${this.torusUrl}/wallet${o}`);s.searchParams.append("instanceId",n),Object.keys(t).forEach(w=>{s.searchParams.append(w,t[w])}),this.dappStorageKey&&(s.hash=`#dappStorageKey=${this.dappStorageKey}`),new yo({url:s,features:Mt(fa)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:tt.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=lr();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:tt.TOPUP,params:{provider:e,params:t,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=ur(e),n=t?e.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const n=ur(e),o=n?e.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:o,options:t,isLegacyTransaction:n}})}}async signTransaction(e){const t=ur(e),n=t?e.serializeMessage().toString("hex"):Buffer.from(e.message.serialize()).toString("hex"),o=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:t}}),s=JSON.parse(o),u={publicKey:new Bn(s.publicKey),signature:Buffer.from(s.signature,"hex")};return e.addSignature(u.publicKey,u.signature),e}async signAllTransactions(e){let t;const n=e.map(u=>(t=ur(u),t?u.serializeMessage().toString("hex"):Buffer.from(u.message.serialize()).toString("hex"))),s=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:t}})).map(u=>{const w=JSON.parse(u);return{publicKey:new Bn(w.publicKey),signature:Buffer.from(w.signature,"hex")}});return e.forEach((u,w)=>(u.addSignature(s[w].publicKey,s[w].signature),u)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${Nn.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(ba&&e){const o=window.localStorage.getItem(t);if(o)n=o;else{const s=`torus-app-${lr()}`;window.localStorage.setItem(t,s),n=s}}return this.dappStorageKey=n,n}async _setupWeb3(e){Se.info("setupWeb3 running");const t=new Ri({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new Ri({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),o=new mr(t,{}),s=new yr(n,{});o.tryWindowHandle=(R,D)=>{const F=R;if(!Array.isArray(F)&&wa.includes(F.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const S=lr();s._handleWindow(S,{target:"_blank",features:Mt(_o)}),F.windowId=S}o._rpcEngine.handle(F,D)},s.tryWindowHandle=(R,D)=>{const F=R;if(!Array.isArray(F)&&_a.includes(F.method)){const S=lr();s._handleWindow(S,{target:"_blank",features:Mt(ua)}),F.params.windowId=S}s._rpcEngine.handle(F,D)};const u=R=>{const D=o[R],F=this;o[R]=function(B,q){const{method:N,params:A=[]}=B;if(N==="solana_requestAccounts"){if(!q)return F.login({loginProvider:A[0]});F.login({loginProvider:A[0]}).then(f=>q(null,f)).catch(f=>q(f))}return D.apply(this,[B,q])}};u("request"),u("sendAsync"),u("send");const w=new Proxy(o,{deleteProperty:()=>!0}),O=new Proxy(s,{deleteProperty:()=>!0});this.provider=w,this.communicationProvider=O,await Promise.all([o._initializeState(),s._initializeState($e($e({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),Se.debug("Torus - injected provider")}}export{xt as BUTTON_POSITION,ia as TORUS_BUILD_ENV,mr as TorusInPageProvider,Sa as default};
