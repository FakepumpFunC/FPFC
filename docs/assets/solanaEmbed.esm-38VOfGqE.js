import{r as bs,a as At,g as Nt,c as ys,s as co,B as Ve,P as Xn}from"./index-DgInH4WV.js";var ar={exports:{}},Qn;function Gt(){if(Qn)return ar.exports;Qn=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(N,G,Y){return Function.prototype.apply.call(N,G,Y)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:t=function(N){return Object.getOwnPropertyNames(N)};function n(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(N){return N!==N};function o(){o.init.call(this)}ar.exports=o,ar.exports.once=f,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function w(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");u=C}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||a(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function O(C){return C._maxListeners===void 0?o.defaultMaxListeners:C._maxListeners}o.prototype.getMaxListeners=function(){return O(this)},o.prototype.emit=function(N){for(var G=[],Y=1;Y<arguments.length;Y++)G.push(arguments[Y]);var i=N==="error",h=this._events;if(h!==void 0)i=i&&h.error===void 0;else if(!i)return!1;if(i){var s;if(G.length>0&&(s=G[0]),s instanceof Error)throw s;var d=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw d.context=s,d}var p=h[N];if(p===void 0)return!1;if(typeof p=="function")e(p,this,G);else for(var l=p.length,I=$(p,l),Y=0;Y<l;++Y)e(I[Y],this,G);return!0};function T(C,N,G,Y){var i,h,s;if(w(G),h=C._events,h===void 0?(h=C._events=Object.create(null),C._eventsCount=0):(h.newListener!==void 0&&(C.emit("newListener",N,G.listener?G.listener:G),h=C._events),s=h[N]),s===void 0)s=h[N]=G,++C._eventsCount;else if(typeof s=="function"?s=h[N]=Y?[G,s]:[s,G]:Y?s.unshift(G):s.push(G),i=O(C),i>0&&s.length>i&&!s.warned){s.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=C,d.type=N,d.count=s.length,n(d)}return C}o.prototype.addListener=function(N,G){return T(this,N,G,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(N,G){return T(this,N,G,!0)};function k(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function W(C,N,G){var Y={fired:!1,wrapFn:void 0,target:C,type:N,listener:G},i=k.bind(Y);return i.listener=G,Y.wrapFn=i,i}o.prototype.once=function(N,G){return w(G),this.on(N,W(this,N,G)),this},o.prototype.prependOnceListener=function(N,G){return w(G),this.prependListener(N,W(this,N,G)),this},o.prototype.removeListener=function(N,G){var Y,i,h,s,d;if(w(G),i=this._events,i===void 0)return this;if(Y=i[N],Y===void 0)return this;if(Y===G||Y.listener===G)--this._eventsCount===0?this._events=Object.create(null):(delete i[N],i.removeListener&&this.emit("removeListener",N,Y.listener||G));else if(typeof Y!="function"){for(h=-1,s=Y.length-1;s>=0;s--)if(Y[s]===G||Y[s].listener===G){d=Y[s].listener,h=s;break}if(h<0)return this;h===0?Y.shift():x(Y,h),Y.length===1&&(i[N]=Y[0]),i.removeListener!==void 0&&this.emit("removeListener",N,d||G)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(N){var G,Y,i;if(Y=this._events,Y===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Y[N]),this;if(arguments.length===0){var h=Object.keys(Y),s;for(i=0;i<h.length;++i)s=h[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(G=Y[N],typeof G=="function")this.removeListener(N,G);else if(G!==void 0)for(i=G.length-1;i>=0;i--)this.removeListener(N,G[i]);return this};function m(C,N,G){var Y=C._events;if(Y===void 0)return[];var i=Y[N];return i===void 0?[]:typeof i=="function"?G?[i.listener||i]:[i]:G?A(i):$(i,i.length)}o.prototype.listeners=function(N){return m(this,N,!0)},o.prototype.rawListeners=function(N){return m(this,N,!1)},o.listenerCount=function(C,N){return typeof C.listenerCount=="function"?C.listenerCount(N):q.call(C,N)},o.prototype.listenerCount=q;function q(C){var N=this._events;if(N!==void 0){var G=N[C];if(typeof G=="function")return 1;if(G!==void 0)return G.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function $(C,N){for(var G=new Array(N),Y=0;Y<N;++Y)G[Y]=C[Y];return G}function x(C,N){for(;N+1<C.length;N++)C[N]=C[N+1];C.pop()}function A(C){for(var N=new Array(C.length),G=0;G<N.length;++G)N[G]=C[G].listener||C[G];return N}function f(C,N){return new Promise(function(G,Y){function i(s){C.removeListener(N,h),Y(s)}function h(){typeof C.removeListener=="function"&&C.removeListener("error",i),G([].slice.call(arguments))}E(C,N,h,{once:!0}),N!=="error"&&c(C,i,{once:!0})})}function c(C,N,G){typeof C.on=="function"&&E(C,"error",N,G)}function E(C,N,G,Y){if(typeof C.on=="function")Y.once?C.once(N,G):C.on(N,G);else if(typeof C.addEventListener=="function")C.addEventListener(N,function i(h){Y.once&&C.removeEventListener(N,i),G(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return ar.exports}var ms=Gt();function vs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ho={exports:{}},Oe=ho.exports={},Ye,Xe;function On(){throw new Error("setTimeout has not been defined")}function Nn(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ye=setTimeout:Ye=On}catch{Ye=On}try{typeof clearTimeout=="function"?Xe=clearTimeout:Xe=Nn}catch{Xe=Nn}})();function po(r){if(Ye===setTimeout)return setTimeout(r,0);if((Ye===On||!Ye)&&setTimeout)return Ye=setTimeout,setTimeout(r,0);try{return Ye(r,0)}catch{try{return Ye.call(null,r,0)}catch{return Ye.call(this,r,0)}}}function Es(r){if(Xe===clearTimeout)return clearTimeout(r);if((Xe===Nn||!Xe)&&clearTimeout)return Xe=clearTimeout,clearTimeout(r);try{return Xe(r)}catch{try{return Xe.call(null,r)}catch{return Xe.call(this,r)}}}var lt=[],It=!1,Et,yr=-1;function Ss(){!It||!Et||(It=!1,Et.length?lt=Et.concat(lt):yr=-1,lt.length&&go())}function go(){if(!It){var r=po(Ss);It=!0;for(var e=lt.length;e;){for(Et=lt,lt=[];++yr<e;)Et&&Et[yr].run();yr=-1,e=lt.length}Et=null,It=!1,Es(r)}}Oe.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];lt.push(new wo(r,e)),lt.length===1&&!It&&po(go)};function wo(r,e){this.fun=r,this.array=e}wo.prototype.run=function(){this.fun.apply(null,this.array)};Oe.title="browser";Oe.browser=!0;Oe.env={};Oe.argv=[];Oe.version="";Oe.versions={};function ft(){}Oe.on=ft;Oe.addListener=ft;Oe.once=ft;Oe.off=ft;Oe.removeListener=ft;Oe.removeAllListeners=ft;Oe.emit=ft;Oe.prependListener=ft;Oe.prependOnceListener=ft;Oe.listeners=function(r){return[]};Oe.binding=function(r){throw new Error("process.binding is not supported")};Oe.cwd=function(){return"/"};Oe.chdir=function(r){throw new Error("process.chdir is not supported")};Oe.umask=function(){return 0};var As=ho.exports;const _o=vs(As);var Hr={},Zn;function Rs(){if(Zn)return Hr;Zn=1;var r=bs().Buffer,e=r.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(f){if(!f)return"utf8";for(var c;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(c)return;f=(""+f).toLowerCase(),c=!0}}function n(f){var c=t(f);if(typeof c!="string"&&(r.isEncoding===e||!e(f)))throw new Error("Unknown encoding: "+f);return c||f}Hr.StringDecoder=a;function a(f){this.encoding=n(f);var c;switch(this.encoding){case"utf16le":this.text=W,this.end=m,c=4;break;case"utf8":this.fillLast=O,c=4;break;case"base64":this.text=q,this.end=$,c=3;break;default:this.write=x,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(c)}a.prototype.write=function(f){if(f.length===0)return"";var c,E;if(this.lastNeed){if(c=this.fillLast(f),c===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<f.length?c?c+this.text(f,E):this.text(f,E):c||""},a.prototype.end=k,a.prototype.text=T,a.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function o(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function u(f,c,E){var C=c.length-1;if(C<E)return 0;var N=o(c[C]);return N>=0?(N>0&&(f.lastNeed=N-1),N):--C<E||N===-2?0:(N=o(c[C]),N>=0?(N>0&&(f.lastNeed=N-2),N):--C<E||N===-2?0:(N=o(c[C]),N>=0?(N>0&&(N===2?N=0:f.lastNeed=N-3),N):0))}function w(f,c,E){if((c[0]&192)!==128)return f.lastNeed=0,"�";if(f.lastNeed>1&&c.length>1){if((c[1]&192)!==128)return f.lastNeed=1,"�";if(f.lastNeed>2&&c.length>2&&(c[2]&192)!==128)return f.lastNeed=2,"�"}}function O(f){var c=this.lastTotal-this.lastNeed,E=w(this,f);if(E!==void 0)return E;if(this.lastNeed<=f.length)return f.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,c,0,f.length),this.lastNeed-=f.length}function T(f,c){var E=u(this,f,c);if(!this.lastNeed)return f.toString("utf8",c);this.lastTotal=E;var C=f.length-(E-this.lastNeed);return f.copy(this.lastChar,0,C),f.toString("utf8",c,C)}function k(f){var c=f&&f.length?this.write(f):"";return this.lastNeed?c+"�":c}function W(f,c){if((f.length-c)%2===0){var E=f.toString("utf16le",c);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",c,f.length-1)}function m(f){var c=f&&f.length?this.write(f):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,E)}return c}function q(f,c){var E=(f.length-c)%3;return E===0?f.toString("base64",c):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",c,f.length-E))}function $(f){var c=f&&f.length?this.write(f):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function x(f){return f.toString(this.encoding)}function A(f){return f&&f.length?this.write(f):""}return Hr}function Ht(r){"@babel/helpers - typeof";return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(r)}function Ts(r,e){if(Ht(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Ht(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Is(r){var e=Ts(r,"string");return Ht(e)=="symbol"?e:e+""}function pe(r,e,t){return(e=Is(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ei(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function He(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ei(Object(t),!0).forEach(function(n){pe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ei(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var zr={exports:{}},Gr={exports:{}},Kr,ti;function Ie(){if(ti)return Kr;ti=1;class r extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let a=0;a<t.length;a++)n+=`    ${t[a].stack}
`;super(n),this.name="AggregateError",this.errors=t}}return Kr={AggregateError:r,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},Kr}var Vr={exports:{}},Jr,ri;function bo(){return ri||(ri=1,Jr={format(r,...e){return r.replace(/%([sdifj])/g,function(...[t,n]){const a=e.shift();return n==="f"?a.toFixed(6):n==="j"?JSON.stringify(a):n==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),Jr}var Yr,ni;function xe(){if(ni)return Yr;ni=1;const{format:r,inspect:e}=bo(),{AggregateError:t}=Ie(),n=globalThis.AggregateError||t,a=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,w="__node_internal_",O={};function T(A,f){if(!A)throw new O.ERR_INTERNAL_ASSERTION(f)}function k(A){let f="",c=A.length;const E=A[0]==="-"?1:0;for(;c>=E+4;c-=3)f=`_${A.slice(c-3,c)}${f}`;return`${A.slice(0,c)}${f}`}function W(A,f,c){if(typeof f=="function")return T(f.length<=c.length,`Code: ${A}; The provided arguments length (${c.length}) does not match the required ones (${f.length}).`),f(...c);const E=(f.match(/%[dfijoOs]/g)||[]).length;return T(E===c.length,`Code: ${A}; The provided arguments length (${c.length}) does not match the required ones (${E}).`),c.length===0?f:r(f,...c)}function m(A,f,c){c||(c=Error);class E extends c{constructor(...N){super(W(A,f,N))}toString(){return`${this.name} [${A}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:c.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${A}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=A,E.prototype[a]=!0,O[A]=E}function q(A){const f=w+A.name;return Object.defineProperty(A,"name",{value:f}),A}function $(A,f){if(A&&f&&A!==f){if(Array.isArray(f.errors))return f.errors.push(A),f;const c=new n([f,A],f.message);return c.code=f.code,c}return A||f}class x extends Error{constructor(f="The operation was aborted",c=void 0){if(c!==void 0&&typeof c!="object")throw new O.ERR_INVALID_ARG_TYPE("options","Object",c);super(f,c),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(A,f,c)=>{T(typeof A=="string","'name' must be a string"),Array.isArray(f)||(f=[f]);let E="The ";A.endsWith(" argument")?E+=`${A} `:E+=`"${A}" ${A.includes(".")?"property":"argument"} `,E+="must be ";const C=[],N=[],G=[];for(const i of f)T(typeof i=="string","All expected entries have to be of type string"),o.includes(i)?C.push(i.toLowerCase()):u.test(i)?N.push(i):(T(i!=="object",'The value "object" should be written as "Object"'),G.push(i));if(N.length>0){const i=C.indexOf("object");i!==-1&&(C.splice(C,i,1),N.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const i=C.pop();E+=`one of type ${C.join(", ")}, or ${i}`}}(N.length>0||G.length>0)&&(E+=" or ")}if(N.length>0){switch(N.length){case 1:E+=`an instance of ${N[0]}`;break;case 2:E+=`an instance of ${N[0]} or ${N[1]}`;break;default:{const i=N.pop();E+=`an instance of ${N.join(", ")}, or ${i}`}}G.length>0&&(E+=" or ")}switch(G.length){case 0:break;case 1:G[0].toLowerCase()!==G[0]&&(E+="an "),E+=`${G[0]}`;break;case 2:E+=`one of ${G[0]} or ${G[1]}`;break;default:{const i=G.pop();E+=`one of ${G.join(", ")}, or ${i}`}}if(c==null)E+=`. Received ${c}`;else if(typeof c=="function"&&c.name)E+=`. Received function ${c.name}`;else if(typeof c=="object"){var Y;if((Y=c.constructor)!==null&&Y!==void 0&&Y.name)E+=`. Received an instance of ${c.constructor.name}`;else{const i=e(c,{depth:-1});E+=`. Received ${i}`}}else{let i=e(c,{colors:!1});i.length>25&&(i=`${i.slice(0,25)}...`),E+=`. Received type ${typeof c} (${i})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(A,f,c="is invalid")=>{let E=e(f);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${A.includes(".")?"property":"argument"} '${A}' ${c}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(A,f,c)=>{var E;const C=c!=null&&(E=c.constructor)!==null&&E!==void 0&&E.name?`instance of ${c.constructor.name}`:`type ${typeof c}`;return`Expected ${A} to be returned from the "${f}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(...A)=>{T(A.length>0,"At least one arg needs to be specified");let f;const c=A.length;switch(A=(Array.isArray(A)?A:[A]).map(E=>`"${E}"`).join(" or "),c){case 1:f+=`The ${A[0]} argument`;break;case 2:f+=`The ${A[0]} and ${A[1]} arguments`;break;default:{const E=A.pop();f+=`The ${A.join(", ")}, and ${E} arguments`}break}return`${f} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(A,f,c)=>{T(f,'Missing "range" argument');let E;if(Number.isInteger(c)&&Math.abs(c)>2**32)E=k(String(c));else if(typeof c=="bigint"){E=String(c);const C=BigInt(2)**BigInt(32);(c>C||c<-C)&&(E=k(E)),E+="n"}else E=e(c);return`The value of "${A}" is out of range. It must be ${f}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Yr={AbortError:x,aggregateTwoErrors:q($),hideStackFrames:q,codes:O},Yr}var Wt={exports:{}},ii;function zt(){if(ii)return Wt.exports;ii=1;const{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Wt.exports=r,Wt.exports.AbortSignal=e,Wt.exports.default=r,Wt.exports}var oi;function je(){return oi||(oi=1,function(r){const e=At(),{format:t,inspect:n}=bo(),{codes:{ERR_INVALID_ARG_TYPE:a}}=xe(),{kResistStopPropagation:o,AggregateError:u,SymbolDispose:w}=Ie(),O=globalThis.AbortSignal||zt().AbortSignal,T=globalThis.AbortController||zt().AbortController,k=Object.getPrototypeOf(async function(){}).constructor,W=globalThis.Blob||e.Blob,m=typeof W<"u"?function(A){return A instanceof W}:function(A){return!1},q=(x,A)=>{if(x!==void 0&&(x===null||typeof x!="object"||!("aborted"in x)))throw new a(A,"AbortSignal",x)},$=(x,A)=>{if(typeof x!="function")throw new a(A,"Function",x)};r.exports={AggregateError:u,kEmptyObject:Object.freeze({}),once(x){let A=!1;return function(...f){A||(A=!0,x.apply(this,f))}},createDeferredPromise:function(){let x,A;return{promise:new Promise((c,E)=>{x=c,A=E}),resolve:x,reject:A}},promisify(x){return new Promise((A,f)=>{x((c,...E)=>c?f(c):A(...E))})},debuglog(){return function(){}},format:t,inspect:n,types:{isAsyncFunction(x){return x instanceof k},isArrayBufferView(x){return ArrayBuffer.isView(x)}},isBlob:m,deprecate(x,A){return x},addAbortListener:Gt().addAbortListener||function(A,f){if(A===void 0)throw new a("signal","AbortSignal",A);q(A,"signal"),$(f,"listener");let c;return A.aborted?queueMicrotask(()=>f()):(A.addEventListener("abort",f,{__proto__:null,once:!0,[o]:!0}),c=()=>{A.removeEventListener("abort",f)}),{__proto__:null,[w](){var E;(E=c)===null||E===void 0||E()}}},AbortSignalAny:O.any||function(A){if(A.length===1)return A[0];const f=new T,c=()=>f.abort();return A.forEach(E=>{q(E,"signals"),E.addEventListener("abort",c,{once:!0})}),f.signal.addEventListener("abort",()=>{A.forEach(E=>E.removeEventListener("abort",c))},{once:!0}),f.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Vr)),Vr.exports}var lr={},Xr,si;function Kt(){if(si)return Xr;si=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:a,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:w,NumberParseInt:O,ObjectPrototypeHasOwnProperty:T,RegExpPrototypeExec:k,String:W,StringPrototypeToUpperCase:m,StringPrototypeTrim:q}=Ie(),{hideStackFrames:$,codes:{ERR_SOCKET_BAD_PORT:x,ERR_INVALID_ARG_TYPE:A,ERR_INVALID_ARG_VALUE:f,ERR_OUT_OF_RANGE:c,ERR_UNKNOWN_SIGNAL:E}}=xe(),{normalizeEncoding:C}=je(),{isAsyncFunction:N,isArrayBufferView:G}=je().types,Y={};function i(L){return L===(L|0)}function h(L){return L===L>>>0}const s=/^[0-7]+$/,d="must be a 32-bit unsigned integer or an octal string";function p(L,X,te){if(typeof L>"u"&&(L=te),typeof L=="string"){if(k(s,L)===null)throw new f(X,L,d);L=O(L,8)}return v(L,X),L}const l=$((L,X,te=w,J=u)=>{if(typeof L!="number")throw new A(X,"number",L);if(!a(L))throw new c(X,"an integer",L);if(L<te||L>J)throw new c(X,`>= ${te} && <= ${J}`,L)}),I=$((L,X,te=-2147483648,J=2147483647)=>{if(typeof L!="number")throw new A(X,"number",L);if(!a(L))throw new c(X,"an integer",L);if(L<te||L>J)throw new c(X,`>= ${te} && <= ${J}`,L)}),v=$((L,X,te=!1)=>{if(typeof L!="number")throw new A(X,"number",L);if(!a(L))throw new c(X,"an integer",L);const J=te?1:0,we=4294967295;if(L<J||L>we)throw new c(X,`>= ${J} && <= ${we}`,L)});function R(L,X){if(typeof L!="string")throw new A(X,"string",L)}function j(L,X,te=void 0,J){if(typeof L!="number")throw new A(X,"number",L);if(te!=null&&L<te||J!=null&&L>J||(te!=null||J!=null)&&o(L))throw new c(X,`${te!=null?`>= ${te}`:""}${te!=null&&J!=null?" && ":""}${J!=null?`<= ${J}`:""}`,L)}const b=$((L,X,te)=>{if(!e(te,L)){const we="must be one of: "+t(n(te,Re=>typeof Re=="string"?`'${Re}'`:W(Re)),", ");throw new f(X,L,we)}});function F(L,X){if(typeof L!="boolean")throw new A(X,"boolean",L)}function _(L,X,te){return L==null||!T(L,X)?te:L[X]}const U=$((L,X,te=null)=>{const J=_(te,"allowArray",!1),we=_(te,"allowFunction",!1);if(!_(te,"nullable",!1)&&L===null||!J&&r(L)||typeof L!="object"&&(!we||typeof L!="function"))throw new A(X,"Object",L)}),Q=$((L,X)=>{if(L!=null&&typeof L!="object"&&typeof L!="function")throw new A(X,"a dictionary",L)}),H=$((L,X,te=0)=>{if(!r(L))throw new A(X,"Array",L);if(L.length<te){const J=`must be longer than ${te}`;throw new f(X,L,J)}});function Z(L,X){H(L,X);for(let te=0;te<L.length;te++)R(L[te],`${X}[${te}]`)}function re(L,X){H(L,X);for(let te=0;te<L.length;te++)F(L[te],`${X}[${te}]`)}function ue(L,X){H(L,X);for(let te=0;te<L.length;te++){const J=L[te],we=`${X}[${te}]`;if(J==null)throw new A(we,"AbortSignal",J);fe(J,we)}}function le(L,X="signal"){if(R(L,X),Y[L]===void 0)throw Y[m(L)]!==void 0?new E(L+" (signals must use all capital letters)"):new E(L)}const K=$((L,X="buffer")=>{if(!G(L))throw new A(X,["Buffer","TypedArray","DataView"],L)});function V(L,X){const te=C(X),J=L.length;if(te==="hex"&&J%2!==0)throw new f("encoding",X,`is invalid for data of length ${J}`)}function ae(L,X="Port",te=!0){if(typeof L!="number"&&typeof L!="string"||typeof L=="string"&&q(L).length===0||+L!==+L>>>0||L>65535||L===0&&!te)throw new x(X,L,te);return L|0}const fe=$((L,X)=>{if(L!==void 0&&(L===null||typeof L!="object"||!("aborted"in L)))throw new A(X,"AbortSignal",L)}),he=$((L,X)=>{if(typeof L!="function")throw new A(X,"Function",L)}),P=$((L,X)=>{if(typeof L!="function"||N(L))throw new A(X,"Function",L)}),M=$((L,X)=>{if(L!==void 0)throw new A(X,"undefined",L)});function B(L,X,te){if(!e(te,L))throw new A(X,`('${t(te,"|")}')`,L)}const oe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ie(L,X){if(typeof L>"u"||!k(oe,L))throw new f(X,L,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ne(L){if(typeof L=="string")return ie(L,"hints"),L;if(r(L)){const X=L.length;let te="";if(X===0)return te;for(let J=0;J<X;J++){const we=L[J];ie(we,"hints"),te+=we,J!==X-1&&(te+=", ")}return te}throw new f("hints",L,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Xr={isInt32:i,isUint32:h,parseFileMode:p,validateArray:H,validateStringArray:Z,validateBooleanArray:re,validateAbortSignalArray:ue,validateBoolean:F,validateBuffer:K,validateDictionary:Q,validateEncoding:V,validateFunction:he,validateInt32:I,validateInteger:l,validateNumber:j,validateObject:U,validateOneOf:b,validatePlainFunction:P,validatePort:ae,validateSignalName:le,validateString:R,validateUint32:v,validateUndefined:M,validateUnion:B,validateAbortSignal:fe,validateLinkHeaderValue:ne},Xr}var ur={exports:{}},Qr={},ai;function Rt(){return ai||(ai=1,function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var t={exports:{}},n=t.exports={},a,o;function u(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=u}catch{a=u}try{typeof clearTimeout=="function"?o=clearTimeout:o=w}catch{o=w}})();function O(C){if(a===setTimeout)return setTimeout(C,0);if((a===u||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function T(C){if(o===clearTimeout)return clearTimeout(C);if((o===w||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(C);try{return o(C)}catch{try{return o.call(null,C)}catch{return o.call(this,C)}}}var k=[],W=!1,m,q=-1;function $(){!W||!m||(W=!1,m.length?k=m.concat(k):q=-1,k.length&&x())}function x(){if(!W){var C=O($);W=!0;for(var N=k.length;N;){for(m=k,k=[];++q<N;)m&&m[q].run();q=-1,N=k.length}m=null,W=!1,T(C)}}n.nextTick=function(C){var N=new Array(arguments.length-1);if(arguments.length>1)for(var G=1;G<arguments.length;G++)N[G-1]=arguments[G];k.push(new A(C,N)),k.length===1&&!W&&O(x)};function A(C,N){this.fun=C,this.array=N}A.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function f(){}n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(C){return[]},n.binding=function(C){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(C){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};var c=t.exports;const E=e(c);r.default=E,r.process=E}(Qr)),Qr}var Zr,li;function ct(){if(li)return Zr;li=1;const{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Ie(),n=t("nodejs.stream.destroyed"),a=t("nodejs.stream.errored"),o=t("nodejs.stream.readable"),u=t("nodejs.stream.writable"),w=t("nodejs.stream.disturbed"),O=t("nodejs.webstream.isClosedPromise"),T=t("nodejs.webstream.controllerErrorFunction");function k(_,U=!1){var Q;return!!(_&&typeof _.pipe=="function"&&typeof _.on=="function"&&(!U||typeof _.pause=="function"&&typeof _.resume=="function")&&(!_._writableState||((Q=_._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!_._writableState||_._readableState))}function W(_){var U;return!!(_&&typeof _.write=="function"&&typeof _.on=="function"&&(!_._readableState||((U=_._writableState)===null||U===void 0?void 0:U.writable)!==!1))}function m(_){return!!(_&&typeof _.pipe=="function"&&_._readableState&&typeof _.on=="function"&&typeof _.write=="function")}function q(_){return _&&(_._readableState||_._writableState||typeof _.write=="function"&&typeof _.on=="function"||typeof _.pipe=="function"&&typeof _.on=="function")}function $(_){return!!(_&&!q(_)&&typeof _.pipeThrough=="function"&&typeof _.getReader=="function"&&typeof _.cancel=="function")}function x(_){return!!(_&&!q(_)&&typeof _.getWriter=="function"&&typeof _.abort=="function")}function A(_){return!!(_&&!q(_)&&typeof _.readable=="object"&&typeof _.writable=="object")}function f(_){return $(_)||x(_)||A(_)}function c(_,U){return _==null?!1:U===!0?typeof _[r]=="function":U===!1?typeof _[e]=="function":typeof _[r]=="function"||typeof _[e]=="function"}function E(_){if(!q(_))return null;const U=_._writableState,Q=_._readableState,H=U||Q;return!!(_.destroyed||_[n]||H!=null&&H.destroyed)}function C(_){if(!W(_))return null;if(_.writableEnded===!0)return!0;const U=_._writableState;return U!=null&&U.errored?!1:typeof(U==null?void 0:U.ended)!="boolean"?null:U.ended}function N(_,U){if(!W(_))return null;if(_.writableFinished===!0)return!0;const Q=_._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||U===!1&&Q.ended===!0&&Q.length===0)}function G(_){if(!k(_))return null;if(_.readableEnded===!0)return!0;const U=_._readableState;return!U||U.errored?!1:typeof(U==null?void 0:U.ended)!="boolean"?null:U.ended}function Y(_,U){if(!k(_))return null;const Q=_._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||U===!1&&Q.ended===!0&&Q.length===0)}function i(_){return _&&_[o]!=null?_[o]:typeof(_==null?void 0:_.readable)!="boolean"?null:E(_)?!1:k(_)&&_.readable&&!Y(_)}function h(_){return _&&_[u]!=null?_[u]:typeof(_==null?void 0:_.writable)!="boolean"?null:E(_)?!1:W(_)&&_.writable&&!C(_)}function s(_,U){return q(_)?E(_)?!0:!((U==null?void 0:U.readable)!==!1&&i(_)||(U==null?void 0:U.writable)!==!1&&h(_)):null}function d(_){var U,Q;return q(_)?_.writableErrored?_.writableErrored:(U=(Q=_._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&U!==void 0?U:null:null}function p(_){var U,Q;return q(_)?_.readableErrored?_.readableErrored:(U=(Q=_._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&U!==void 0?U:null:null}function l(_){if(!q(_))return null;if(typeof _.closed=="boolean")return _.closed;const U=_._writableState,Q=_._readableState;return typeof(U==null?void 0:U.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(U==null?void 0:U.closed)||(Q==null?void 0:Q.closed):typeof _._closed=="boolean"&&I(_)?_._closed:null}function I(_){return typeof _._closed=="boolean"&&typeof _._defaultKeepAlive=="boolean"&&typeof _._removedConnection=="boolean"&&typeof _._removedContLen=="boolean"}function v(_){return typeof _._sent100=="boolean"&&I(_)}function R(_){var U;return typeof _._consuming=="boolean"&&typeof _._dumped=="boolean"&&((U=_.req)===null||U===void 0?void 0:U.upgradeOrConnect)===void 0}function j(_){if(!q(_))return null;const U=_._writableState,Q=_._readableState,H=U||Q;return!H&&v(_)||!!(H&&H.autoDestroy&&H.emitClose&&H.closed===!1)}function b(_){var U;return!!(_&&((U=_[w])!==null&&U!==void 0?U:_.readableDidRead||_.readableAborted))}function F(_){var U,Q,H,Z,re,ue,le,K,V,ae;return!!(_&&((U=(Q=(H=(Z=(re=(ue=_[a])!==null&&ue!==void 0?ue:_.readableErrored)!==null&&re!==void 0?re:_.writableErrored)!==null&&Z!==void 0?Z:(le=_._readableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&H!==void 0?H:(K=_._writableState)===null||K===void 0?void 0:K.errorEmitted)!==null&&Q!==void 0?Q:(V=_._readableState)===null||V===void 0?void 0:V.errored)!==null&&U!==void 0?U:!((ae=_._writableState)===null||ae===void 0)&&ae.errored))}return Zr={isDestroyed:E,kIsDestroyed:n,isDisturbed:b,kIsDisturbed:w,isErrored:F,kIsErrored:a,isReadable:i,kIsReadable:o,kIsClosedPromise:O,kControllerErrorFunction:T,kIsWritable:u,isClosed:l,isDuplexNodeStream:m,isFinished:s,isIterable:c,isReadableNodeStream:k,isReadableStream:$,isReadableEnded:G,isReadableFinished:Y,isReadableErrored:p,isNodeStream:q,isWebStream:f,isWritable:h,isWritableNodeStream:W,isWritableStream:x,isWritableEnded:C,isWritableFinished:N,isWritableErrored:d,isServerRequest:R,isServerResponse:v,willEmitClose:j,isTransformStream:A},Zr}var ui;function gt(){if(ui)return ur.exports;ui=1;const r=Rt(),{AbortError:e,codes:t}=xe(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:a}=t,{kEmptyObject:o,once:u}=je(),{validateAbortSignal:w,validateFunction:O,validateObject:T,validateBoolean:k}=Kt(),{Promise:W,PromisePrototypeThen:m,SymbolDispose:q}=Ie(),{isClosed:$,isReadable:x,isReadableNodeStream:A,isReadableStream:f,isReadableFinished:c,isReadableErrored:E,isWritable:C,isWritableNodeStream:N,isWritableStream:G,isWritableFinished:Y,isWritableErrored:i,isNodeStream:h,willEmitClose:s,kIsClosedPromise:d}=ct();let p;function l(b){return b.setHeader&&typeof b.abort=="function"}const I=()=>{};function v(b,F,_){var U,Q;if(arguments.length===2?(_=F,F=o):F==null?F=o:T(F,"options"),O(_,"callback"),w(F.signal,"options.signal"),_=u(_),f(b)||G(b))return R(b,F,_);if(!h(b))throw new n("stream",["ReadableStream","WritableStream","Stream"],b);const H=(U=F.readable)!==null&&U!==void 0?U:A(b),Z=(Q=F.writable)!==null&&Q!==void 0?Q:N(b),re=b._writableState,ue=b._readableState,le=()=>{b.writable||ae()};let K=s(b)&&A(b)===H&&N(b)===Z,V=Y(b,!1);const ae=()=>{V=!0,b.destroyed&&(K=!1),!(K&&(!b.readable||H))&&(!H||fe)&&_.call(b)};let fe=c(b,!1);const he=()=>{fe=!0,b.destroyed&&(K=!1),!(K&&(!b.writable||Z))&&(!Z||V)&&_.call(b)},P=L=>{_.call(b,L)};let M=$(b);const B=()=>{M=!0;const L=i(b)||E(b);if(L&&typeof L!="boolean")return _.call(b,L);if(H&&!fe&&A(b,!0)&&!c(b,!1))return _.call(b,new a);if(Z&&!V&&!Y(b,!1))return _.call(b,new a);_.call(b)},oe=()=>{M=!0;const L=i(b)||E(b);if(L&&typeof L!="boolean")return _.call(b,L);_.call(b)},ie=()=>{b.req.on("finish",ae)};l(b)?(b.on("complete",ae),K||b.on("abort",B),b.req?ie():b.on("request",ie)):Z&&!re&&(b.on("end",le),b.on("close",le)),!K&&typeof b.aborted=="boolean"&&b.on("aborted",B),b.on("end",he),b.on("finish",ae),F.error!==!1&&b.on("error",P),b.on("close",B),M?r.nextTick(B):re!=null&&re.errorEmitted||ue!=null&&ue.errorEmitted?K||r.nextTick(oe):(!H&&(!K||x(b))&&(V||C(b)===!1)||!Z&&(!K||C(b))&&(fe||x(b)===!1)||ue&&b.req&&b.aborted)&&r.nextTick(oe);const ne=()=>{_=I,b.removeListener("aborted",B),b.removeListener("complete",ae),b.removeListener("abort",B),b.removeListener("request",ie),b.req&&b.req.removeListener("finish",ae),b.removeListener("end",le),b.removeListener("close",le),b.removeListener("finish",ae),b.removeListener("end",he),b.removeListener("error",P),b.removeListener("close",B)};if(F.signal&&!M){const L=()=>{const X=_;ne(),X.call(b,new e(void 0,{cause:F.signal.reason}))};if(F.signal.aborted)r.nextTick(L);else{p=p||je().addAbortListener;const X=p(F.signal,L),te=_;_=u((...J)=>{X[q](),te.apply(b,J)})}}return ne}function R(b,F,_){let U=!1,Q=I;if(F.signal)if(Q=()=>{U=!0,_.call(b,new e(void 0,{cause:F.signal.reason}))},F.signal.aborted)r.nextTick(Q);else{p=p||je().addAbortListener;const Z=p(F.signal,Q),re=_;_=u((...ue)=>{Z[q](),re.apply(b,ue)})}const H=(...Z)=>{U||r.nextTick(()=>_.apply(b,Z))};return m(b[d].promise,H,H),I}function j(b,F){var _;let U=!1;return F===null&&(F=o),(_=F)!==null&&_!==void 0&&_.cleanup&&(k(F.cleanup,"cleanup"),U=F.cleanup),new W((Q,H)=>{const Z=v(b,F,re=>{U&&Z(),re?H(re):Q()})})}return ur.exports=v,ur.exports.finished=j,ur.exports}var en,fi;function Ct(){if(fi)return en;fi=1;const r=Rt(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=xe(),{Symbol:a}=Ie(),{kIsDestroyed:o,isDestroyed:u,isFinished:w,isServerRequest:O}=ct(),T=a("kDestroy"),k=a("kConstruct");function W(s,d,p){s&&(s.stack,d&&!d.errored&&(d.errored=s),p&&!p.errored&&(p.errored=s))}function m(s,d){const p=this._readableState,l=this._writableState,I=l||p;return l!=null&&l.destroyed||p!=null&&p.destroyed?(typeof d=="function"&&d(),this):(W(s,l,p),l&&(l.destroyed=!0),p&&(p.destroyed=!0),I.constructed?q(this,s,d):this.once(T,function(v){q(this,e(v,s),d)}),this)}function q(s,d,p){let l=!1;function I(v){if(l)return;l=!0;const R=s._readableState,j=s._writableState;W(v,j,R),j&&(j.closed=!0),R&&(R.closed=!0),typeof p=="function"&&p(v),v?r.nextTick($,s,v):r.nextTick(x,s)}try{s._destroy(d||null,I)}catch(v){I(v)}}function $(s,d){A(s,d),x(s)}function x(s){const d=s._readableState,p=s._writableState;p&&(p.closeEmitted=!0),d&&(d.closeEmitted=!0),(p!=null&&p.emitClose||d!=null&&d.emitClose)&&s.emit("close")}function A(s,d){const p=s._readableState,l=s._writableState;l!=null&&l.errorEmitted||p!=null&&p.errorEmitted||(l&&(l.errorEmitted=!0),p&&(p.errorEmitted=!0),s.emit("error",d))}function f(){const s=this._readableState,d=this._writableState;s&&(s.constructed=!0,s.closed=!1,s.closeEmitted=!1,s.destroyed=!1,s.errored=null,s.errorEmitted=!1,s.reading=!1,s.ended=s.readable===!1,s.endEmitted=s.readable===!1),d&&(d.constructed=!0,d.destroyed=!1,d.closed=!1,d.closeEmitted=!1,d.errored=null,d.errorEmitted=!1,d.finalCalled=!1,d.prefinished=!1,d.ended=d.writable===!1,d.ending=d.writable===!1,d.finished=d.writable===!1)}function c(s,d,p){const l=s._readableState,I=s._writableState;if(I!=null&&I.destroyed||l!=null&&l.destroyed)return this;l!=null&&l.autoDestroy||I!=null&&I.autoDestroy?s.destroy(d):d&&(d.stack,I&&!I.errored&&(I.errored=d),l&&!l.errored&&(l.errored=d),p?r.nextTick(A,s,d):A(s,d))}function E(s,d){if(typeof s._construct!="function")return;const p=s._readableState,l=s._writableState;p&&(p.constructed=!1),l&&(l.constructed=!1),s.once(k,d),!(s.listenerCount(k)>1)&&r.nextTick(C,s)}function C(s){let d=!1;function p(l){if(d){c(s,l??new t);return}d=!0;const I=s._readableState,v=s._writableState,R=v||I;I&&(I.constructed=!0),v&&(v.constructed=!0),R.destroyed?s.emit(T,l):l?c(s,l,!0):r.nextTick(N,s)}try{s._construct(l=>{r.nextTick(p,l)})}catch(l){r.nextTick(p,l)}}function N(s){s.emit(k)}function G(s){return(s==null?void 0:s.setHeader)&&typeof s.abort=="function"}function Y(s){s.emit("close")}function i(s,d){s.emit("error",d),r.nextTick(Y,s)}function h(s,d){!s||u(s)||(!d&&!w(s)&&(d=new n),O(s)?(s.socket=null,s.destroy(d)):G(s)?s.abort():G(s.req)?s.req.abort():typeof s.destroy=="function"?s.destroy(d):typeof s.close=="function"?s.close():d?r.nextTick(i,s,d):r.nextTick(Y,s),s.destroyed||(s[o]=!0))}return en={construct:E,destroyer:h,destroy:m,undestroy:f,errorOrDestroy:c},en}var tn,ci;function Mn(){if(ci)return tn;ci=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Ie(),{EventEmitter:t}=Gt();function n(o){t.call(this,o)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(o,u){const w=this;function O(x){o.writable&&o.write(x)===!1&&w.pause&&w.pause()}w.on("data",O);function T(){w.readable&&w.resume&&w.resume()}o.on("drain",T),!o._isStdio&&(!u||u.end!==!1)&&(w.on("end",W),w.on("close",m));let k=!1;function W(){k||(k=!0,o.end())}function m(){k||(k=!0,typeof o.destroy=="function"&&o.destroy())}function q(x){$(),t.listenerCount(this,"error")===0&&this.emit("error",x)}a(w,"error",q),a(o,"error",q);function $(){w.removeListener("data",O),o.removeListener("drain",T),w.removeListener("end",W),w.removeListener("close",m),w.removeListener("error",q),o.removeListener("error",q),w.removeListener("end",$),w.removeListener("close",$),o.removeListener("close",$)}return w.on("end",$),w.on("close",$),o.on("close",$),o.emit("pipe",w),o};function a(o,u,w){if(typeof o.prependListener=="function")return o.prependListener(u,w);!o._events||!o._events[u]?o.on(u,w):r(o._events[u])?o._events[u].unshift(w):o._events[u]=[w,o._events[u]]}return tn={Stream:n,prependListener:a},tn}var rn={exports:{}},di;function Er(){return di||(di=1,function(r){const{SymbolDispose:e}=Ie(),{AbortError:t,codes:n}=xe(),{isNodeStream:a,isWebStream:o,kControllerErrorFunction:u}=ct(),w=gt(),{ERR_INVALID_ARG_TYPE:O}=n;let T;const k=(W,m)=>{if(typeof W!="object"||!("aborted"in W))throw new O(m,"AbortSignal",W)};r.exports.addAbortSignal=function(m,q){if(k(m,"signal"),!a(q)&&!o(q))throw new O("stream",["ReadableStream","WritableStream","Stream"],q);return r.exports.addAbortSignalNoValidate(m,q)},r.exports.addAbortSignalNoValidate=function(W,m){if(typeof W!="object"||!("aborted"in W))return m;const q=a(m)?()=>{m.destroy(new t(void 0,{cause:W.reason}))}:()=>{m[u](new t(void 0,{cause:W.reason}))};if(W.aborted)q();else{T=T||je().addAbortListener;const $=T(W,q);w(m,$[e])}return m}}(rn)),rn.exports}var nn,hi;function Os(){if(hi)return nn;hi=1;const{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Ie(),{Buffer:a}=At(),{inspect:o}=je();return nn=class{constructor(){this.head=null,this.tail=null,this.length=0}push(w){const O={data:w,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}unshift(w){const O={data:w,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length}shift(){if(this.length===0)return;const w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}clear(){this.head=this.tail=null,this.length=0}join(w){if(this.length===0)return"";let O=this.head,T=""+O.data;for(;(O=O.next)!==null;)T+=w+O.data;return T}concat(w){if(this.length===0)return a.alloc(0);const O=a.allocUnsafe(w>>>0);let T=this.head,k=0;for(;T;)t(O,T.data,k),k+=T.data.length,T=T.next;return O}consume(w,O){const T=this.head.data;if(w<T.length){const k=T.slice(0,w);return this.head.data=T.slice(w),k}return w===T.length?this.shift():O?this._getString(w):this._getBuffer(w)}first(){return this.head.data}*[e](){for(let w=this.head;w;w=w.next)yield w.data}_getString(w){let O="",T=this.head,k=0;do{const W=T.data;if(w>W.length)O+=W,w-=W.length;else{w===W.length?(O+=W,++k,T.next?this.head=T.next:this.head=this.tail=null):(O+=r(W,0,w),this.head=T,T.data=r(W,w));break}++k}while((T=T.next)!==null);return this.length-=k,O}_getBuffer(w){const O=a.allocUnsafe(w),T=w;let k=this.head,W=0;do{const m=k.data;if(w>m.length)t(O,m,T-w),w-=m.length;else{w===m.length?(t(O,m,T-w),++W,k.next?this.head=k.next:this.head=this.tail=null):(t(O,new n(m.buffer,m.byteOffset,w),T-w),this.head=k,k.data=m.slice(w));break}++W}while((k=k.next)!==null);return this.length-=W,O}[Symbol.for("nodejs.util.inspect.custom")](w,O){return o(this,{...O,depth:0,customInspect:!1})}},nn}var on,pi;function Sr(){if(pi)return on;pi=1;const{MathFloor:r,NumberIsInteger:e}=Ie(),{validateInteger:t}=Kt(),{ERR_INVALID_ARG_VALUE:n}=xe().codes;let a=16*1024,o=16;function u(k,W,m){return k.highWaterMark!=null?k.highWaterMark:W?k[m]:null}function w(k){return k?o:a}function O(k,W){t(W,"value",0),k?o=W:a=W}function T(k,W,m,q){const $=u(W,q,m);if($!=null){if(!e($)||$<0){const x=q?`options.${m}`:"options.highWaterMark";throw new n(x,$)}return r($)}return w(k.objectMode)}return on={getHighWaterMark:T,getDefaultHighWaterMark:w,setDefaultHighWaterMark:O},on}var sn,gi;function yo(){if(gi)return sn;gi=1;const r=Rt(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Ie(),{Buffer:a}=At(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:u}=xe().codes;function w(O,T,k){let W;if(typeof T=="string"||T instanceof a)return new O({objectMode:!0,...k,read(){this.push(T),this.push(null)}});let m;if(T&&T[t])m=!0,W=T[t]();else if(T&&T[n])m=!1,W=T[n]();else throw new o("iterable",["Iterable"],T);const q=new O({objectMode:!0,highWaterMark:1,...k});let $=!1;q._read=function(){$||($=!0,A())},q._destroy=function(f,c){e(x(f),()=>r.nextTick(c,f),E=>r.nextTick(c,E||f))};async function x(f){const c=f!=null,E=typeof W.throw=="function";if(c&&E){const{value:C,done:N}=await W.throw(f);if(await C,N)return}if(typeof W.return=="function"){const{value:C}=await W.return();await C}}async function A(){for(;;){try{const{value:f,done:c}=m?await W.next():W.next();if(c)q.push(null);else{const E=f&&typeof f.then=="function"?await f:f;if(E===null)throw $=!1,new u;if(q.push(E))continue;$=!1}}catch(f){q.destroy(f)}break}}return q}return sn=w,sn}var an,wi;function Ar(){if(wi)return an;wi=1;const r=Rt(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:a,ObjectDefineProperties:o,ObjectKeys:u,ObjectSetPrototypeOf:w,Promise:O,SafeSet:T,SymbolAsyncDispose:k,SymbolAsyncIterator:W,Symbol:m}=Ie();an=J,J.ReadableState=te;const{EventEmitter:q}=Gt(),{Stream:$,prependListener:x}=Mn(),{Buffer:A}=At(),{addAbortSignal:f}=Er(),c=gt();let E=je().debuglog("stream",g=>{E=g});const C=Os(),N=Ct(),{getHighWaterMark:G,getDefaultHighWaterMark:Y}=Sr(),{aggregateTwoErrors:i,codes:{ERR_INVALID_ARG_TYPE:h,ERR_METHOD_NOT_IMPLEMENTED:s,ERR_OUT_OF_RANGE:d,ERR_STREAM_PUSH_AFTER_EOF:p,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:l},AbortError:I}=xe(),{validateObject:v}=Kt(),R=m("kPaused"),{StringDecoder:j}=Rs(),b=yo();w(J.prototype,$.prototype),w(J,$);const F=()=>{},{errorOrDestroy:_}=N,U=1,Q=2,H=4,Z=8,re=16,ue=32,le=64,K=128,V=256,ae=512,fe=1024,he=2048,P=4096,M=8192,B=16384,oe=32768,ie=65536,ne=1<<17,L=1<<18;function X(g){return{enumerable:!1,get(){return(this.state&g)!==0},set(S){S?this.state|=g:this.state&=~g}}}o(te.prototype,{objectMode:X(U),ended:X(Q),endEmitted:X(H),reading:X(Z),constructed:X(re),sync:X(ue),needReadable:X(le),emittedReadable:X(K),readableListening:X(V),resumeScheduled:X(ae),errorEmitted:X(fe),emitClose:X(he),autoDestroy:X(P),destroyed:X(M),closed:X(B),closeEmitted:X(oe),multiAwaitDrain:X(ie),readingMore:X(ne),dataEmitted:X(L)});function te(g,S,se){typeof se!="boolean"&&(se=S instanceof ut()),this.state=he|P|re|ue,g&&g.objectMode&&(this.state|=U),se&&g&&g.readableObjectMode&&(this.state|=U),this.highWaterMark=g?G(this,g,"readableHighWaterMark",se):Y(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[R]=null,g&&g.emitClose===!1&&(this.state&=-2049),g&&g.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=g&&g.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,g&&g.encoding&&(this.decoder=new j(g.encoding),this.encoding=g.encoding)}function J(g){if(!(this instanceof J))return new J(g);const S=this instanceof ut();this._readableState=new te(g,this,S),g&&(typeof g.read=="function"&&(this._read=g.read),typeof g.destroy=="function"&&(this._destroy=g.destroy),typeof g.construct=="function"&&(this._construct=g.construct),g.signal&&!S&&f(g.signal,this)),$.call(this,g),N.construct(this,()=>{this._readableState.needReadable&&Le(this,this._readableState)})}J.prototype.destroy=N.destroy,J.prototype._undestroy=N.undestroy,J.prototype._destroy=function(g,S){S(g)},J.prototype[q.captureRejectionSymbol]=function(g){this.destroy(g)},J.prototype[k]=function(){let g;return this.destroyed||(g=this.readableEnded?null:new I,this.destroy(g)),new O((S,se)=>c(this,ee=>ee&&ee!==g?se(ee):S(null)))},J.prototype.push=function(g,S){return we(this,g,S,!1)},J.prototype.unshift=function(g,S){return we(this,g,S,!0)};function we(g,S,se,ee){E("readableAddChunk",S);const ce=g._readableState;let Ce;if((ce.state&U)===0&&(typeof S=="string"?(se=se||ce.defaultEncoding,ce.encoding!==se&&(ee&&ce.encoding?S=A.from(S,se).toString(ce.encoding):(S=A.from(S,se),se=""))):S instanceof A?se="":$._isUint8Array(S)?(S=$._uint8ArrayToBuffer(S),se=""):S!=null&&(Ce=new h("chunk",["string","Buffer","Uint8Array"],S))),Ce)_(g,Ce);else if(S===null)ce.state&=-9,ke(g,ce);else if((ce.state&U)!==0||S&&S.length>0)if(ee)if((ce.state&H)!==0)_(g,new l);else{if(ce.destroyed||ce.errored)return!1;Re(g,ce,S,!0)}else if(ce.ended)_(g,new p);else{if(ce.destroyed||ce.errored)return!1;ce.state&=-9,ce.decoder&&!se?(S=ce.decoder.write(S),ce.objectMode||S.length!==0?Re(g,ce,S,!1):Le(g,ce)):Re(g,ce,S,!1)}else ee||(ce.state&=-9,Le(g,ce));return!ce.ended&&(ce.length<ce.highWaterMark||ce.length===0)}function Re(g,S,se,ee){S.flowing&&S.length===0&&!S.sync&&g.listenerCount("data")>0?((S.state&ie)!==0?S.awaitDrainWriters.clear():S.awaitDrainWriters=null,S.dataEmitted=!0,g.emit("data",se)):(S.length+=S.objectMode?1:se.length,ee?S.buffer.unshift(se):S.buffer.push(se),(S.state&le)!==0&&We(g)),Le(g,S)}J.prototype.isPaused=function(){const g=this._readableState;return g[R]===!0||g.flowing===!1},J.prototype.setEncoding=function(g){const S=new j(g);this._readableState.decoder=S,this._readableState.encoding=this._readableState.decoder.encoding;const se=this._readableState.buffer;let ee="";for(const ce of se)ee+=S.write(ce);return se.clear(),ee!==""&&se.push(ee),this._readableState.length=ee.length,this};const be=1073741824;function Pe(g){if(g>be)throw new d("size","<= 1GiB",g);return g--,g|=g>>>1,g|=g>>>2,g|=g>>>4,g|=g>>>8,g|=g>>>16,g++,g}function Ne(g,S){return g<=0||S.length===0&&S.ended?0:(S.state&U)!==0?1:n(g)?S.flowing&&S.length?S.buffer.first().length:S.length:g<=S.length?g:S.ended?S.length:0}J.prototype.read=function(g){E("read",g),g===void 0?g=NaN:t(g)||(g=a(g,10));const S=this._readableState,se=g;if(g>S.highWaterMark&&(S.highWaterMark=Pe(g)),g!==0&&(S.state&=-129),g===0&&S.needReadable&&((S.highWaterMark!==0?S.length>=S.highWaterMark:S.length>0)||S.ended))return E("read: emitReadable",S.length,S.ended),S.length===0&&S.ended?et(this):We(this),null;if(g=Ne(g,S),g===0&&S.ended)return S.length===0&&et(this),null;let ee=(S.state&le)!==0;if(E("need readable",ee),(S.length===0||S.length-g<S.highWaterMark)&&(ee=!0,E("length less than watermark",ee)),S.ended||S.reading||S.destroyed||S.errored||!S.constructed)ee=!1,E("reading, ended or constructing",ee);else if(ee){E("do read"),S.state|=Z|ue,S.length===0&&(S.state|=le);try{this._read(S.highWaterMark)}catch(Ce){_(this,Ce)}S.state&=-33,S.reading||(g=Ne(se,S))}let ce;return g>0?ce=Lt(g,S):ce=null,ce===null?(S.needReadable=S.length<=S.highWaterMark,g=0):(S.length-=g,S.multiAwaitDrain?S.awaitDrainWriters.clear():S.awaitDrainWriters=null),S.length===0&&(S.ended||(S.needReadable=!0),se!==g&&S.ended&&et(this)),ce!==null&&!S.errorEmitted&&!S.closeEmitted&&(S.dataEmitted=!0,this.emit("data",ce)),ce};function ke(g,S){if(E("onEofChunk"),!S.ended){if(S.decoder){const se=S.decoder.end();se&&se.length&&(S.buffer.push(se),S.length+=S.objectMode?1:se.length)}S.ended=!0,S.sync?We(g):(S.needReadable=!1,S.emittedReadable=!0,wt(g))}}function We(g){const S=g._readableState;E("emitReadable",S.needReadable,S.emittedReadable),S.needReadable=!1,S.emittedReadable||(E("emitReadable",S.flowing),S.emittedReadable=!0,r.nextTick(wt,g))}function wt(g){const S=g._readableState;E("emitReadable_",S.destroyed,S.length,S.ended),!S.destroyed&&!S.errored&&(S.length||S.ended)&&(g.emit("readable"),S.emittedReadable=!1),S.needReadable=!S.flowing&&!S.ended&&S.length<=S.highWaterMark,Qt(g)}function Le(g,S){!S.readingMore&&S.constructed&&(S.readingMore=!0,r.nextTick(Jt,g,S))}function Jt(g,S){for(;!S.reading&&!S.ended&&(S.length<S.highWaterMark||S.flowing&&S.length===0);){const se=S.length;if(E("maybeReadMore read 0"),g.read(0),se===S.length)break}S.readingMore=!1}J.prototype._read=function(g){throw new s("_read()")},J.prototype.pipe=function(g,S){const se=this,ee=this._readableState;ee.pipes.length===1&&(ee.multiAwaitDrain||(ee.multiAwaitDrain=!0,ee.awaitDrainWriters=new T(ee.awaitDrainWriters?[ee.awaitDrainWriters]:[]))),ee.pipes.push(g),E("pipe count=%d opts=%j",ee.pipes.length,S);const Ce=(!S||S.end!==!1)&&g!==r.stdout&&g!==r.stderr?er:_t;ee.endEmitted?r.nextTick(Ce):se.once("end",Ce),g.on("unpipe",Me);function Me(it,ze){E("onunpipe"),it===se&&ze&&ze.hasUnpiped===!1&&(ze.hasUnpiped=!0,xr())}function er(){E("onend"),g.end()}let rt,nt=!1;function xr(){E("cleanup"),g.removeListener("close",Dt),g.removeListener("finish",Je),rt&&g.removeListener("drain",rt),g.removeListener("error",Mt),g.removeListener("unpipe",Me),se.removeListener("end",er),se.removeListener("end",_t),se.removeListener("data",rr),nt=!0,rt&&ee.awaitDrainWriters&&(!g._writableState||g._writableState.needDrain)&&rt()}function tr(){nt||(ee.pipes.length===1&&ee.pipes[0]===g?(E("false write response, pause",0),ee.awaitDrainWriters=g,ee.multiAwaitDrain=!1):ee.pipes.length>1&&ee.pipes.includes(g)&&(E("false write response, pause",ee.awaitDrainWriters.size),ee.awaitDrainWriters.add(g)),se.pause()),rt||(rt=Yt(se,g),g.on("drain",rt))}se.on("data",rr);function rr(it){E("ondata");const ze=g.write(it);E("dest.write",ze),ze===!1&&tr()}function Mt(it){if(E("onerror",it),_t(),g.removeListener("error",Mt),g.listenerCount("error")===0){const ze=g._writableState||g._readableState;ze&&!ze.errorEmitted?_(g,it):g.emit("error",it)}}x(g,"error",Mt);function Dt(){g.removeListener("finish",Je),_t()}g.once("close",Dt);function Je(){E("onfinish"),g.removeListener("close",Dt),_t()}g.once("finish",Je);function _t(){E("unpipe"),se.unpipe(g)}return g.emit("pipe",se),g.writableNeedDrain===!0?tr():ee.flowing||(E("pipe resume"),se.resume()),g};function Yt(g,S){return function(){const ee=g._readableState;ee.awaitDrainWriters===S?(E("pipeOnDrain",1),ee.awaitDrainWriters=null):ee.multiAwaitDrain&&(E("pipeOnDrain",ee.awaitDrainWriters.size),ee.awaitDrainWriters.delete(S)),(!ee.awaitDrainWriters||ee.awaitDrainWriters.size===0)&&g.listenerCount("data")&&g.resume()}}J.prototype.unpipe=function(g){const S=this._readableState,se={hasUnpiped:!1};if(S.pipes.length===0)return this;if(!g){const ce=S.pipes;S.pipes=[],this.pause();for(let Ce=0;Ce<ce.length;Ce++)ce[Ce].emit("unpipe",this,{hasUnpiped:!1});return this}const ee=e(S.pipes,g);return ee===-1?this:(S.pipes.splice(ee,1),S.pipes.length===0&&this.pause(),g.emit("unpipe",this,se),this)},J.prototype.on=function(g,S){const se=$.prototype.on.call(this,g,S),ee=this._readableState;return g==="data"?(ee.readableListening=this.listenerCount("readable")>0,ee.flowing!==!1&&this.resume()):g==="readable"&&!ee.endEmitted&&!ee.readableListening&&(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,E("on readable",ee.length,ee.reading),ee.length?We(this):ee.reading||r.nextTick(Cr,this)),se},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(g,S){const se=$.prototype.removeListener.call(this,g,S);return g==="readable"&&r.nextTick(Xt,this),se},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(g){const S=$.prototype.removeAllListeners.apply(this,arguments);return(g==="readable"||g===void 0)&&r.nextTick(Xt,this),S};function Xt(g){const S=g._readableState;S.readableListening=g.listenerCount("readable")>0,S.resumeScheduled&&S[R]===!1?S.flowing=!0:g.listenerCount("data")>0?g.resume():S.readableListening||(S.flowing=null)}function Cr(g){E("readable nexttick read 0"),g.read(0)}J.prototype.resume=function(){const g=this._readableState;return g.flowing||(E("resume"),g.flowing=!g.readableListening,Ze(this,g)),g[R]=!1,this};function Ze(g,S){S.resumeScheduled||(S.resumeScheduled=!0,r.nextTick(Tt,g,S))}function Tt(g,S){E("resume",S.reading),S.reading||g.read(0),S.resumeScheduled=!1,g.emit("resume"),Qt(g),S.flowing&&!S.reading&&g.read(0)}J.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[R]=!0,this};function Qt(g){const S=g._readableState;for(E("flow",S.flowing);S.flowing&&g.read()!==null;);}J.prototype.wrap=function(g){let S=!1;g.on("data",ee=>{!this.push(ee)&&g.pause&&(S=!0,g.pause())}),g.on("end",()=>{this.push(null)}),g.on("error",ee=>{_(this,ee)}),g.on("close",()=>{this.destroy()}),g.on("destroy",()=>{this.destroy()}),this._read=()=>{S&&g.resume&&(S=!1,g.resume())};const se=u(g);for(let ee=1;ee<se.length;ee++){const ce=se[ee];this[ce]===void 0&&typeof g[ce]=="function"&&(this[ce]=g[ce].bind(g))}return this},J.prototype[W]=function(){return Pt(this)},J.prototype.iterator=function(g){return g!==void 0&&v(g,"options"),Pt(this,g)};function Pt(g,S){typeof g.read!="function"&&(g=J.wrap(g,{objectMode:!0}));const se=Pr(g,S);return se.stream=g,se}async function*Pr(g,S){let se=F;function ee(Me){this===g?(se(),se=F):se=Me}g.on("readable",ee);let ce;const Ce=c(g,{writable:!1},Me=>{ce=Me?i(ce,Me):null,se(),se=F});try{for(;;){const Me=g.destroyed?null:g.read();if(Me!==null)yield Me;else{if(ce)throw ce;if(ce===null)return;await new O(ee)}}}catch(Me){throw ce=i(ce,Me),ce}finally{(ce||(S==null?void 0:S.destroyOnReturn)!==!1)&&(ce===void 0||g._readableState.autoDestroy)?N.destroyer(g,null):(g.off("readable",ee),Ce())}}o(J.prototype,{readable:{__proto__:null,get(){const g=this._readableState;return!!g&&g.readable!==!1&&!g.destroyed&&!g.errorEmitted&&!g.endEmitted},set(g){this._readableState&&(this._readableState.readable=!!g)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(g){this._readableState&&(this._readableState.flowing=g)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(g){this._readableState&&(this._readableState.destroyed=g)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(te.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[R]!==!1},set(g){this[R]=!!g}}}),J._fromList=Lt;function Lt(g,S){if(S.length===0)return null;let se;return S.objectMode?se=S.buffer.shift():!g||g>=S.length?(S.decoder?se=S.buffer.join(""):S.buffer.length===1?se=S.buffer.first():se=S.buffer.concat(S.length),S.buffer.clear()):se=S.buffer.consume(g,S.decoder),se}function et(g){const S=g._readableState;E("endReadable",S.endEmitted),S.endEmitted||(S.ended=!0,r.nextTick(Lr,S,g))}function Lr(g,S){if(E("endReadableNT",g.endEmitted,g.length),!g.errored&&!g.closeEmitted&&!g.endEmitted&&g.length===0){if(g.endEmitted=!0,S.emit("end"),S.writable&&S.allowHalfOpen===!1)r.nextTick(tt,S);else if(g.autoDestroy){const se=S._writableState;(!se||se.autoDestroy&&(se.finished||se.writable===!1))&&S.destroy()}}}function tt(g){g.writable&&!g.writableEnded&&!g.destroyed&&g.end()}J.from=function(g,S){return b(J,g,S)};let xt;function Zt(){return xt===void 0&&(xt={}),xt}return J.fromWeb=function(g,S){return Zt().newStreamReadableFromReadableStream(g,S)},J.toWeb=function(g,S){return Zt().newReadableStreamFromStreamReadable(g,S)},J.wrap=function(g,S){var se,ee;return new J({objectMode:(se=(ee=g.readableObjectMode)!==null&&ee!==void 0?ee:g.objectMode)!==null&&se!==void 0?se:!0,...S,destroy(ce,Ce){N.destroyer(g,ce),Ce(ce)}}).wrap(g)},an}var ln,_i;function Dn(){if(_i)return ln;_i=1;const r=Rt(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:a,ObjectDefineProperties:o,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:w,Symbol:O,SymbolHasInstance:T}=Ie();ln=v,v.WritableState=l;const{EventEmitter:k}=Gt(),W=Mn().Stream,{Buffer:m}=At(),q=Ct(),{addAbortSignal:$}=Er(),{getHighWaterMark:x,getDefaultHighWaterMark:A}=Sr(),{ERR_INVALID_ARG_TYPE:f,ERR_METHOD_NOT_IMPLEMENTED:c,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:N,ERR_STREAM_ALREADY_FINISHED:G,ERR_STREAM_NULL_VALUES:Y,ERR_STREAM_WRITE_AFTER_END:i,ERR_UNKNOWN_ENCODING:h}=xe().codes,{errorOrDestroy:s}=q;u(v.prototype,W.prototype),u(v,W);function d(){}const p=O("kOnFinished");function l(P,M,B){typeof B!="boolean"&&(B=M instanceof ut()),this.objectMode=!!(P&&P.objectMode),B&&(this.objectMode=this.objectMode||!!(P&&P.writableObjectMode)),this.highWaterMark=P?x(this,P,"writableHighWaterMark",B):A(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const oe=!!(P&&P.decodeStrings===!1);this.decodeStrings=!oe,this.defaultEncoding=P&&P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=_.bind(void 0,M),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,I(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!P||P.emitClose!==!1,this.autoDestroy=!P||P.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[p]=[]}function I(P){P.buffered=[],P.bufferedIndex=0,P.allBuffers=!0,P.allNoop=!0}l.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},a(l.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function v(P){const M=this instanceof ut();if(!M&&!n(v,this))return new v(P);this._writableState=new l(P,this,M),P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final),typeof P.construct=="function"&&(this._construct=P.construct),P.signal&&$(P.signal,this)),W.call(this,P),q.construct(this,()=>{const B=this._writableState;B.writing||Z(this,B),K(this,B)})}a(v,T,{__proto__:null,value:function(P){return n(this,P)?!0:this!==v?!1:P&&P._writableState instanceof l}}),v.prototype.pipe=function(){s(this,new C)};function R(P,M,B,oe){const ie=P._writableState;if(typeof B=="function")oe=B,B=ie.defaultEncoding;else{if(!B)B=ie.defaultEncoding;else if(B!=="buffer"&&!m.isEncoding(B))throw new h(B);typeof oe!="function"&&(oe=d)}if(M===null)throw new Y;if(!ie.objectMode)if(typeof M=="string")ie.decodeStrings!==!1&&(M=m.from(M,B),B="buffer");else if(M instanceof m)B="buffer";else if(W._isUint8Array(M))M=W._uint8ArrayToBuffer(M),B="buffer";else throw new f("chunk",["string","Buffer","Uint8Array"],M);let ne;return ie.ending?ne=new i:ie.destroyed&&(ne=new N("write")),ne?(r.nextTick(oe,ne),s(P,ne,!0),ne):(ie.pendingcb++,j(P,ie,M,B,oe))}v.prototype.write=function(P,M,B){return R(this,P,M,B)===!0},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){const P=this._writableState;P.corked&&(P.corked--,P.writing||Z(this,P))},v.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=w(M)),!m.isEncoding(M))throw new h(M);return this._writableState.defaultEncoding=M,this};function j(P,M,B,oe,ie){const ne=M.objectMode?1:B.length;M.length+=ne;const L=M.length<M.highWaterMark;return L||(M.needDrain=!0),M.writing||M.corked||M.errored||!M.constructed?(M.buffered.push({chunk:B,encoding:oe,callback:ie}),M.allBuffers&&oe!=="buffer"&&(M.allBuffers=!1),M.allNoop&&ie!==d&&(M.allNoop=!1)):(M.writelen=ne,M.writecb=ie,M.writing=!0,M.sync=!0,P._write(B,oe,M.onwrite),M.sync=!1),L&&!M.errored&&!M.destroyed}function b(P,M,B,oe,ie,ne,L){M.writelen=oe,M.writecb=L,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new N("write")):B?P._writev(ie,M.onwrite):P._write(ie,ne,M.onwrite),M.sync=!1}function F(P,M,B,oe){--M.pendingcb,oe(B),H(M),s(P,B)}function _(P,M){const B=P._writableState,oe=B.sync,ie=B.writecb;if(typeof ie!="function"){s(P,new E);return}B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0,M?(M.stack,B.errored||(B.errored=M),P._readableState&&!P._readableState.errored&&(P._readableState.errored=M),oe?r.nextTick(F,P,B,M,ie):F(P,B,M,ie)):(B.buffered.length>B.bufferedIndex&&Z(P,B),oe?B.afterWriteTickInfo!==null&&B.afterWriteTickInfo.cb===ie?B.afterWriteTickInfo.count++:(B.afterWriteTickInfo={count:1,cb:ie,stream:P,state:B},r.nextTick(U,B.afterWriteTickInfo)):Q(P,B,1,ie))}function U({stream:P,state:M,count:B,cb:oe}){return M.afterWriteTickInfo=null,Q(P,M,B,oe)}function Q(P,M,B,oe){for(!M.ending&&!P.destroyed&&M.length===0&&M.needDrain&&(M.needDrain=!1,P.emit("drain"));B-- >0;)M.pendingcb--,oe();M.destroyed&&H(M),K(P,M)}function H(P){if(P.writing)return;for(let ie=P.bufferedIndex;ie<P.buffered.length;++ie){var M;const{chunk:ne,callback:L}=P.buffered[ie],X=P.objectMode?1:ne.length;P.length-=X,L((M=P.errored)!==null&&M!==void 0?M:new N("write"))}const B=P[p].splice(0);for(let ie=0;ie<B.length;ie++){var oe;B[ie]((oe=P.errored)!==null&&oe!==void 0?oe:new N("end"))}I(P)}function Z(P,M){if(M.corked||M.bufferProcessing||M.destroyed||!M.constructed)return;const{buffered:B,bufferedIndex:oe,objectMode:ie}=M,ne=B.length-oe;if(!ne)return;let L=oe;if(M.bufferProcessing=!0,ne>1&&P._writev){M.pendingcb-=ne-1;const X=M.allNoop?d:J=>{for(let we=L;we<B.length;++we)B[we].callback(J)},te=M.allNoop&&L===0?B:e(B,L);te.allBuffers=M.allBuffers,b(P,M,!0,M.length,te,"",X),I(M)}else{do{const{chunk:X,encoding:te,callback:J}=B[L];B[L++]=null;const we=ie?1:X.length;b(P,M,!1,we,X,te,J)}while(L<B.length&&!M.writing);L===B.length?I(M):L>256?(B.splice(0,L),M.bufferedIndex=0):M.bufferedIndex=L}M.bufferProcessing=!1}v.prototype._write=function(P,M,B){if(this._writev)this._writev([{chunk:P,encoding:M}],B);else throw new c("_write()")},v.prototype._writev=null,v.prototype.end=function(P,M,B){const oe=this._writableState;typeof P=="function"?(B=P,P=null,M=null):typeof M=="function"&&(B=M,M=null);let ie;if(P!=null){const ne=R(this,P,M);ne instanceof t&&(ie=ne)}return oe.corked&&(oe.corked=1,this.uncork()),ie||(!oe.errored&&!oe.ending?(oe.ending=!0,K(this,oe,!0),oe.ended=!0):oe.finished?ie=new G("end"):oe.destroyed&&(ie=new N("end"))),typeof B=="function"&&(ie||oe.finished?r.nextTick(B,ie):oe[p].push(B)),this};function re(P){return P.ending&&!P.destroyed&&P.constructed&&P.length===0&&!P.errored&&P.buffered.length===0&&!P.finished&&!P.writing&&!P.errorEmitted&&!P.closeEmitted}function ue(P,M){let B=!1;function oe(ie){if(B){s(P,ie??E());return}if(B=!0,M.pendingcb--,ie){const ne=M[p].splice(0);for(let L=0;L<ne.length;L++)ne[L](ie);s(P,ie,M.sync)}else re(M)&&(M.prefinished=!0,P.emit("prefinish"),M.pendingcb++,r.nextTick(V,P,M))}M.sync=!0,M.pendingcb++;try{P._final(oe)}catch(ie){oe(ie)}M.sync=!1}function le(P,M){!M.prefinished&&!M.finalCalled&&(typeof P._final=="function"&&!M.destroyed?(M.finalCalled=!0,ue(P,M)):(M.prefinished=!0,P.emit("prefinish")))}function K(P,M,B){re(M)&&(le(P,M),M.pendingcb===0&&(B?(M.pendingcb++,r.nextTick((oe,ie)=>{re(ie)?V(oe,ie):ie.pendingcb--},P,M)):re(M)&&(M.pendingcb++,V(P,M))))}function V(P,M){M.pendingcb--,M.finished=!0;const B=M[p].splice(0);for(let oe=0;oe<B.length;oe++)B[oe]();if(P.emit("finish"),M.autoDestroy){const oe=P._readableState;(!oe||oe.autoDestroy&&(oe.endEmitted||oe.readable===!1))&&P.destroy()}}o(v.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(P){this._writableState&&(this._writableState.destroyed=P)}},writable:{__proto__:null,get(){const P=this._writableState;return!!P&&P.writable!==!1&&!P.destroyed&&!P.errored&&!P.ending&&!P.ended},set(P){this._writableState&&(this._writableState.writable=!!P)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const P=this._writableState;return P?!P.destroyed&&!P.ending&&P.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ae=q.destroy;v.prototype.destroy=function(P,M){const B=this._writableState;return!B.destroyed&&(B.bufferedIndex<B.buffered.length||B[p].length)&&r.nextTick(H,B),ae.call(this,P,M),this},v.prototype._undestroy=q.undestroy,v.prototype._destroy=function(P,M){M(P)},v.prototype[k.captureRejectionSymbol]=function(P){this.destroy(P)};let fe;function he(){return fe===void 0&&(fe={}),fe}return v.fromWeb=function(P,M){return he().newStreamWritableFromWritableStream(P,M)},v.toWeb=function(P){return he().newWritableStreamFromStreamWritable(P)},ln}var un,bi;function Ns(){if(bi)return un;bi=1;const r=Rt(),e=At(),{isReadable:t,isWritable:n,isIterable:a,isNodeStream:o,isReadableNodeStream:u,isWritableNodeStream:w,isDuplexNodeStream:O,isReadableStream:T,isWritableStream:k}=ct(),W=gt(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:q,ERR_INVALID_RETURN_VALUE:$}}=xe(),{destroyer:x}=Ct(),A=ut(),f=Ar(),c=Dn(),{createDeferredPromise:E}=je(),C=yo(),N=globalThis.Blob||e.Blob,G=typeof N<"u"?function(l){return l instanceof N}:function(l){return!1},Y=globalThis.AbortController||zt().AbortController,{FunctionPrototypeCall:i}=Ie();class h extends A{constructor(l){super(l),(l==null?void 0:l.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(l==null?void 0:l.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}un=function p(l,I){if(O(l))return l;if(u(l))return d({readable:l});if(w(l))return d({writable:l});if(o(l))return d({writable:!1,readable:!1});if(T(l))return d({readable:f.fromWeb(l)});if(k(l))return d({writable:c.fromWeb(l)});if(typeof l=="function"){const{value:R,write:j,final:b,destroy:F}=s(l);if(a(R))return C(h,R,{objectMode:!0,write:j,final:b,destroy:F});const _=R==null?void 0:R.then;if(typeof _=="function"){let U;const Q=i(_,R,H=>{if(H!=null)throw new $("nully","body",H)},H=>{x(U,H)});return U=new h({objectMode:!0,readable:!1,write:j,final(H){b(async()=>{try{await Q,r.nextTick(H,null)}catch(Z){r.nextTick(H,Z)}})},destroy:F})}throw new $("Iterable, AsyncIterable or AsyncFunction",I,R)}if(G(l))return p(l.arrayBuffer());if(a(l))return C(h,l,{objectMode:!0,writable:!1});if(T(l==null?void 0:l.readable)&&k(l==null?void 0:l.writable))return h.fromWeb(l);if(typeof(l==null?void 0:l.writable)=="object"||typeof(l==null?void 0:l.readable)=="object"){const R=l!=null&&l.readable?u(l==null?void 0:l.readable)?l==null?void 0:l.readable:p(l.readable):void 0,j=l!=null&&l.writable?w(l==null?void 0:l.writable)?l==null?void 0:l.writable:p(l.writable):void 0;return d({readable:R,writable:j})}const v=l==null?void 0:l.then;if(typeof v=="function"){let R;return i(v,l,j=>{j!=null&&R.push(j),R.push(null)},j=>{x(R,j)}),R=new h({objectMode:!0,writable:!1,read(){}})}throw new q(I,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],l)};function s(p){let{promise:l,resolve:I}=E();const v=new Y,R=v.signal;return{value:p(async function*(){for(;;){const b=l;l=null;const{chunk:F,done:_,cb:U}=await b;if(r.nextTick(U),_)return;if(R.aborted)throw new m(void 0,{cause:R.reason});({promise:l,resolve:I}=E()),yield F}}(),{signal:R}),write(b,F,_){const U=I;I=null,U({chunk:b,done:!1,cb:_})},final(b){const F=I;I=null,F({done:!0,cb:b})},destroy(b,F){v.abort(),F(b)}}}function d(p){const l=p.readable&&typeof p.readable.read!="function"?f.wrap(p.readable):p.readable,I=p.writable;let v=!!t(l),R=!!n(I),j,b,F,_,U;function Q(H){const Z=_;_=null,Z?Z(H):H&&U.destroy(H)}return U=new h({readableObjectMode:!!(l!=null&&l.readableObjectMode),writableObjectMode:!!(I!=null&&I.writableObjectMode),readable:v,writable:R}),R&&(W(I,H=>{R=!1,H&&x(l,H),Q(H)}),U._write=function(H,Z,re){I.write(H,Z)?re():j=re},U._final=function(H){I.end(),b=H},I.on("drain",function(){if(j){const H=j;j=null,H()}}),I.on("finish",function(){if(b){const H=b;b=null,H()}})),v&&(W(l,H=>{v=!1,H&&x(l,H),Q(H)}),l.on("readable",function(){if(F){const H=F;F=null,H()}}),l.on("end",function(){U.push(null)}),U._read=function(){for(;;){const H=l.read();if(H===null){F=U._read;return}if(!U.push(H))return}}),U._destroy=function(H,Z){!H&&_!==null&&(H=new m),F=null,j=null,b=null,_===null?Z(H):(_=Z,x(I,H),x(l,H))},U}return un}var fn,yi;function ut(){if(yi)return fn;yi=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Ie();fn=u;const a=Ar(),o=Dn();n(u.prototype,a.prototype),n(u,a);{const k=t(o.prototype);for(let W=0;W<k.length;W++){const m=k[W];u.prototype[m]||(u.prototype[m]=o.prototype[m])}}function u(k){if(!(this instanceof u))return new u(k);a.call(this,k),o.call(this,k),k?(this.allowHalfOpen=k.allowHalfOpen!==!1,k.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),k.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(u.prototype,{writable:{__proto__:null,...e(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(o.prototype,"writableLength")},writableFinished:{__proto__:null,...e(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(k){this._readableState&&this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}}});let w;function O(){return w===void 0&&(w={}),w}u.fromWeb=function(k,W){return O().newStreamDuplexFromReadableWritablePair(k,W)},u.toWeb=function(k){return O().newReadableWritablePairFromDuplex(k)};let T;return u.from=function(k){return T||(T=Ns()),T(k,"body")},fn}var cn,mi;function mo(){if(mi)return cn;mi=1;const{ObjectSetPrototypeOf:r,Symbol:e}=Ie();cn=u;const{ERR_METHOD_NOT_IMPLEMENTED:t}=xe().codes,n=ut(),{getHighWaterMark:a}=Sr();r(u.prototype,n.prototype),r(u,n);const o=e("kCallback");function u(T){if(!(this instanceof u))return new u(T);const k=T?a(this,T,"readableHighWaterMark",!0):null;k===0&&(T={...T,highWaterMark:null,readableHighWaterMark:k,writableHighWaterMark:T.writableHighWaterMark||0}),n.call(this,T),this._readableState.sync=!1,this[o]=null,T&&(typeof T.transform=="function"&&(this._transform=T.transform),typeof T.flush=="function"&&(this._flush=T.flush)),this.on("prefinish",O)}function w(T){typeof this._flush=="function"&&!this.destroyed?this._flush((k,W)=>{if(k){T?T(k):this.destroy(k);return}W!=null&&this.push(W),this.push(null),T&&T()}):(this.push(null),T&&T())}function O(){this._final!==w&&w.call(this)}return u.prototype._final=w,u.prototype._transform=function(T,k,W){throw new t("_transform()")},u.prototype._write=function(T,k,W){const m=this._readableState,q=this._writableState,$=m.length;this._transform(T,k,(x,A)=>{if(x){W(x);return}A!=null&&this.push(A),q.ended||$===m.length||m.length<m.highWaterMark?W():this[o]=W})},u.prototype._read=function(){if(this[o]){const T=this[o];this[o]=null,T()}},cn}var dn,vi;function vo(){if(vi)return dn;vi=1;const{ObjectSetPrototypeOf:r}=Ie();dn=t;const e=mo();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,a,o){o(null,n)},dn}var hn,Ei;function jn(){if(Ei)return hn;Ei=1;const r=Rt(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:a}=Ie(),o=gt(),{once:u}=je(),w=Ct(),O=ut(),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:k,ERR_INVALID_RETURN_VALUE:W,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:q,ERR_STREAM_PREMATURE_CLOSE:$},AbortError:x}=xe(),{validateFunction:A,validateAbortSignal:f}=Kt(),{isIterable:c,isReadable:E,isReadableNodeStream:C,isNodeStream:N,isTransformStream:G,isWebStream:Y,isReadableStream:i,isReadableFinished:h}=ct(),s=globalThis.AbortController||zt().AbortController;let d,p,l;function I(H,Z,re){let ue=!1;H.on("close",()=>{ue=!0});const le=o(H,{readable:Z,writable:re},K=>{ue=!K});return{destroy:K=>{ue||(ue=!0,w.destroyer(H,K||new q("pipe")))},cleanup:le}}function v(H){return A(H[H.length-1],"streams[stream.length - 1]"),H.pop()}function R(H){if(c(H))return H;if(C(H))return j(H);throw new k("val",["Readable","Iterable","AsyncIterable"],H)}async function*j(H){p||(p=Ar()),yield*p.prototype[n].call(H)}async function b(H,Z,re,{end:ue}){let le,K=null;const V=he=>{if(he&&(le=he),K){const P=K;K=null,P()}},ae=()=>new t((he,P)=>{le?P(le):K=()=>{le?P(le):he()}});Z.on("drain",V);const fe=o(Z,{readable:!1},V);try{Z.writableNeedDrain&&await ae();for await(const he of H)Z.write(he)||await ae();ue&&(Z.end(),await ae()),re()}catch(he){re(le!==he?T(le,he):he)}finally{fe(),Z.off("drain",V)}}async function F(H,Z,re,{end:ue}){G(Z)&&(Z=Z.writable);const le=Z.getWriter();try{for await(const K of H)await le.ready,le.write(K).catch(()=>{});await le.ready,ue&&await le.close(),re()}catch(K){try{await le.abort(K),re(K)}catch(V){re(V)}}}function _(...H){return U(H,u(v(H)))}function U(H,Z,re){if(H.length===1&&e(H[0])&&(H=H[0]),H.length<2)throw new m("streams");const ue=new s,le=ue.signal,K=re==null?void 0:re.signal,V=[];f(K,"options.signal");function ae(){ie(new x)}l=l||je().addAbortListener;let fe;K&&(fe=l(K,ae));let he,P;const M=[];let B=0;function oe(te){ie(te,--B===0)}function ie(te,J){var we;if(te&&(!he||he.code==="ERR_STREAM_PREMATURE_CLOSE")&&(he=te),!(!he&&!J)){for(;M.length;)M.shift()(he);(we=fe)===null||we===void 0||we[a](),ue.abort(),J&&(he||V.forEach(Re=>Re()),r.nextTick(Z,he,P))}}let ne;for(let te=0;te<H.length;te++){const J=H[te],we=te<H.length-1,Re=te>0,be=we||(re==null?void 0:re.end)!==!1,Pe=te===H.length-1;if(N(J)){let Ne=function(ke){ke&&ke.name!=="AbortError"&&ke.code!=="ERR_STREAM_PREMATURE_CLOSE"&&oe(ke)};if(be){const{destroy:ke,cleanup:We}=I(J,we,Re);M.push(ke),E(J)&&Pe&&V.push(We)}J.on("error",Ne),E(J)&&Pe&&V.push(()=>{J.removeListener("error",Ne)})}if(te===0)if(typeof J=="function"){if(ne=J({signal:le}),!c(ne))throw new W("Iterable, AsyncIterable or Stream","source",ne)}else c(J)||C(J)||G(J)?ne=J:ne=O.from(J);else if(typeof J=="function"){if(G(ne)){var L;ne=R((L=ne)===null||L===void 0?void 0:L.readable)}else ne=R(ne);if(ne=J(ne,{signal:le}),we){if(!c(ne,!0))throw new W("AsyncIterable",`transform[${te-1}]`,ne)}else{var X;d||(d=vo());const Ne=new d({objectMode:!0}),ke=(X=ne)===null||X===void 0?void 0:X.then;if(typeof ke=="function")B++,ke.call(ne,Le=>{P=Le,Le!=null&&Ne.write(Le),be&&Ne.end(),r.nextTick(oe)},Le=>{Ne.destroy(Le),r.nextTick(oe,Le)});else if(c(ne,!0))B++,b(ne,Ne,oe,{end:be});else if(i(ne)||G(ne)){const Le=ne.readable||ne;B++,b(Le,Ne,oe,{end:be})}else throw new W("AsyncIterable or Promise","destination",ne);ne=Ne;const{destroy:We,cleanup:wt}=I(ne,!1,!0);M.push(We),Pe&&V.push(wt)}}else if(N(J)){if(C(ne)){B+=2;const Ne=Q(ne,J,oe,{end:be});E(J)&&Pe&&V.push(Ne)}else if(G(ne)||i(ne)){const Ne=ne.readable||ne;B++,b(Ne,J,oe,{end:be})}else if(c(ne))B++,b(ne,J,oe,{end:be});else throw new k("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ne);ne=J}else if(Y(J)){if(C(ne))B++,F(R(ne),J,oe,{end:be});else if(i(ne)||c(ne))B++,F(ne,J,oe,{end:be});else if(G(ne))B++,F(ne.readable,J,oe,{end:be});else throw new k("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ne);ne=J}else ne=O.from(J)}return(le!=null&&le.aborted||K!=null&&K.aborted)&&r.nextTick(ae),ne}function Q(H,Z,re,{end:ue}){let le=!1;if(Z.on("close",()=>{le||re(new $)}),H.pipe(Z,{end:!1}),ue){let K=function(){le=!0,Z.end()};h(H)?r.nextTick(K):H.once("end",K)}else re();return o(H,{readable:!0,writable:!1},K=>{const V=H._readableState;K&&K.code==="ERR_STREAM_PREMATURE_CLOSE"&&V&&V.ended&&!V.errored&&!V.errorEmitted?H.once("end",re).once("error",re):re(K)}),o(Z,{readable:!1,writable:!0},re)}return hn={pipelineImpl:U,pipeline:_},hn}var pn,Si;function Eo(){if(Si)return pn;Si=1;const{pipeline:r}=jn(),e=ut(),{destroyer:t}=Ct(),{isNodeStream:n,isReadable:a,isWritable:o,isWebStream:u,isTransformStream:w,isWritableStream:O,isReadableStream:T}=ct(),{AbortError:k,codes:{ERR_INVALID_ARG_VALUE:W,ERR_MISSING_ARGS:m}}=xe(),q=gt();return pn=function(...x){if(x.length===0)throw new m("streams");if(x.length===1)return e.from(x[0]);const A=[...x];if(typeof x[0]=="function"&&(x[0]=e.from(x[0])),typeof x[x.length-1]=="function"){const d=x.length-1;x[d]=e.from(x[d])}for(let d=0;d<x.length;++d)if(!(!n(x[d])&&!u(x[d]))){if(d<x.length-1&&!(a(x[d])||T(x[d])||w(x[d])))throw new W(`streams[${d}]`,A[d],"must be readable");if(d>0&&!(o(x[d])||O(x[d])||w(x[d])))throw new W(`streams[${d}]`,A[d],"must be writable")}let f,c,E,C,N;function G(d){const p=C;C=null,p?p(d):d?N.destroy(d):!s&&!h&&N.destroy()}const Y=x[0],i=r(x,G),h=!!(o(Y)||O(Y)||w(Y)),s=!!(a(i)||T(i)||w(i));if(N=new e({writableObjectMode:!!(Y!=null&&Y.writableObjectMode),readableObjectMode:!!(i!=null&&i.readableObjectMode),writable:h,readable:s}),h){if(n(Y))N._write=function(p,l,I){Y.write(p,l)?I():f=I},N._final=function(p){Y.end(),c=p},Y.on("drain",function(){if(f){const p=f;f=null,p()}});else if(u(Y)){const l=(w(Y)?Y.writable:Y).getWriter();N._write=async function(I,v,R){try{await l.ready,l.write(I).catch(()=>{}),R()}catch(j){R(j)}},N._final=async function(I){try{await l.ready,l.close().catch(()=>{}),c=I}catch(v){I(v)}}}const d=w(i)?i.readable:i;q(d,()=>{if(c){const p=c;c=null,p()}})}if(s){if(n(i))i.on("readable",function(){if(E){const d=E;E=null,d()}}),i.on("end",function(){N.push(null)}),N._read=function(){for(;;){const d=i.read();if(d===null){E=N._read;return}if(!N.push(d))return}};else if(u(i)){const p=(w(i)?i.readable:i).getReader();N._read=async function(){for(;;)try{const{value:l,done:I}=await p.read();if(!N.push(l))return;if(I){N.push(null);return}}catch{return}}}}return N._destroy=function(d,p){!d&&C!==null&&(d=new k),E=null,f=null,c=null,C===null?p(d):(C=p,n(i)&&t(i,d))},N},pn}var Ai;function Cs(){if(Ai)return lr;Ai=1;const r=globalThis.AbortController||zt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:a},AbortError:o}=xe(),{validateAbortSignal:u,validateInteger:w,validateObject:O}=Kt(),T=Ie().Symbol("kWeak"),k=Ie().Symbol("kResistStopPropagation"),{finished:W}=gt(),m=Eo(),{addAbortSignalNoValidate:q}=Er(),{isWritable:$,isNodeStream:x}=ct(),{deprecate:A}=je(),{ArrayPrototypePush:f,Boolean:c,MathFloor:E,Number:C,NumberIsNaN:N,Promise:G,PromiseReject:Y,PromiseResolve:i,PromisePrototypeThen:h,Symbol:s}=Ie(),d=s("kEmpty"),p=s("kEof");function l(K,V){if(V!=null&&O(V,"options"),(V==null?void 0:V.signal)!=null&&u(V.signal,"options.signal"),x(K)&&!$(K))throw new e("stream",K,"must be writable");const ae=m(this,K);return V!=null&&V.signal&&q(V.signal,ae),ae}function I(K,V){if(typeof K!="function")throw new t("fn",["Function","AsyncFunction"],K);V!=null&&O(V,"options"),(V==null?void 0:V.signal)!=null&&u(V.signal,"options.signal");let ae=1;(V==null?void 0:V.concurrency)!=null&&(ae=E(V.concurrency));let fe=ae-1;return(V==null?void 0:V.highWaterMark)!=null&&(fe=E(V.highWaterMark)),w(ae,"options.concurrency",1),w(fe,"options.highWaterMark",0),fe+=ae,(async function*(){const P=je().AbortSignalAny([V==null?void 0:V.signal].filter(c)),M=this,B=[],oe={signal:P};let ie,ne,L=!1,X=0;function te(){L=!0,J()}function J(){X-=1,we()}function we(){ne&&!L&&X<ae&&B.length<fe&&(ne(),ne=null)}async function Re(){try{for await(let be of M){if(L)return;if(P.aborted)throw new o;try{if(be=K(be,oe),be===d)continue;be=i(be)}catch(Pe){be=Y(Pe)}X+=1,h(be,J,te),B.push(be),ie&&(ie(),ie=null),!L&&(B.length>=fe||X>=ae)&&await new G(Pe=>{ne=Pe})}B.push(p)}catch(be){const Pe=Y(be);h(Pe,J,te),B.push(Pe)}finally{L=!0,ie&&(ie(),ie=null)}}Re();try{for(;;){for(;B.length>0;){const be=await B[0];if(be===p)return;if(P.aborted)throw new o;be!==d&&(yield be),B.shift(),we()}await new G(be=>{ie=be})}}finally{L=!0,ne&&(ne(),ne=null)}}).call(this)}function v(K=void 0){return K!=null&&O(K,"options"),(K==null?void 0:K.signal)!=null&&u(K.signal,"options.signal"),(async function*(){let ae=0;for await(const he of this){var fe;if(K!=null&&(fe=K.signal)!==null&&fe!==void 0&&fe.aborted)throw new o({cause:K.signal.reason});yield[ae++,he]}}).call(this)}async function R(K,V=void 0){for await(const ae of _.call(this,K,V))return!0;return!1}async function j(K,V=void 0){if(typeof K!="function")throw new t("fn",["Function","AsyncFunction"],K);return!await R.call(this,async(...ae)=>!await K(...ae),V)}async function b(K,V){for await(const ae of _.call(this,K,V))return ae}async function F(K,V){if(typeof K!="function")throw new t("fn",["Function","AsyncFunction"],K);async function ae(fe,he){return await K(fe,he),d}for await(const fe of I.call(this,ae,V));}function _(K,V){if(typeof K!="function")throw new t("fn",["Function","AsyncFunction"],K);async function ae(fe,he){return await K(fe,he)?fe:d}return I.call(this,ae,V)}class U extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(K,V,ae){var fe;if(typeof K!="function")throw new t("reducer",["Function","AsyncFunction"],K);ae!=null&&O(ae,"options"),(ae==null?void 0:ae.signal)!=null&&u(ae.signal,"options.signal");let he=arguments.length>1;if(ae!=null&&(fe=ae.signal)!==null&&fe!==void 0&&fe.aborted){const ie=new o(void 0,{cause:ae.signal.reason});throw this.once("error",()=>{}),await W(this.destroy(ie)),ie}const P=new r,M=P.signal;if(ae!=null&&ae.signal){const ie={once:!0,[T]:this,[k]:!0};ae.signal.addEventListener("abort",()=>P.abort(),ie)}let B=!1;try{for await(const ie of this){var oe;if(B=!0,ae!=null&&(oe=ae.signal)!==null&&oe!==void 0&&oe.aborted)throw new o;he?V=await K(V,ie,{signal:M}):(V=ie,he=!0)}if(!B&&!he)throw new U}finally{P.abort()}return V}async function H(K){K!=null&&O(K,"options"),(K==null?void 0:K.signal)!=null&&u(K.signal,"options.signal");const V=[];for await(const fe of this){var ae;if(K!=null&&(ae=K.signal)!==null&&ae!==void 0&&ae.aborted)throw new o(void 0,{cause:K.signal.reason});f(V,fe)}return V}function Z(K,V){const ae=I.call(this,K,V);return(async function*(){for await(const he of ae)yield*he}).call(this)}function re(K){if(K=C(K),N(K))return 0;if(K<0)throw new a("number",">= 0",K);return K}function ue(K,V=void 0){return V!=null&&O(V,"options"),(V==null?void 0:V.signal)!=null&&u(V.signal,"options.signal"),K=re(K),(async function*(){var fe;if(V!=null&&(fe=V.signal)!==null&&fe!==void 0&&fe.aborted)throw new o;for await(const P of this){var he;if(V!=null&&(he=V.signal)!==null&&he!==void 0&&he.aborted)throw new o;K--<=0&&(yield P)}}).call(this)}function le(K,V=void 0){return V!=null&&O(V,"options"),(V==null?void 0:V.signal)!=null&&u(V.signal,"options.signal"),K=re(K),(async function*(){var fe;if(V!=null&&(fe=V.signal)!==null&&fe!==void 0&&fe.aborted)throw new o;for await(const P of this){var he;if(V!=null&&(he=V.signal)!==null&&he!==void 0&&he.aborted)throw new o;if(K-- >0&&(yield P),K<=0)return}}).call(this)}return lr.streamReturningOperators={asIndexedPairs:A(v,"readable.asIndexedPairs will be removed in a future version."),drop:ue,filter:_,flatMap:Z,map:I,take:le,compose:l},lr.promiseReturningOperators={every:j,forEach:F,reduce:Q,toArray:H,some:R,find:b},lr}var gn,Ri;function So(){if(Ri)return gn;Ri=1;const{ArrayPrototypePop:r,Promise:e}=Ie(),{isIterable:t,isNodeStream:n,isWebStream:a}=ct(),{pipelineImpl:o}=jn(),{finished:u}=gt();Ao();function w(...O){return new e((T,k)=>{let W,m;const q=O[O.length-1];if(q&&typeof q=="object"&&!n(q)&&!t(q)&&!a(q)){const $=r(O);W=$.signal,m=$.end}o(O,($,x)=>{$?k($):T(x)},{signal:W,end:m})})}return gn={finished:u,pipeline:w},gn}var Ti;function Ao(){if(Ti)return Gr.exports;Ti=1;const{Buffer:r}=At(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Ie(),{promisify:{custom:a}}=je(),{streamReturningOperators:o,promiseReturningOperators:u}=Cs(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:w}}=xe(),O=Eo(),{setDefaultHighWaterMark:T,getDefaultHighWaterMark:k}=Sr(),{pipeline:W}=jn(),{destroyer:m}=Ct(),q=gt(),$=So(),x=ct(),A=Gr.exports=Mn().Stream;A.isDestroyed=x.isDestroyed,A.isDisturbed=x.isDisturbed,A.isErrored=x.isErrored,A.isReadable=x.isReadable,A.isWritable=x.isWritable,A.Readable=Ar();for(const c of t(o)){let C=function(...N){if(new.target)throw w();return A.Readable.from(n(E,this,N))};const E=o[c];e(C,"name",{__proto__:null,value:E.name}),e(C,"length",{__proto__:null,value:E.length}),e(A.Readable.prototype,c,{__proto__:null,value:C,enumerable:!1,configurable:!0,writable:!0})}for(const c of t(u)){let C=function(...N){if(new.target)throw w();return n(E,this,N)};const E=u[c];e(C,"name",{__proto__:null,value:E.name}),e(C,"length",{__proto__:null,value:E.length}),e(A.Readable.prototype,c,{__proto__:null,value:C,enumerable:!1,configurable:!0,writable:!0})}A.Writable=Dn(),A.Duplex=ut(),A.Transform=mo(),A.PassThrough=vo(),A.pipeline=W;const{addAbortSignal:f}=Er();return A.addAbortSignal=f,A.finished=q,A.destroy=m,A.compose=O,A.setDefaultHighWaterMark=T,A.getDefaultHighWaterMark=k,e(A,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return $}}),e(W,a,{__proto__:null,enumerable:!0,get(){return $.pipeline}}),e(q,a,{__proto__:null,enumerable:!0,get(){return $.finished}}),A.Stream=A,A._isUint8Array=function(E){return E instanceof Uint8Array},A._uint8ArrayToBuffer=function(E){return r.from(E.buffer,E.byteOffset,E.byteLength)},Gr.exports}var Ii;function Ps(){return Ii||(Ii=1,function(r){const e=Ao(),t=So(),n=e.Readable.destroy;r.exports=e.Readable,r.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,r.exports._isUint8Array=e._isUint8Array,r.exports.isDisturbed=e.isDisturbed,r.exports.isErrored=e.isErrored,r.exports.isReadable=e.isReadable,r.exports.Readable=e.Readable,r.exports.Writable=e.Writable,r.exports.Duplex=e.Duplex,r.exports.Transform=e.Transform,r.exports.PassThrough=e.PassThrough,r.exports.addAbortSignal=e.addAbortSignal,r.exports.finished=e.finished,r.exports.destroy=e.destroy,r.exports.destroy=n,r.exports.pipeline=e.pipeline,r.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),r.exports.Stream=e.Stream,r.exports.default=r.exports}(zr)),zr.exports}var Rr=Ps(),wn,Oi;function Ro(){if(Oi)return wn;Oi=1,wn=o,o.default=o,o.stable=T,o.stableStringify=T;var r="[...]",e="[Circular]",t=[],n=[];function a(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o(m,q,$,x){typeof x>"u"&&(x=a()),w(m,"",0,[],void 0,0,x);var A;try{n.length===0?A=JSON.stringify(m,q,$):A=JSON.stringify(m,W(q),$)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var f=t.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return A}function u(m,q,$,x){var A=Object.getOwnPropertyDescriptor(x,$);A.get!==void 0?A.configurable?(Object.defineProperty(x,$,{value:m}),t.push([x,$,q,A])):n.push([q,$,m]):(x[$]=m,t.push([x,$,q]))}function w(m,q,$,x,A,f,c){f+=1;var E;if(typeof m=="object"&&m!==null){for(E=0;E<x.length;E++)if(x[E]===m){u(e,m,q,A);return}if(typeof c.depthLimit<"u"&&f>c.depthLimit){u(r,m,q,A);return}if(typeof c.edgesLimit<"u"&&$+1>c.edgesLimit){u(r,m,q,A);return}if(x.push(m),Array.isArray(m))for(E=0;E<m.length;E++)w(m[E],E,E,x,m,f,c);else{var C=Object.keys(m);for(E=0;E<C.length;E++){var N=C[E];w(m[N],N,E,x,m,f,c)}}x.pop()}}function O(m,q){return m<q?-1:m>q?1:0}function T(m,q,$,x){typeof x>"u"&&(x=a());var A=k(m,"",0,[],void 0,0,x)||m,f;try{n.length===0?f=JSON.stringify(A,q,$):f=JSON.stringify(A,W(q),$)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var c=t.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return f}function k(m,q,$,x,A,f,c){f+=1;var E;if(typeof m=="object"&&m!==null){for(E=0;E<x.length;E++)if(x[E]===m){u(e,m,q,A);return}try{if(typeof m.toJSON=="function")return}catch{return}if(typeof c.depthLimit<"u"&&f>c.depthLimit){u(r,m,q,A);return}if(typeof c.edgesLimit<"u"&&$+1>c.edgesLimit){u(r,m,q,A);return}if(x.push(m),Array.isArray(m))for(E=0;E<m.length;E++)k(m[E],E,E,x,m,f,c);else{var C={},N=Object.keys(m).sort(O);for(E=0;E<N.length;E++){var G=N[E];k(m[G],G,E,x,m,f,c),C[G]=m[G]}if(typeof A<"u")t.push([A,q,m]),A[q]=C;else return C}x.pop()}}function W(m){return m=typeof m<"u"?m:function(q,$){return $},function(q,$){if(n.length>0)for(var x=0;x<n.length;x++){var A=n[x];if(A[1]===q&&A[0]===$){$=A[2],n.splice(x,1);break}}return m.call(this,q,$)}}return wn}var Ls=Ro();const xs=Nt(Ls);var fr={exports:{}},_n,Ni;function Ms(){if(Ni)return _n;Ni=1,_n=r;function r(e,t){if(e&&t)return r(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(a){n[a]=e[a]}),n;function n(){for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];var u=e.apply(this,a),w=a[a.length-1];return typeof u=="function"&&u!==w&&Object.keys(w).forEach(function(O){u[O]=w[O]}),u}}return _n}var Ci;function kn(){if(Ci)return fr.exports;Ci=1;var r=Ms();fr.exports=r(e),fr.exports.strict=r(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(n){var a=function(){return a.called?a.value:(a.called=!0,a.value=n.apply(this,arguments))};return a.called=!1,a}function t(n){var a=function(){if(a.called)throw new Error(a.onceError);return a.called=!0,a.value=n.apply(this,arguments)},o=n.name||"Function wrapped with `once`";return a.onceError=o+" shouldn't be called more than once",a.called=!1,a}return fr.exports}var bn,Pi;function To(){if(Pi)return bn;Pi=1;var r=kn(),e=function(){},t=function(o){return o.setHeader&&typeof o.abort=="function"},n=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},a=function(o,u,w){if(typeof u=="function")return a(o,null,u);u||(u={}),w=r(w||e);var O=o._writableState,T=o._readableState,k=u.readable||u.readable!==!1&&o.readable,W=u.writable||u.writable!==!1&&o.writable,m=!1,q=function(){o.writable||$()},$=function(){W=!1,k||w.call(o)},x=function(){k=!1,W||w.call(o)},A=function(N){w.call(o,N?new Error("exited with error code: "+N):null)},f=function(N){w.call(o,N)},c=function(){_o.nextTick(E)},E=function(){if(!m){if(k&&!(T&&T.ended&&!T.destroyed))return w.call(o,new Error("premature close"));if(W&&!(O&&O.ended&&!O.destroyed))return w.call(o,new Error("premature close"))}},C=function(){o.req.on("finish",$)};return t(o)?(o.on("complete",$),o.on("abort",c),o.req?C():o.on("request",C)):W&&!O&&(o.on("end",q),o.on("close",q)),n(o)&&o.on("exit",A),o.on("end",x),o.on("finish",$),u.error!==!1&&o.on("error",f),o.on("close",c),function(){m=!0,o.removeListener("complete",$),o.removeListener("abort",c),o.removeListener("request",C),o.req&&o.req.removeListener("finish",$),o.removeListener("end",q),o.removeListener("close",q),o.removeListener("finish",$),o.removeListener("exit",A),o.removeListener("end",x),o.removeListener("error",f),o.removeListener("close",c)}};return bn=a,bn}var Ds=To();const Li=Nt(Ds);var js=kn();const ks=Nt(js);var Ws=null;const Fs=Object.freeze(Object.defineProperty({__proto__:null,default:Ws},Symbol.toStringTag,{value:"Module"})),Us=ys(Fs);var yn,xi;function qs(){if(xi)return yn;xi=1;var r=kn(),e=To(),t;try{t=Us}catch{}var n=function(){},a=/^v?\.0/.test(_o.version),o=function(m){return typeof m=="function"},u=function(m){return!a||!t?!1:(m instanceof(t.ReadStream||n)||m instanceof(t.WriteStream||n))&&o(m.close)},w=function(m){return m.setHeader&&o(m.abort)},O=function(m,q,$,x){x=r(x);var A=!1;m.on("close",function(){A=!0}),e(m,{readable:q,writable:$},function(c){if(c)return x(c);A=!0,x()});var f=!1;return function(c){if(!A&&!f){if(f=!0,u(m))return m.close(n);if(w(m))return m.abort();if(o(m.destroy))return m.destroy();x(c||new Error("stream was destroyed"))}}},T=function(m){m()},k=function(m,q){return m.pipe(q)},W=function(){var m=Array.prototype.slice.call(arguments),q=o(m[m.length-1]||n)&&m.pop()||n;if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new Error("pump requires two streams per minimum");var $,x=m.map(function(A,f){var c=f<m.length-1,E=f>0;return O(A,c,E,function(C){$||($=C),C&&x.forEach(T),!c&&(x.forEach(T),q($))})});return m.reduce(k)};return yn=W,yn}var Bs=qs();const Mi=Nt(Bs);function cr(){}const Di="SYN",mn="ACK",ji="BRK";class ki extends Rr.Duplex{constructor(e){let{name:t,target:n,targetWindow:a=window,targetOrigin:o="*"}=e;if(super({objectMode:!0}),pe(this,"_init",void 0),pe(this,"_haveSyn",void 0),pe(this,"_name",void 0),pe(this,"_target",void 0),pe(this,"_targetWindow",void 0),pe(this,"_targetOrigin",void 0),pe(this,"_onMessage",void 0),pe(this,"_synIntervalId",void 0),!t||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=n,this._targetWindow=a,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(ji,null,cr),this._haveSyn=!1,this._init=!1}_handShake(){this._write(Di,null,cr),this.cork()}_onData(e){if(!this._init)e===Di?(this._haveSyn=!0,this._write(mn,null,cr)):e===mn&&(this._init=!0,this._haveSyn||this._write(mn,null,cr),this.uncork());else if(e===ji)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;this._targetOrigin!=="*"&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,n){this._postMessage(e),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const $s={rpc:{internal:-32603}},Wi={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Fi=$s.rpc.internal,Hs="Unspecified error message. This is a bug, please report it.";function Io(r){return Number.isInteger(r)}function Ui(r){return typeof r=="string"&&r.length>0}function qi(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function Oo(r){const e=r;return!(!e||!Io(e.code)||!Ui(e.message)||e.stack&&!Ui(e.stack))}function zs(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hs;if(Io(r)){const t=r.toString();if(Object.hasOwn(Wi,t))return Wi[t].message}return e}const Gs={code:Fi,message:zs(Fi)};function Cn(r){try{JSON.parse(JSON.stringify(r,(e,t)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof t=="function"||typeof t=="symbol")throw new Error("Not valid json");return t}),(e,t)=>{if(!(e==="__proto__"||e==="constructor"))return t})}catch{return!1}return!0}function Bi(r){return Object.getOwnPropertyNames(r).reduce((e,t)=>{const n=r[t];return Cn(n)&&(e[t]=n),e},{})}function Ks(r){return Array.isArray(r)?r.map(e=>Cn(e)?e:qi(e)?Bi(e):null):qi(r)?Bi(r):Cn(r)?r:null}function Vs(r,e){if(r&&typeof r=="object"&&"serialize"in r&&typeof r.serialize=="function")return r.serialize();if(Oo(r))return r;const t=Ks(r);return He(He({},e),{},{data:{cause:t}})}function $i(r){let{fallbackError:e=Gs,shouldIncludeStack:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Oo(e))throw new Error("Must provide fallback error with integer number code and string message.");const n=Vs(r,e);return t||delete n.stack,n}function Hi(r,e,t){try{Reflect.apply(r,e,t)}catch(n){setTimeout(()=>{throw n})}}function Js(r){const e=r.length,t=new Array(e);for(let n=0;n<e;n+=1)t[n]=r[n];return t}class Tr extends ms.EventEmitter{emit(e){let t=e==="error";const n=this._events;if(n!==void 0)t=t&&n.error===void 0;else if(!t)return!1;for(var a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];if(t){let O;if(o.length>0&&([O]=o),O instanceof Error)throw O;const T=new Error(`Unhandled error.${O?` (${O.message})`:""}`);throw T.context=O,T}const w=n[e];if(w===void 0)return!1;if(typeof w=="function")Hi(w,this,o);else{const O=w.length,T=Js(w);for(let k=0;k<O;k+=1)Hi(T[k],this,o)}return!0}}class Ft extends Error{constructor(e){let{code:t,message:n,data:a}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),pe(this,"code",void 0),pe(this,"data",void 0),this.code=t,a!==void 0&&(this.data=a)}toString(){return xs({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Pn=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,a)=>{n||a.error?e(n||a.error):!t||Array.isArray(a)?r(a):r(a.result)}};function Ys(){const r={};function e(){return!1}const t=new Tr;function n(O){const T=r[O.id];if(!T)throw new Error(`StreamMiddleware - Unknown response id "${O.id}"`);delete r[O.id],Object.assign(T.res,O),setTimeout(T.end)}function a(O){t.emit("notification",O)}function o(O,T,k){let W;try{!O.id?a(O):n(O)}catch(m){W=m}k(W)}const u=new Rr.Duplex({objectMode:!0,read:e,write:o});return{events:t,middleware:(O,T,k,W)=>{u.push(O),r[O.id]={req:O,res:T,next:k,end:W}},stream:u}}function Xs(){return(r,e,t,n)=>{const a=r.id,o=Math.random().toString(36).slice(2);r.id=o,e.id=o,t(u=>{r.id=a,e.id=a,u()})}}class st extends Tr{constructor(){super(),pe(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,n){const a=[];let o=null,u=!1;for(const w of n)if([o,u]=await st._runMiddleware(e,t,w,a),u)break;return[o,u,a.reverse()]}static _runMiddleware(e,t,n,a){return new Promise(o=>{const u=O=>{const T=O||t.error;T&&(typeof T=="object"&&Object.keys(T).includes("stack")===!1&&(T.stack="Stack trace is not available."),t.error=$i(T,{shouldIncludeStack:!0,fallbackError:{message:(T==null?void 0:T.message)||(T==null?void 0:T.toString()),code:(T==null?void 0:T.code)||-32603,stack:(T==null?void 0:T.stack)||"Stack trace is not available.",data:(T==null?void 0:T.data)||(T==null?void 0:T.message)||(T==null?void 0:T.toString())}})),o([T,!0])},w=O=>{t.error?u(t.error):(O&&(typeof O!="function"&&u(new Ft({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),a.push(O)),o([null,!1]))};try{n(e,t,w,u)}catch(O){u(O)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((n,a)=>{t(o=>o?a(o):n())})}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new Ft({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Ft({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,a)=>{try{const[o,u,w]=await st._runAllMiddleware(e,t,this._middleware);return u?(await st._runReturnHandlers(w),a(o)):n(async O=>{try{await st._runReturnHandlers(w)}catch(T){return O(T)}return O()})}catch(o){return a(o)}}}async _handleBatch(e,t){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(e){return new Promise((t,n)=>{this._handle(e,(a,o)=>{a&&o===void 0?n(a):t(o)}).catch(n)})}async _handle(e,t){if(!e||Array.isArray(e)||typeof e!="object"){const q=new Ft({code:-32603,message:"request must be plain object"});return t(q,{id:void 0,jsonrpc:"2.0",error:q})}if(typeof e.method!="string"){const q=new Ft({code:-32603,message:"method must be string"});return t(q,{id:e.id,jsonrpc:"2.0",error:q})}const n=He({},e),a={id:n.id,jsonrpc:n.jsonrpc};let o=null;try{await this._processRequest(n,a)}catch(q){o=q}if(o&&(delete a.result,!a.error)){var u,w,O,T,k,W,m;typeof o=="object"&&Object.keys(o).includes("stack")===!1&&(o.stack="Stack trace is not available."),a.error=$i(o,{shouldIncludeStack:!0,fallbackError:{message:((u=o)===null||u===void 0?void 0:u.message)||((w=o)===null||w===void 0?void 0:w.toString()),code:((O=o)===null||O===void 0?void 0:O.code)||-32603,stack:((T=o)===null||T===void 0?void 0:T.stack)||"Stack trace is not available.",data:((k=o)===null||k===void 0?void 0:k.data)||((W=o)===null||W===void 0?void 0:W.message)||((m=o)===null||m===void 0?void 0:m.toString())}})}return t(o,a)}async _processRequest(e,t){const[n,a,o]=await st._runAllMiddleware(e,t,this._middleware);if(st._checkForCompletion(e,t,a),await st._runReturnHandlers(o),n)throw n}}class Qs extends Rr.Duplex{constructor(e){let{parent:t,name:n}=e;super({objectMode:!0}),pe(this,"_parent",void 0),pe(this,"_name",void 0),this._parent=t,this._name=n}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}const zi=Symbol("IGNORE_SUBSTREAM");class Zs extends Rr.Duplex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(He(He({},e),{},{objectMode:!0})),pe(this,"_substreams",void 0),pe(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new Qs({parent:this,name:e});return this._substreams[e]=t,ea(this,n=>t.destroy(n||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=zi}_read(){}_write(e,t,n){const{name:a,data:o}=e;if(!a)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();const u=this._substreams[a];return u?(u!==zi&&u.push(o),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${a}"`),n())}}function ea(r,e){const t=ks(e);Li(r,{readable:!1},t),Li(r,{writable:!1},t)}var qt={exports:{}};qt.exports;var Gi;function ta(){return Gi||(Gi=1,function(r,e){var t={},n=200,a="__lodash_hash_undefined__",o=800,u=16,w=9007199254740991,O="[object Arguments]",T="[object Array]",k="[object AsyncFunction]",W="[object Boolean]",m="[object Date]",q="[object Error]",$="[object Function]",x="[object GeneratorFunction]",A="[object Map]",f="[object Number]",c="[object Null]",E="[object Object]",C="[object Proxy]",N="[object RegExp]",G="[object Set]",Y="[object String]",i="[object Undefined]",h="[object WeakMap]",s="[object ArrayBuffer]",d="[object DataView]",p="[object Float32Array]",l="[object Float64Array]",I="[object Int8Array]",v="[object Int16Array]",R="[object Int32Array]",j="[object Uint8Array]",b="[object Uint8ClampedArray]",F="[object Uint16Array]",_="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,Q=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,Z={};Z[p]=Z[l]=Z[I]=Z[v]=Z[R]=Z[j]=Z[b]=Z[F]=Z[_]=!0,Z[O]=Z[T]=Z[s]=Z[W]=Z[d]=Z[m]=Z[q]=Z[$]=Z[A]=Z[f]=Z[E]=Z[N]=Z[G]=Z[Y]=Z[h]=!1;var re=typeof t=="object"&&t&&t.Object===Object&&t,ue=typeof self=="object"&&self&&self.Object===Object&&self,le=re||ue||Function("return this")(),K=e&&!e.nodeType&&e,V=K&&!0&&r&&!r.nodeType&&r,ae=V&&V.exports===K,fe=ae&&re.process,he=function(){try{var y=V&&V.require&&V.require("util").types;return y||fe&&fe.binding&&fe.binding("util")}catch{}}(),P=he&&he.isTypedArray;function M(y,D,z){switch(z.length){case 0:return y.call(D);case 1:return y.call(D,z[0]);case 2:return y.call(D,z[0],z[1]);case 3:return y.call(D,z[0],z[1],z[2])}return y.apply(D,z)}function B(y,D){for(var z=-1,de=Array(y);++z<y;)de[z]=D(z);return de}function oe(y){return function(D){return y(D)}}function ie(y,D){return y==null?void 0:y[D]}function ne(y,D){return function(z){return y(D(z))}}var L=Array.prototype,X=Function.prototype,te=Object.prototype,J=le["__core-js_shared__"],we=X.toString,Re=te.hasOwnProperty,be=function(){var y=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Pe=te.toString,Ne=we.call(Object),ke=RegExp("^"+we.call(Re).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=ae?le.Buffer:void 0,wt=le.Symbol,Le=le.Uint8Array;We&&We.allocUnsafe;var Jt=ne(Object.getPrototypeOf,Object),Yt=Object.create,Xt=te.propertyIsEnumerable,Cr=L.splice,Ze=wt?wt.toStringTag:void 0,Tt=function(){try{var y=jr(Object,"defineProperty");return y({},"",{}),y}catch{}}(),Qt=We?We.isBuffer:void 0,Pt=Math.max,Pr=Date.now,Lt=jr(le,"Map"),et=jr(Object,"create"),Lr=function(){function y(){}return function(D){if(!bt(D))return{};if(Yt)return Yt(D);y.prototype=D;var z=new y;return y.prototype=void 0,z}}();function tt(y){var D=-1,z=y==null?0:y.length;for(this.clear();++D<z;){var de=y[D];this.set(de[0],de[1])}}function xt(){this.__data__=et?et(null):{},this.size=0}function Zt(y){var D=this.has(y)&&delete this.__data__[y];return this.size-=D?1:0,D}function g(y){var D=this.__data__;if(et){var z=D[y];return z===a?void 0:z}return Re.call(D,y)?D[y]:void 0}function S(y){var D=this.__data__;return et?D[y]!==void 0:Re.call(D,y)}function se(y,D){var z=this.__data__;return this.size+=this.has(y)?0:1,z[y]=et&&D===void 0?a:D,this}tt.prototype.clear=xt,tt.prototype.delete=Zt,tt.prototype.get=g,tt.prototype.has=S,tt.prototype.set=se;function ee(y){var D=-1,z=y==null?0:y.length;for(this.clear();++D<z;){var de=y[D];this.set(de[0],de[1])}}function ce(){this.__data__=[],this.size=0}function Ce(y){var D=this.__data__,z=nr(D,y);if(z<0)return!1;var de=D.length-1;return z==de?D.pop():Cr.call(D,z,1),--this.size,!0}function Me(y){var D=this.__data__,z=nr(D,y);return z<0?void 0:D[z][1]}function er(y){return nr(this.__data__,y)>-1}function rt(y,D){var z=this.__data__,de=nr(z,y);return de<0?(++this.size,z.push([y,D])):z[de][1]=D,this}ee.prototype.clear=ce,ee.prototype.delete=Ce,ee.prototype.get=Me,ee.prototype.has=er,ee.prototype.set=rt;function nt(y){var D=-1,z=y==null?0:y.length;for(this.clear();++D<z;){var de=y[D];this.set(de[0],de[1])}}function xr(){this.size=0,this.__data__={hash:new tt,map:new(Lt||ee),string:new tt}}function tr(y){var D=or(this,y).delete(y);return this.size-=D?1:0,D}function rr(y){return or(this,y).get(y)}function Mt(y){return or(this,y).has(y)}function Dt(y,D){var z=or(this,y),de=z.size;return z.set(y,D),this.size+=z.size==de?0:1,this}nt.prototype.clear=xr,nt.prototype.delete=tr,nt.prototype.get=rr,nt.prototype.has=Mt,nt.prototype.set=Dt;function Je(y){var D=this.__data__=new ee(y);this.size=D.size}function _t(){this.__data__=new ee,this.size=0}function it(y){var D=this.__data__,z=D.delete(y);return this.size=D.size,z}function ze(y){return this.__data__.get(y)}function ko(y){return this.__data__.has(y)}function Wo(y,D){var z=this.__data__;if(z instanceof ee){var de=z.__data__;if(!Lt||de.length<n-1)return de.push([y,D]),this.size=++z.size,this;z=this.__data__=new nt(de)}return z.set(y,D),this.size=z.size,this}Je.prototype.clear=_t,Je.prototype.delete=it,Je.prototype.get=ze,Je.prototype.has=ko,Je.prototype.set=Wo;function Fo(y,D){var z=Fr(y),de=!z&&Wr(y),_e=!z&&!de&&zn(y),me=!z&&!de&&!_e&&Kn(y),Se=z||de||_e||me,ye=Se?B(y.length,String):[],Ae=ye.length;for(var Ge in y)Se&&(Ge=="length"||_e&&(Ge=="offset"||Ge=="parent")||me&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||$n(Ge,Ae))||ye.push(Ge);return ye}function Mr(y,D,z){(z!==void 0&&!sr(y[D],z)||z===void 0&&!(D in y))&&Dr(y,D,z)}function Uo(y,D,z){var de=y[D];(!(Re.call(y,D)&&sr(de,z))||z===void 0&&!(D in y))&&Dr(y,D,z)}function nr(y,D){for(var z=y.length;z--;)if(sr(y[z][0],D))return z;return-1}function Dr(y,D,z){D=="__proto__"&&Tt?Tt(y,D,{configurable:!0,enumerable:!0,value:z,writable:!0}):y[D]=z}var qo=es();function ir(y){return y==null?y===void 0?i:c:Ze&&Ze in Object(y)?ts(y):as(y)}function qn(y){return jt(y)&&ir(y)==O}function Bo(y){if(!bt(y)||os(y))return!1;var D=qr(y)?ke:Q;return D.test(cs(y))}function $o(y){return jt(y)&&Gn(y.length)&&!!Z[ir(y)]}function Ho(y){if(!bt(y))return ss(y);var D=Hn(y),z=[];for(var de in y)de=="constructor"&&(D||!Re.call(y,de))||z.push(de);return z}function Bn(y,D,z,de,_e){y!==D&&qo(D,function(me,Se){if(_e||(_e=new Je),bt(me))zo(y,D,Se,z,Bn,de,_e);else{var ye=de?de(kr(y,Se),me,Se+"",y,D,_e):void 0;ye===void 0&&(ye=me),Mr(y,Se,ye)}},Vn)}function zo(y,D,z,de,_e,me,Se){var ye=kr(y,z),Ae=kr(D,z),Ge=Se.get(Ae);if(Ge){Mr(y,z,Ge);return}var Fe=me?me(ye,Ae,z+"",y,D,Se):void 0,kt=Fe===void 0;if(kt){var Br=Fr(Ae),$r=!Br&&zn(Ae),Yn=!Br&&!$r&&Kn(Ae);Fe=Ae,Br||$r||Yn?Fr(ye)?Fe=ye:ds(ye)?Fe=Xo(ye):$r?(kt=!1,Fe=Vo(Ae)):Yn?(kt=!1,Fe=Yo(Ae)):Fe=[]:hs(Ae)||Wr(Ae)?(Fe=ye,Wr(ye)?Fe=ps(ye):(!bt(ye)||qr(ye))&&(Fe=rs(Ae))):kt=!1}kt&&(Se.set(Ae,Fe),_e(Fe,Ae,de,me,Se),Se.delete(Ae)),Mr(y,z,Fe)}function Go(y,D){return us(ls(y,D,Jn),y+"")}var Ko=Tt?function(y,D){return Tt(y,"toString",{configurable:!0,enumerable:!1,value:ws(D),writable:!0})}:Jn;function Vo(y,D){return y.slice()}function Jo(y){var D=new y.constructor(y.byteLength);return new Le(D).set(new Le(y)),D}function Yo(y,D){var z=Jo(y.buffer);return new y.constructor(z,y.byteOffset,y.length)}function Xo(y,D){var z=-1,de=y.length;for(D||(D=Array(de));++z<de;)D[z]=y[z];return D}function Qo(y,D,z,de){var _e=!z;z||(z={});for(var me=-1,Se=D.length;++me<Se;){var ye=D[me],Ae=void 0;Ae===void 0&&(Ae=y[ye]),_e?Dr(z,ye,Ae):Uo(z,ye,Ae)}return z}function Zo(y){return Go(function(D,z){var de=-1,_e=z.length,me=_e>1?z[_e-1]:void 0,Se=_e>2?z[2]:void 0;for(me=y.length>3&&typeof me=="function"?(_e--,me):void 0,Se&&ns(z[0],z[1],Se)&&(me=_e<3?void 0:me,_e=1),D=Object(D);++de<_e;){var ye=z[de];ye&&y(D,ye,de,me)}return D})}function es(y){return function(D,z,de){for(var _e=-1,me=Object(D),Se=de(D),ye=Se.length;ye--;){var Ae=Se[++_e];if(z(me[Ae],Ae,me)===!1)break}return D}}function or(y,D){var z=y.__data__;return is(D)?z[typeof D=="string"?"string":"hash"]:z.map}function jr(y,D){var z=ie(y,D);return Bo(z)?z:void 0}function ts(y){var D=Re.call(y,Ze),z=y[Ze];try{y[Ze]=void 0;var de=!0}catch{}var _e=Pe.call(y);return de&&(D?y[Ze]=z:delete y[Ze]),_e}function rs(y){return typeof y.constructor=="function"&&!Hn(y)?Lr(Jt(y)):{}}function $n(y,D){var z=typeof y;return D=D??w,!!D&&(z=="number"||z!="symbol"&&H.test(y))&&y>-1&&y%1==0&&y<D}function ns(y,D,z){if(!bt(z))return!1;var de=typeof D;return(de=="number"?Ur(z)&&$n(D,z.length):de=="string"&&D in z)?sr(z[D],y):!1}function is(y){var D=typeof y;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?y!=="__proto__":y===null}function os(y){return!!be&&be in y}function Hn(y){var D=y&&y.constructor,z=typeof D=="function"&&D.prototype||te;return y===z}function ss(y){var D=[];if(y!=null)for(var z in Object(y))D.push(z);return D}function as(y){return Pe.call(y)}function ls(y,D,z){return D=Pt(D===void 0?y.length-1:D,0),function(){for(var de=arguments,_e=-1,me=Pt(de.length-D,0),Se=Array(me);++_e<me;)Se[_e]=de[D+_e];_e=-1;for(var ye=Array(D+1);++_e<D;)ye[_e]=de[_e];return ye[D]=z(Se),M(y,this,ye)}}function kr(y,D){if(!(D==="constructor"&&typeof y[D]=="function")&&D!="__proto__")return y[D]}var us=fs(Ko);function fs(y){var D=0,z=0;return function(){var de=Pr(),_e=u-(de-z);if(z=de,_e>0){if(++D>=o)return arguments[0]}else D=0;return y.apply(void 0,arguments)}}function cs(y){if(y!=null){try{return we.call(y)}catch{}try{return y+""}catch{}}return""}function sr(y,D){return y===D||y!==y&&D!==D}var Wr=qn(function(){return arguments}())?qn:function(y){return jt(y)&&Re.call(y,"callee")&&!Xt.call(y,"callee")},Fr=Array.isArray;function Ur(y){return y!=null&&Gn(y.length)&&!qr(y)}function ds(y){return jt(y)&&Ur(y)}var zn=Qt||_s;function qr(y){if(!bt(y))return!1;var D=ir(y);return D==$||D==x||D==k||D==C}function Gn(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=w}function bt(y){var D=typeof y;return y!=null&&(D=="object"||D=="function")}function jt(y){return y!=null&&typeof y=="object"}function hs(y){if(!jt(y)||ir(y)!=E)return!1;var D=Jt(y);if(D===null)return!0;var z=Re.call(D,"constructor")&&D.constructor;return typeof z=="function"&&z instanceof z&&we.call(z)==Ne}var Kn=P?oe(P):$o;function ps(y){return Qo(y,Vn(y))}function Vn(y){return Ur(y)?Fo(y):Ho(y)}var gs=Zo(function(y,D,z){Bn(y,D,z)});function ws(y){return function(){return y}}function Jn(y){return y}function _s(){return!1}r.exports=gs}(qt,qt.exports)),qt.exports}ta();var mr={exports:{}},ra=mr.exports,Ki;function na(){return Ki||(Ki=1,function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(ra,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],o={},u=null;function w(x,A){var f=x[A];if(typeof f.bind=="function")return f.bind(x);try{return Function.prototype.bind.call(f,x)}catch{return function(){return Function.prototype.apply.apply(f,[x,arguments])}}}function O(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function T(x){return x==="debug"&&(x="log"),typeof console===t?!1:x==="trace"&&n?O:console[x]!==void 0?w(console,x):console.log!==void 0?w(console,"log"):e}function k(){for(var x=this.getLevel(),A=0;A<a.length;A++){var f=a[A];this[f]=A<x?e:this.methodFactory(f,x,this.name)}if(this.log=this.debug,typeof console===t&&x<this.levels.SILENT)return"No console available for logging"}function W(x){return function(){typeof console!==t&&(k.call(this),this[x].apply(this,arguments))}}function m(x,A,f){return T(x)||W.apply(this,arguments)}function q(x,A){var f=this,c,E,C,N="loglevel";typeof x=="string"?N+=":"+x:typeof x=="symbol"&&(N=void 0);function G(d){var p=(a[d]||"silent").toUpperCase();if(!(typeof window===t||!N)){try{window.localStorage[N]=p;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+p+";"}catch{}}}function Y(){var d;if(!(typeof window===t||!N)){try{d=window.localStorage[N]}catch{}if(typeof d===t)try{var p=window.document.cookie,l=encodeURIComponent(N),I=p.indexOf(l+"=");I!==-1&&(d=/^([^;]+)/.exec(p.slice(I+l.length+1))[1])}catch{}return f.levels[d]===void 0&&(d=void 0),d}}function i(){if(!(typeof window===t||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function h(d){var p=d;if(typeof p=="string"&&f.levels[p.toUpperCase()]!==void 0&&(p=f.levels[p.toUpperCase()]),typeof p=="number"&&p>=0&&p<=f.levels.SILENT)return p;throw new TypeError("log.setLevel() called with invalid level: "+d)}f.name=x,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=A||m,f.getLevel=function(){return C??E??c},f.setLevel=function(d,p){return C=h(d),p!==!1&&G(C),k.call(f)},f.setDefaultLevel=function(d){E=h(d),Y()||f.setLevel(d,!1)},f.resetLevel=function(){C=null,i(),k.call(f)},f.enableAll=function(d){f.setLevel(f.levels.TRACE,d)},f.disableAll=function(d){f.setLevel(f.levels.SILENT,d)},f.rebuild=function(){if(u!==f&&(c=h(u.getLevel())),k.call(f),u===f)for(var d in o)o[d].rebuild()},c=h(u?u.getLevel():"WARN");var s=Y();s!=null&&(C=h(s)),k.call(f)}u=new q,u.getLogger=function(A){if(typeof A!="symbol"&&typeof A!="string"||A==="")throw new TypeError("You must supply a name when creating a logger.");var f=o[A];return f||(f=o[A]=new q(A,u.methodFactory)),f};var $=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=$),u},u.getLoggers=function(){return o},u.default=u,u})}(mr)),mr.exports}var No=na();const vr=Nt(No),ia=vr.getLogger("http-helpers");ia.setLevel(No.levels.INFO);function oa(r){let e=r;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const Ln={},xn={};for(let r=0;r<16;r++){const e=r,t=r*16,n=r.toString(16).toLowerCase();xn[n]=e,xn[n.toUpperCase()]=e,Ln[n]=t,Ln[n.toUpperCase()]=t}function sa(r){const e=r.length,t=new Uint8Array(e/2);for(let n=0;n<e;n+=2)t[n/2]=Ln[r[n]]+xn[r[n+1]];return t}Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));for(let r=0;r<=256*256-1;r++)BigInt(r);const Ir=r=>{if(typeof r!="string")throw new Error(`hex argument type ${typeof r} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(r))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${r}`);const e=r.slice(2);return sa(e.length%2===0?e:oa(e))},aa=r=>{if(!Number.isSafeInteger(r)||r<0)throw new Error(`Received an invalid integer type: ${r}`);return`0x${r.toString(16)}`},Vt=r=>{const e=aa(r);return Ir(e)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");co.CURVE.n;co.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const la="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Ir(la);const ua="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Ir(ua);const fa="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Ir(fa);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));var Vi;(function(r){r.String="string",r.Bytes="view",r.Number="number"})(Vi||(Vi={}));var Ji;(function(r){r.String="string",r.Bytes="view",r.JSON="json"})(Ji||(Ji={}));var Yi;(function(r){r[r.Number=0]="Number",r[r.BigInt=1]="BigInt",r[r.Uint8Array=2]="Uint8Array",r[r.PrefixedHexString=3]="PrefixedHexString"})(Yi||(Yi={}));var Xi;(function(r){r[r.Deposit=0]="Deposit",r[r.Withdrawal=1]="Withdrawal",r[r.Consolidation=2]="Consolidation"})(Xi||(Xi={}));var St;(function(r){r[r.Version=0]="Version",r[r.Balance=1]="Balance",r[r.Nonce=2]="Nonce",r[r.CodeHash=3]="CodeHash",r[r.CodeSize=4]="CodeSize"})(St||(St={}));Vt(St.Version);Vt(St.Balance);Vt(St.Nonce);Vt(St.CodeHash);Vt(St.CodeSize);BigInt(256)**BigInt(31);var vn={exports:{}},dr={},hr={},Qi;function ca(){if(Qi)return hr;Qi=1,Object.defineProperty(hr,"__esModule",{value:!0});function r(e){var t=4,n=e.length,a=n%t;if(!a)return e;var o=n,u=t-a,w=n+u,O=Ve.alloc(w);for(O.write(e);u--;)O.write("=",o++);return O.toString()}return hr.default=r,hr}var Zi;function da(){if(Zi)return dr;Zi=1,Object.defineProperty(dr,"__esModule",{value:!0});var r=ca();function e(w,O){return O===void 0&&(O="utf8"),Ve.isBuffer(w)?a(w.toString("base64")):a(Ve.from(w,O).toString("base64"))}function t(w,O){return O===void 0&&(O="utf8"),Ve.from(n(w),"base64").toString(O)}function n(w){return w=w.toString(),r.default(w).replace(/\-/g,"+").replace(/_/g,"/")}function a(w){return w.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o(w){return Ve.from(n(w),"base64")}var u=e;return u.encode=e,u.decode=t,u.toBase64=n,u.fromBase64=a,u.toBuffer=o,dr.default=u,dr}var eo;function ha(){return eo||(eo=1,function(r){r.exports=da().default,r.exports.default=r.exports}(vn)),vn.exports}ha();const Ee={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},ht={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};Ee.MAINNET+"",Ee.TESTNET+"",Ee.CYAN+"",Ee.AQUA+"",Ee.CELESTE+"";Ee.AQUA+"",ht.SAPPHIRE_MAINNET,Ee.CELESTE+"",ht.SAPPHIRE_MAINNET,Ee.CYAN+"",ht.SAPPHIRE_MAINNET,Ee.MAINNET+"",ht.SAPPHIRE_MAINNET,Ee.TESTNET+"",ht.SAPPHIRE_DEVNET;Ee.MAINNET+"",Ee.TESTNET+"",Ee.CYAN+"",Ee.AQUA+"",Ee.CELESTE+"";ht.SAPPHIRE_MAINNET+"",ht.SAPPHIRE_DEVNET+"",Ee.MAINNET+"",Ee.TESTNET+"",Ee.CYAN+"",Ee.AQUA+"",Ee.CELESTE+"";Ee.MAINNET+"",Ee.TESTNET+"",Ee.CYAN+"",Ee.AQUA+"",Ee.CELESTE+"";function to(r){let e=!1,t=0,n;try{n=window[r],e=!0,t=n.length;const a="__storage_test__";return n.setItem(a,a),n.removeItem(a),!0}catch(a){const o=a;return o&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&t!==0}}class pa{constructor(){pe(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class ga{constructor(e,t){pe(this,"storage",void 0),pe(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(e)){let n;t==="local"&&to("localStorage")?n=window.localStorage:t==="session"&&to("sessionStorage")?n=window.sessionStorage:n=new pa,this.instanceMap.set(e,new this(e,n))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(n))}}pe(ga,"instanceMap",new Map);He(He({},ht),Ee);var wa=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,En=Math.ceil,Be=Math.floor,De="[BigNumber Error] ",ro=De+"Number primitive has more than 15 significant digits: ",Ke=1e14,ge=14,no=9007199254740991,Sn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],dt=1e7,Ue=1e9;function Co(r){var e,t,n,a=c.prototype={constructor:c,toString:null,valueOf:null},o=new c(1),u=20,w=4,O=-7,T=21,k=-1e7,W=1e7,m=!1,q=1,$=0,x={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",f=!0;function c(i,h){var s,d,p,l,I,v,R,j,b=this;if(!(b instanceof c))return new c(i,h);if(h==null){if(i&&i._isBigNumber===!0){b.s=i.s,!i.c||i.e>W?b.c=b.e=null:i.e<k?b.c=[b.e=0]:(b.e=i.e,b.c=i.c.slice());return}if((v=typeof i=="number")&&i*0==0){if(b.s=1/i<0?(i=-i,-1):1,i===~~i){for(l=0,I=i;I>=10;I/=10,l++);l>W?b.c=b.e=null:(b.e=l,b.c=[i]);return}j=String(i)}else{if(!wa.test(j=String(i)))return n(b,j,v);b.s=j.charCodeAt(0)==45?(j=j.slice(1),-1):1}(l=j.indexOf("."))>-1&&(j=j.replace(".","")),(I=j.search(/e/i))>0?(l<0&&(l=I),l+=+j.slice(I+1),j=j.substring(0,I)):l<0&&(l=j.length)}else{if(Te(h,2,A.length,"Base"),h==10&&f)return b=new c(i),G(b,u+b.e+1,w);if(j=String(i),v=typeof i=="number"){if(i*0!=0)return n(b,j,v,h);if(b.s=1/i<0?(j=j.slice(1),-1):1,c.DEBUG&&j.replace(/^0\.0*|\./,"").length>15)throw Error(ro+i)}else b.s=j.charCodeAt(0)===45?(j=j.slice(1),-1):1;for(s=A.slice(0,h),l=I=0,R=j.length;I<R;I++)if(s.indexOf(d=j.charAt(I))<0){if(d=="."){if(I>l){l=R;continue}}else if(!p&&(j==j.toUpperCase()&&(j=j.toLowerCase())||j==j.toLowerCase()&&(j=j.toUpperCase()))){p=!0,I=-1,l=0;continue}return n(b,String(i),v,h)}v=!1,j=t(j,h,10,b.s),(l=j.indexOf("."))>-1?j=j.replace(".",""):l=j.length}for(I=0;j.charCodeAt(I)===48;I++);for(R=j.length;j.charCodeAt(--R)===48;);if(j=j.slice(I,++R)){if(R-=I,v&&c.DEBUG&&R>15&&(i>no||i!==Be(i)))throw Error(ro+b.s*i);if((l=l-I-1)>W)b.c=b.e=null;else if(l<k)b.c=[b.e=0];else{if(b.e=l,b.c=[],I=(l+1)%ge,l<0&&(I+=ge),I<R){for(I&&b.c.push(+j.slice(0,I)),R-=ge;I<R;)b.c.push(+j.slice(I,I+=ge));I=ge-(j=j.slice(I)).length}else I-=R;for(;I--;j+="0");b.c.push(+j)}}else b.c=[b.e=0]}c.clone=Co,c.ROUND_UP=0,c.ROUND_DOWN=1,c.ROUND_CEIL=2,c.ROUND_FLOOR=3,c.ROUND_HALF_UP=4,c.ROUND_HALF_DOWN=5,c.ROUND_HALF_EVEN=6,c.ROUND_HALF_CEIL=7,c.ROUND_HALF_FLOOR=8,c.EUCLID=9,c.config=c.set=function(i){var h,s;if(i!=null)if(typeof i=="object"){if(i.hasOwnProperty(h="DECIMAL_PLACES")&&(s=i[h],Te(s,0,Ue,h),u=s),i.hasOwnProperty(h="ROUNDING_MODE")&&(s=i[h],Te(s,0,8,h),w=s),i.hasOwnProperty(h="EXPONENTIAL_AT")&&(s=i[h],s&&s.pop?(Te(s[0],-1e9,0,h),Te(s[1],0,Ue,h),O=s[0],T=s[1]):(Te(s,-1e9,Ue,h),O=-(T=s<0?-s:s))),i.hasOwnProperty(h="RANGE"))if(s=i[h],s&&s.pop)Te(s[0],-1e9,-1,h),Te(s[1],1,Ue,h),k=s[0],W=s[1];else if(Te(s,-1e9,Ue,h),s)k=-(W=s<0?-s:s);else throw Error(De+h+" cannot be zero: "+s);if(i.hasOwnProperty(h="CRYPTO"))if(s=i[h],s===!!s)if(s)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))m=s;else throw m=!s,Error(De+"crypto unavailable");else m=s;else throw Error(De+h+" not true or false: "+s);if(i.hasOwnProperty(h="MODULO_MODE")&&(s=i[h],Te(s,0,9,h),q=s),i.hasOwnProperty(h="POW_PRECISION")&&(s=i[h],Te(s,0,Ue,h),$=s),i.hasOwnProperty(h="FORMAT"))if(s=i[h],typeof s=="object")x=s;else throw Error(De+h+" not an object: "+s);if(i.hasOwnProperty(h="ALPHABET"))if(s=i[h],typeof s=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(s))f=s.slice(0,10)=="0123456789",A=s;else throw Error(De+h+" invalid: "+s)}else throw Error(De+"Object expected: "+i);return{DECIMAL_PLACES:u,ROUNDING_MODE:w,EXPONENTIAL_AT:[O,T],RANGE:[k,W],CRYPTO:m,MODULO_MODE:q,POW_PRECISION:$,FORMAT:x,ALPHABET:A}},c.isBigNumber=function(i){if(!i||i._isBigNumber!==!0)return!1;if(!c.DEBUG)return!0;var h,s,d=i.c,p=i.e,l=i.s;e:if({}.toString.call(d)=="[object Array]"){if((l===1||l===-1)&&p>=-1e9&&p<=Ue&&p===Be(p)){if(d[0]===0){if(p===0&&d.length===1)return!0;break e}if(h=(p+1)%ge,h<1&&(h+=ge),String(d[0]).length==h){for(h=0;h<d.length;h++)if(s=d[h],s<0||s>=Ke||s!==Be(s))break e;if(s!==0)return!0}}}else if(d===null&&p===null&&(l===null||l===1||l===-1))return!0;throw Error(De+"Invalid BigNumber: "+i)},c.maximum=c.max=function(){return C(arguments,-1)},c.minimum=c.min=function(){return C(arguments,1)},c.random=function(){var i=9007199254740992,h=Math.random()*i&2097151?function(){return Be(Math.random()*i)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(s){var d,p,l,I,v,R=0,j=[],b=new c(o);if(s==null?s=u:Te(s,0,Ue),I=En(s/ge),m)if(crypto.getRandomValues){for(d=crypto.getRandomValues(new Uint32Array(I*=2));R<I;)v=d[R]*131072+(d[R+1]>>>11),v>=9e15?(p=crypto.getRandomValues(new Uint32Array(2)),d[R]=p[0],d[R+1]=p[1]):(j.push(v%1e14),R+=2);R=I/2}else if(crypto.randomBytes){for(d=crypto.randomBytes(I*=7);R<I;)v=(d[R]&31)*281474976710656+d[R+1]*1099511627776+d[R+2]*4294967296+d[R+3]*16777216+(d[R+4]<<16)+(d[R+5]<<8)+d[R+6],v>=9e15?crypto.randomBytes(7).copy(d,R):(j.push(v%1e14),R+=7);R=I/7}else throw m=!1,Error(De+"crypto unavailable");if(!m)for(;R<I;)v=h(),v<9e15&&(j[R++]=v%1e14);for(I=j[--R],s%=ge,I&&s&&(v=Sn[ge-s],j[R]=Be(I/v)*v);j[R]===0;j.pop(),R--);if(R<0)j=[l=0];else{for(l=-1;j[0]===0;j.splice(0,1),l-=ge);for(R=1,v=j[0];v>=10;v/=10,R++);R<ge&&(l-=ge-R)}return b.e=l,b.c=j,b}}(),c.sum=function(){for(var i=1,h=arguments,s=new c(h[0]);i<h.length;)s=s.plus(h[i++]);return s},t=function(){var i="0123456789";function h(s,d,p,l){for(var I,v=[0],R,j=0,b=s.length;j<b;){for(R=v.length;R--;v[R]*=d);for(v[0]+=l.indexOf(s.charAt(j++)),I=0;I<v.length;I++)v[I]>p-1&&(v[I+1]==null&&(v[I+1]=0),v[I+1]+=v[I]/p|0,v[I]%=p)}return v.reverse()}return function(s,d,p,l,I){var v,R,j,b,F,_,U,Q,H=s.indexOf("."),Z=u,re=w;for(H>=0&&(b=$,$=0,s=s.replace(".",""),Q=new c(d),_=Q.pow(s.length-H),$=b,Q.c=h(ot(qe(_.c),_.e,"0"),10,p,i),Q.e=Q.c.length),U=h(s,d,p,I?(v=A,i):(v=i,A)),j=b=U.length;U[--b]==0;U.pop());if(!U[0])return v.charAt(0);if(H<0?--j:(_.c=U,_.e=j,_.s=l,_=e(_,Q,Z,re,p),U=_.c,F=_.r,j=_.e),R=j+Z+1,H=U[R],b=p/2,F=F||R<0||U[R+1]!=null,F=re<4?(H!=null||F)&&(re==0||re==(_.s<0?3:2)):H>b||H==b&&(re==4||F||re==6&&U[R-1]&1||re==(_.s<0?8:7)),R<1||!U[0])s=F?ot(v.charAt(1),-Z,v.charAt(0)):v.charAt(0);else{if(U.length=R,F)for(--p;++U[--R]>p;)U[R]=0,R||(++j,U=[1].concat(U));for(b=U.length;!U[--b];);for(H=0,s="";H<=b;s+=v.charAt(U[H++]));s=ot(s,j,v.charAt(0))}return s}}(),e=function(){function i(d,p,l){var I,v,R,j,b=0,F=d.length,_=p%dt,U=p/dt|0;for(d=d.slice();F--;)R=d[F]%dt,j=d[F]/dt|0,I=U*R+j*_,v=_*R+I%dt*dt+b,b=(v/l|0)+(I/dt|0)+U*j,d[F]=v%l;return b&&(d=[b].concat(d)),d}function h(d,p,l,I){var v,R;if(l!=I)R=l>I?1:-1;else for(v=R=0;v<l;v++)if(d[v]!=p[v]){R=d[v]>p[v]?1:-1;break}return R}function s(d,p,l,I){for(var v=0;l--;)d[l]-=v,v=d[l]<p[l]?1:0,d[l]=v*I+d[l]-p[l];for(;!d[0]&&d.length>1;d.splice(0,1));}return function(d,p,l,I,v){var R,j,b,F,_,U,Q,H,Z,re,ue,le,K,V,ae,fe,he,P=d.s==p.s?1:-1,M=d.c,B=p.c;if(!M||!M[0]||!B||!B[0])return new c(!d.s||!p.s||(M?B&&M[0]==B[0]:!B)?NaN:M&&M[0]==0||!B?P*0:P/0);for(H=new c(P),Z=H.c=[],j=d.e-p.e,P=l+j+1,v||(v=Ke,j=$e(d.e/ge)-$e(p.e/ge),P=P/ge|0),b=0;B[b]==(M[b]||0);b++);if(B[b]>(M[b]||0)&&j--,P<0)Z.push(1),F=!0;else{for(V=M.length,fe=B.length,b=0,P+=2,_=Be(v/(B[0]+1)),_>1&&(B=i(B,_,v),M=i(M,_,v),fe=B.length,V=M.length),K=fe,re=M.slice(0,fe),ue=re.length;ue<fe;re[ue++]=0);he=B.slice(),he=[0].concat(he),ae=B[0],B[1]>=v/2&&ae++;do{if(_=0,R=h(B,re,fe,ue),R<0){if(le=re[0],fe!=ue&&(le=le*v+(re[1]||0)),_=Be(le/ae),_>1)for(_>=v&&(_=v-1),U=i(B,_,v),Q=U.length,ue=re.length;h(U,re,Q,ue)==1;)_--,s(U,fe<Q?he:B,Q,v),Q=U.length,R=1;else _==0&&(R=_=1),U=B.slice(),Q=U.length;if(Q<ue&&(U=[0].concat(U)),s(re,U,ue,v),ue=re.length,R==-1)for(;h(B,re,fe,ue)<1;)_++,s(re,fe<ue?he:B,ue,v),ue=re.length}else R===0&&(_++,re=[0]);Z[b++]=_,re[0]?re[ue++]=M[K]||0:(re=[M[K]],ue=1)}while((K++<V||re[0]!=null)&&P--);F=re[0]!=null,Z[0]||Z.splice(0,1)}if(v==Ke){for(b=1,P=Z[0];P>=10;P/=10,b++);G(H,l+(H.e=b+j*ge-1)+1,I,F)}else H.e=j,H.r=+F;return H}}();function E(i,h,s,d){var p,l,I,v,R;if(s==null?s=w:Te(s,0,8),!i.c)return i.toString();if(p=i.c[0],I=i.e,h==null)R=qe(i.c),R=d==1||d==2&&(I<=O||I>=T)?gr(R,I):ot(R,I,"0");else if(i=G(new c(i),h,s),l=i.e,R=qe(i.c),v=R.length,d==1||d==2&&(h<=l||l<=O)){for(;v<h;R+="0",v++);R=gr(R,l)}else if(h-=I,R=ot(R,l,"0"),l+1>v){if(--h>0)for(R+=".";h--;R+="0");}else if(h+=l-v,h>0)for(l+1==v&&(R+=".");h--;R+="0");return i.s<0&&p?"-"+R:R}function C(i,h){for(var s,d,p=1,l=new c(i[0]);p<i.length;p++)d=new c(i[p]),(!d.s||(s=yt(l,d))===h||s===0&&l.s===h)&&(l=d);return l}function N(i,h,s){for(var d=1,p=h.length;!h[--p];h.pop());for(p=h[0];p>=10;p/=10,d++);return(s=d+s*ge-1)>W?i.c=i.e=null:s<k?i.c=[i.e=0]:(i.e=s,i.c=h),i}n=function(){var i=/^(-?)0([xbo])(?=\w[\w.]*$)/i,h=/^([^.]+)\.$/,s=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,p=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(l,I,v,R){var j,b=v?I:I.replace(p,"");if(d.test(b))l.s=isNaN(b)?null:b<0?-1:1;else{if(!v&&(b=b.replace(i,function(F,_,U){return j=(U=U.toLowerCase())=="x"?16:U=="b"?2:8,!R||R==j?_:F}),R&&(j=R,b=b.replace(h,"$1").replace(s,"0.$1")),I!=b))return new c(b,j);if(c.DEBUG)throw Error(De+"Not a"+(R?" base "+R:"")+" number: "+I);l.s=null}l.c=l.e=null}}();function G(i,h,s,d){var p,l,I,v,R,j,b,F=i.c,_=Sn;if(F){e:{for(p=1,v=F[0];v>=10;v/=10,p++);if(l=h-p,l<0)l+=ge,I=h,R=F[j=0],b=Be(R/_[p-I-1]%10);else if(j=En((l+1)/ge),j>=F.length)if(d){for(;F.length<=j;F.push(0));R=b=0,p=1,l%=ge,I=l-ge+1}else break e;else{for(R=v=F[j],p=1;v>=10;v/=10,p++);l%=ge,I=l-ge+p,b=I<0?0:Be(R/_[p-I-1]%10)}if(d=d||h<0||F[j+1]!=null||(I<0?R:R%_[p-I-1]),d=s<4?(b||d)&&(s==0||s==(i.s<0?3:2)):b>5||b==5&&(s==4||d||s==6&&(l>0?I>0?R/_[p-I]:0:F[j-1])%10&1||s==(i.s<0?8:7)),h<1||!F[0])return F.length=0,d?(h-=i.e+1,F[0]=_[(ge-h%ge)%ge],i.e=-h||0):F[0]=i.e=0,i;if(l==0?(F.length=j,v=1,j--):(F.length=j+1,v=_[ge-l],F[j]=I>0?Be(R/_[p-I]%_[I])*v:0),d)for(;;)if(j==0){for(l=1,I=F[0];I>=10;I/=10,l++);for(I=F[0]+=v,v=1;I>=10;I/=10,v++);l!=v&&(i.e++,F[0]==Ke&&(F[0]=1));break}else{if(F[j]+=v,F[j]!=Ke)break;F[j--]=0,v=1}for(l=F.length;F[--l]===0;F.pop());}i.e>W?i.c=i.e=null:i.e<k&&(i.c=[i.e=0])}return i}function Y(i){var h,s=i.e;return s===null?i.toString():(h=qe(i.c),h=s<=O||s>=T?gr(h,s):ot(h,s,"0"),i.s<0?"-"+h:h)}return a.absoluteValue=a.abs=function(){var i=new c(this);return i.s<0&&(i.s=1),i},a.comparedTo=function(i,h){return yt(this,new c(i,h))},a.decimalPlaces=a.dp=function(i,h){var s,d,p,l=this;if(i!=null)return Te(i,0,Ue),h==null?h=w:Te(h,0,8),G(new c(l),i+l.e+1,h);if(!(s=l.c))return null;if(d=((p=s.length-1)-$e(this.e/ge))*ge,p=s[p])for(;p%10==0;p/=10,d--);return d<0&&(d=0),d},a.dividedBy=a.div=function(i,h){return e(this,new c(i,h),u,w)},a.dividedToIntegerBy=a.idiv=function(i,h){return e(this,new c(i,h),0,1)},a.exponentiatedBy=a.pow=function(i,h){var s,d,p,l,I,v,R,j,b,F=this;if(i=new c(i),i.c&&!i.isInteger())throw Error(De+"Exponent not an integer: "+Y(i));if(h!=null&&(h=new c(h)),v=i.e>14,!F.c||!F.c[0]||F.c[0]==1&&!F.e&&F.c.length==1||!i.c||!i.c[0])return b=new c(Math.pow(+Y(F),v?i.s*(2-pr(i)):+Y(i))),h?b.mod(h):b;if(R=i.s<0,h){if(h.c?!h.c[0]:!h.s)return new c(NaN);d=!R&&F.isInteger()&&h.isInteger(),d&&(F=F.mod(h))}else{if(i.e>9&&(F.e>0||F.e<-1||(F.e==0?F.c[0]>1||v&&F.c[1]>=24e7:F.c[0]<8e13||v&&F.c[0]<=9999975e7)))return l=F.s<0&&pr(i)?-0:0,F.e>-1&&(l=1/l),new c(R?1/l:l);$&&(l=En($/ge+2))}for(v?(s=new c(.5),R&&(i.s=1),j=pr(i)):(p=Math.abs(+Y(i)),j=p%2),b=new c(o);;){if(j){if(b=b.times(F),!b.c)break;l?b.c.length>l&&(b.c.length=l):d&&(b=b.mod(h))}if(p){if(p=Be(p/2),p===0)break;j=p%2}else if(i=i.times(s),G(i,i.e+1,1),i.e>14)j=pr(i);else{if(p=+Y(i),p===0)break;j=p%2}F=F.times(F),l?F.c&&F.c.length>l&&(F.c.length=l):d&&(F=F.mod(h))}return d?b:(R&&(b=o.div(b)),h?b.mod(h):l?G(b,$,w,I):b)},a.integerValue=function(i){var h=new c(this);return i==null?i=w:Te(i,0,8),G(h,h.e+1,i)},a.isEqualTo=a.eq=function(i,h){return yt(this,new c(i,h))===0},a.isFinite=function(){return!!this.c},a.isGreaterThan=a.gt=function(i,h){return yt(this,new c(i,h))>0},a.isGreaterThanOrEqualTo=a.gte=function(i,h){return(h=yt(this,new c(i,h)))===1||h===0},a.isInteger=function(){return!!this.c&&$e(this.e/ge)>this.c.length-2},a.isLessThan=a.lt=function(i,h){return yt(this,new c(i,h))<0},a.isLessThanOrEqualTo=a.lte=function(i,h){return(h=yt(this,new c(i,h)))===-1||h===0},a.isNaN=function(){return!this.s},a.isNegative=function(){return this.s<0},a.isPositive=function(){return this.s>0},a.isZero=function(){return!!this.c&&this.c[0]==0},a.minus=function(i,h){var s,d,p,l,I=this,v=I.s;if(i=new c(i,h),h=i.s,!v||!h)return new c(NaN);if(v!=h)return i.s=-h,I.plus(i);var R=I.e/ge,j=i.e/ge,b=I.c,F=i.c;if(!R||!j){if(!b||!F)return b?(i.s=-h,i):new c(F?I:NaN);if(!b[0]||!F[0])return F[0]?(i.s=-h,i):new c(b[0]?I:w==3?-0:0)}if(R=$e(R),j=$e(j),b=b.slice(),v=R-j){for((l=v<0)?(v=-v,p=b):(j=R,p=F),p.reverse(),h=v;h--;p.push(0));p.reverse()}else for(d=(l=(v=b.length)<(h=F.length))?v:h,v=h=0;h<d;h++)if(b[h]!=F[h]){l=b[h]<F[h];break}if(l&&(p=b,b=F,F=p,i.s=-i.s),h=(d=F.length)-(s=b.length),h>0)for(;h--;b[s++]=0);for(h=Ke-1;d>v;){if(b[--d]<F[d]){for(s=d;s&&!b[--s];b[s]=h);--b[s],b[d]+=Ke}b[d]-=F[d]}for(;b[0]==0;b.splice(0,1),--j);return b[0]?N(i,b,j):(i.s=w==3?-1:1,i.c=[i.e=0],i)},a.modulo=a.mod=function(i,h){var s,d,p=this;return i=new c(i,h),!p.c||!i.s||i.c&&!i.c[0]?new c(NaN):!i.c||p.c&&!p.c[0]?new c(p):(q==9?(d=i.s,i.s=1,s=e(p,i,0,3),i.s=d,s.s*=d):s=e(p,i,0,q),i=p.minus(s.times(i)),!i.c[0]&&q==1&&(i.s=p.s),i)},a.multipliedBy=a.times=function(i,h){var s,d,p,l,I,v,R,j,b,F,_,U,Q,H,Z,re=this,ue=re.c,le=(i=new c(i,h)).c;if(!ue||!le||!ue[0]||!le[0])return!re.s||!i.s||ue&&!ue[0]&&!le||le&&!le[0]&&!ue?i.c=i.e=i.s=null:(i.s*=re.s,!ue||!le?i.c=i.e=null:(i.c=[0],i.e=0)),i;for(d=$e(re.e/ge)+$e(i.e/ge),i.s*=re.s,R=ue.length,F=le.length,R<F&&(Q=ue,ue=le,le=Q,p=R,R=F,F=p),p=R+F,Q=[];p--;Q.push(0));for(H=Ke,Z=dt,p=F;--p>=0;){for(s=0,_=le[p]%Z,U=le[p]/Z|0,I=R,l=p+I;l>p;)j=ue[--I]%Z,b=ue[I]/Z|0,v=U*j+b*_,j=_*j+v%Z*Z+Q[l]+s,s=(j/H|0)+(v/Z|0)+U*b,Q[l--]=j%H;Q[l]=s}return s?++d:Q.splice(0,1),N(i,Q,d)},a.negated=function(){var i=new c(this);return i.s=-i.s||null,i},a.plus=function(i,h){var s,d=this,p=d.s;if(i=new c(i,h),h=i.s,!p||!h)return new c(NaN);if(p!=h)return i.s=-h,d.minus(i);var l=d.e/ge,I=i.e/ge,v=d.c,R=i.c;if(!l||!I){if(!v||!R)return new c(p/0);if(!v[0]||!R[0])return R[0]?i:new c(v[0]?d:p*0)}if(l=$e(l),I=$e(I),v=v.slice(),p=l-I){for(p>0?(I=l,s=R):(p=-p,s=v),s.reverse();p--;s.push(0));s.reverse()}for(p=v.length,h=R.length,p-h<0&&(s=R,R=v,v=s,h=p),p=0;h;)p=(v[--h]=v[h]+R[h]+p)/Ke|0,v[h]=Ke===v[h]?0:v[h]%Ke;return p&&(v=[p].concat(v),++I),N(i,v,I)},a.precision=a.sd=function(i,h){var s,d,p,l=this;if(i!=null&&i!==!!i)return Te(i,1,Ue),h==null?h=w:Te(h,0,8),G(new c(l),i,h);if(!(s=l.c))return null;if(p=s.length-1,d=p*ge+1,p=s[p]){for(;p%10==0;p/=10,d--);for(p=s[0];p>=10;p/=10,d++);}return i&&l.e+1>d&&(d=l.e+1),d},a.shiftedBy=function(i){return Te(i,-9007199254740991,no),this.times("1e"+i)},a.squareRoot=a.sqrt=function(){var i,h,s,d,p,l=this,I=l.c,v=l.s,R=l.e,j=u+4,b=new c("0.5");if(v!==1||!I||!I[0])return new c(!v||v<0&&(!I||I[0])?NaN:I?l:1/0);if(v=Math.sqrt(+Y(l)),v==0||v==1/0?(h=qe(I),(h.length+R)%2==0&&(h+="0"),v=Math.sqrt(+h),R=$e((R+1)/2)-(R<0||R%2),v==1/0?h="5e"+R:(h=v.toExponential(),h=h.slice(0,h.indexOf("e")+1)+R),s=new c(h)):s=new c(v+""),s.c[0]){for(R=s.e,v=R+j,v<3&&(v=0);;)if(p=s,s=b.times(p.plus(e(l,p,j,1))),qe(p.c).slice(0,v)===(h=qe(s.c)).slice(0,v))if(s.e<R&&--v,h=h.slice(v-3,v+1),h=="9999"||!d&&h=="4999"){if(!d&&(G(p,p.e+u+2,0),p.times(p).eq(l))){s=p;break}j+=4,v+=4,d=1}else{(!+h||!+h.slice(1)&&h.charAt(0)=="5")&&(G(s,s.e+u+2,1),i=!s.times(s).eq(l));break}}return G(s,s.e+u+1,w,i)},a.toExponential=function(i,h){return i!=null&&(Te(i,0,Ue),i++),E(this,i,h,1)},a.toFixed=function(i,h){return i!=null&&(Te(i,0,Ue),i=i+this.e+1),E(this,i,h)},a.toFormat=function(i,h,s){var d,p=this;if(s==null)i!=null&&h&&typeof h=="object"?(s=h,h=null):i&&typeof i=="object"?(s=i,i=h=null):s=x;else if(typeof s!="object")throw Error(De+"Argument not an object: "+s);if(d=p.toFixed(i,h),p.c){var l,I=d.split("."),v=+s.groupSize,R=+s.secondaryGroupSize,j=s.groupSeparator||"",b=I[0],F=I[1],_=p.s<0,U=_?b.slice(1):b,Q=U.length;if(R&&(l=v,v=R,R=l,Q-=l),v>0&&Q>0){for(l=Q%v||v,b=U.substr(0,l);l<Q;l+=v)b+=j+U.substr(l,v);R>0&&(b+=j+U.slice(l)),_&&(b="-"+b)}d=F?b+(s.decimalSeparator||"")+((R=+s.fractionGroupSize)?F.replace(new RegExp("\\d{"+R+"}\\B","g"),"$&"+(s.fractionGroupSeparator||"")):F):b}return(s.prefix||"")+d+(s.suffix||"")},a.toFraction=function(i){var h,s,d,p,l,I,v,R,j,b,F,_,U=this,Q=U.c;if(i!=null&&(v=new c(i),!v.isInteger()&&(v.c||v.s!==1)||v.lt(o)))throw Error(De+"Argument "+(v.isInteger()?"out of range: ":"not an integer: ")+Y(v));if(!Q)return new c(U);for(h=new c(o),j=s=new c(o),d=R=new c(o),_=qe(Q),l=h.e=_.length-U.e-1,h.c[0]=Sn[(I=l%ge)<0?ge+I:I],i=!i||v.comparedTo(h)>0?l>0?h:j:v,I=W,W=1/0,v=new c(_),R.c[0]=0;b=e(v,h,0,1),p=s.plus(b.times(d)),p.comparedTo(i)!=1;)s=d,d=p,j=R.plus(b.times(p=j)),R=p,h=v.minus(b.times(p=h)),v=p;return p=e(i.minus(s),d,0,1),R=R.plus(p.times(j)),s=s.plus(p.times(d)),R.s=j.s=U.s,l=l*2,F=e(j,d,l,w).minus(U).abs().comparedTo(e(R,s,l,w).minus(U).abs())<1?[j,d]:[R,s],W=I,F},a.toNumber=function(){return+Y(this)},a.toPrecision=function(i,h){return i!=null&&Te(i,1,Ue),E(this,i,h,2)},a.toString=function(i){var h,s=this,d=s.s,p=s.e;return p===null?d?(h="Infinity",d<0&&(h="-"+h)):h="NaN":(i==null?h=p<=O||p>=T?gr(qe(s.c),p):ot(qe(s.c),p,"0"):i===10&&f?(s=G(new c(s),u+p+1,w),h=ot(qe(s.c),s.e,"0")):(Te(i,2,A.length,"Base"),h=t(ot(qe(s.c),p,"0"),10,i,d,!0)),d<0&&s.c[0]&&(h="-"+h)),h},a.valueOf=a.toJSON=function(){return Y(this)},a._isBigNumber=!0,a[Symbol.toStringTag]="BigNumber",a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf,r!=null&&c.set(r),c}function $e(r){var e=r|0;return r>0||r===e?e:e-1}function qe(r){for(var e,t,n=1,a=r.length,o=r[0]+"";n<a;){for(e=r[n++]+"",t=ge-e.length;t--;e="0"+e);o+=e}for(a=o.length;o.charCodeAt(--a)===48;);return o.slice(0,a+1||1)}function yt(r,e){var t,n,a=r.c,o=e.c,u=r.s,w=e.s,O=r.e,T=e.e;if(!u||!w)return null;if(t=a&&!a[0],n=o&&!o[0],t||n)return t?n?0:-w:u;if(u!=w)return u;if(t=u<0,n=O==T,!a||!o)return n?0:!a^t?1:-1;if(!n)return O>T^t?1:-1;for(w=(O=a.length)<(T=o.length)?O:T,u=0;u<w;u++)if(a[u]!=o[u])return a[u]>o[u]^t?1:-1;return O==T?0:O>T^t?1:-1}function Te(r,e,t,n){if(r<e||r>t||r!==Be(r))throw Error(De+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function pr(r){var e=r.c.length-1;return $e(r.e/ge)==e&&r.c[e]%2!=0}function gr(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function ot(r,e,t){var n,a;if(e<0){for(a=t+".";++e;a+=t);r=a+r}else if(n=r.length,++e>n){for(a=t,e-=n;--e;a+=t);r+=a}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}Co();class _a extends Error{}_a.prototype.name="InvalidTokenError";const wr={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},at={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},ba={GET_PROVIDER_STATE:"wallet_get_provider_state"},An={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function ya(r){return function(t,n,a){a(o=>{n.error&&vr.warn(`Error in RPC response:
`,n),!t.isTorusInternal&&(vr.info(`RPC (${r.origin}):`,t,"->",n),o())})}}var Rn={},mt={},io;function Wn(){if(io)return mt;io=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.EthereumProviderError=mt.EthereumRpcError=void 0;const r=Ro();class e extends Error{constructor(u,w,O){if(!Number.isInteger(u))throw new Error('"code" must be an integer.');if(!w||typeof w!="string")throw new Error('"message" must be a nonempty string.');super(w),this.code=u,O!==void 0&&(this.data=O)}serialize(){const u={code:this.code,message:this.message};return this.data!==void 0&&(u.data=this.data),this.stack&&(u.stack=this.stack),u}toString(){return r.default(this.serialize(),a,2)}}mt.EthereumRpcError=e;class t extends e{constructor(u,w,O){if(!n(u))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(u,w,O)}}mt.EthereumProviderError=t;function n(o){return Number.isInteger(o)&&o>=1e3&&o<=4999}function a(o,u){if(u!=="[Circular]")return u}return mt}var Tn={},vt={},oo;function Fn(){return oo||(oo=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.errorValues=vt.errorCodes=void 0,vt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},vt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}),vt}var so;function Po(){return so||(so=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Fn(),t=Wn(),n=e.errorCodes.rpc.internal,a="Unspecified error message. This is a bug, please report it.",o={code:n,message:u(n)};r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function u(m,q=a){if(Number.isInteger(m)){const $=m.toString();if(W(e.errorValues,$))return e.errorValues[$].message;if(T(m))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return q}r.getMessageFromCode=u;function w(m){if(!Number.isInteger(m))return!1;const q=m.toString();return!!(e.errorValues[q]||T(m))}r.isValidCode=w;function O(m,{fallbackError:q=o,shouldIncludeStack:$=!1}={}){var x,A;if(!q||!Number.isInteger(q.code)||typeof q.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(m instanceof t.EthereumRpcError)return m.serialize();const f={};if(m&&typeof m=="object"&&!Array.isArray(m)&&W(m,"code")&&w(m.code)){const E=m;f.code=E.code,E.message&&typeof E.message=="string"?(f.message=E.message,W(E,"data")&&(f.data=E.data)):(f.message=u(f.code),f.data={originalError:k(m)})}else{f.code=q.code;const E=(x=m)===null||x===void 0?void 0:x.message;f.message=E&&typeof E=="string"?E:q.message,f.data={originalError:k(m)}}const c=(A=m)===null||A===void 0?void 0:A.stack;return $&&m&&c&&typeof c=="string"&&(f.stack=c),f}r.serializeError=O;function T(m){return m>=-32099&&m<=-32e3}function k(m){return m&&typeof m=="object"&&!Array.isArray(m)?Object.assign({},m):m}function W(m,q){return Object.prototype.hasOwnProperty.call(m,q)}}(Tn)),Tn}var Ut={},ao;function ma(){if(ao)return Ut;ao=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.ethErrors=void 0;const r=Wn(),e=Po(),t=Fn();Ut.ethErrors={rpc:{parse:u=>n(t.errorCodes.rpc.parse,u),invalidRequest:u=>n(t.errorCodes.rpc.invalidRequest,u),invalidParams:u=>n(t.errorCodes.rpc.invalidParams,u),methodNotFound:u=>n(t.errorCodes.rpc.methodNotFound,u),internal:u=>n(t.errorCodes.rpc.internal,u),server:u=>{if(!u||typeof u!="object"||Array.isArray(u))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:w}=u;if(!Number.isInteger(w)||w>-32005||w<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return n(w,u)},invalidInput:u=>n(t.errorCodes.rpc.invalidInput,u),resourceNotFound:u=>n(t.errorCodes.rpc.resourceNotFound,u),resourceUnavailable:u=>n(t.errorCodes.rpc.resourceUnavailable,u),transactionRejected:u=>n(t.errorCodes.rpc.transactionRejected,u),methodNotSupported:u=>n(t.errorCodes.rpc.methodNotSupported,u),limitExceeded:u=>n(t.errorCodes.rpc.limitExceeded,u)},provider:{userRejectedRequest:u=>a(t.errorCodes.provider.userRejectedRequest,u),unauthorized:u=>a(t.errorCodes.provider.unauthorized,u),unsupportedMethod:u=>a(t.errorCodes.provider.unsupportedMethod,u),disconnected:u=>a(t.errorCodes.provider.disconnected,u),chainDisconnected:u=>a(t.errorCodes.provider.chainDisconnected,u),custom:u=>{if(!u||typeof u!="object"||Array.isArray(u))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:w,message:O,data:T}=u;if(!O||typeof O!="string")throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(w,O,T)}}};function n(u,w){const[O,T]=o(w);return new r.EthereumRpcError(u,O||e.getMessageFromCode(u),T)}function a(u,w){const[O,T]=o(w);return new r.EthereumProviderError(u,O||e.getMessageFromCode(u),T)}function o(u){if(u){if(typeof u=="string")return[u];if(typeof u=="object"&&!Array.isArray(u)){const{message:w,data:O}=u;if(w&&typeof w!="string")throw new Error("Must specify string message.");return[w||void 0,O]}}return[]}return Ut}var lo;function va(){return lo||(lo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMessageFromCode=r.serializeError=r.EthereumProviderError=r.EthereumRpcError=r.ethErrors=r.errorCodes=void 0;const e=Wn();Object.defineProperty(r,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const t=Po();Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const n=ma();Object.defineProperty(r,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const a=Fn();Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return a.errorCodes}})}(Rn)),Rn}var pt=va(),In,uo;function Ea(){return uo||(uo=1,In=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,a,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!r(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[a]))return!1;for(a=n;a--!==0;){var u=o[a];if(!r(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}),In}var Sa=Ea();const Aa=Nt(Sa);var Ra="2.1.0";function Lo(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}function Ta(r){return Lo(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object"}function Ia(r){return Lo(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object"}function Oa(r){return Ta(r)&&Ia(r)}var Qe={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:r=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${r} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:r=>`Invalid options. Received: { maxEventListeners: ${r}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:r=>`'args.logger' must include required method '${r}'.`},info:{connected:r=>`Torus: Connected to chain with ID "${r}".`}};const Na={PRODUCTION:"production"},Bt={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},Ca={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var Un={translations:Ca,localStorageKeyPrefix:"torus-"},ve=vr.getLogger("solana-embed");function Pa(){return(r,e,t)=>{(typeof r.method!="string"||!r.method)&&(e.error=pt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:r})),t(n=>{const{error:a}=e;return a&&ve.error(`Torus - RPC Error: ${a.message}`,a),n()})}}function La(r,e,t){let n=`Torus: Lost connection to "${r}".`;e!=null&&e.stack&&(n+=`
${e.stack}`),ve.warn(n),t&&t.listenerCount("error")>0&&t.emit("error",n)}const _r=()=>Math.random().toString(36).slice(2),xo=async r=>{let e,t;switch(r){case"testing":e="https://solana-testing.tor.us",t="debug";break;case"development":e="http://localhost:8080",t="debug";break;default:e="https://solana.tor.us",t="error";break}return{torusUrl:e,logLevel:t}},xa=()=>{let r=window.navigator.language||"en-US";const e=r.split("-");return r=Object.prototype.hasOwnProperty.call(Un.translations,e[0])?e[0]:"en",r},Ma={height:660,width:375},Da={height:740,width:1315},ja={height:700,width:1200},Mo={height:600,width:400};function ka(r){let e;try{e=window[r];const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){const n=t;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function $t(r){let{width:e,height:t}=r;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,a=window.screenTop!==void 0?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,u=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,w=1,O=Math.abs((o-e)/2/w+n),T=Math.abs((u-t)/2/w+a);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${t/w},width=${e/w},top=${T},left=${O}`}class Do extends Tr{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:a="provider"}=t;if(super(),pe(this,"isTorus",void 0),pe(this,"_rpcEngine",void 0),pe(this,"jsonRpcConnectionEvents",void 0),pe(this,"_state",void 0),!Oa(e))throw new Error(Qe.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Zs;Mi(e,o,e,this._handleStreamDisconnect.bind(this,"Torus")),o.ignoreStream("phishing");const u=Ys();Mi(u.stream,o.createStream(a),u.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const w=new st;w.push(Xs()),w.push(Pa()),w.push(ya({origin:location.origin})),w.push(u.middleware),this._rpcEngine=w,this.jsonRpcConnectionEvents=u.events}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw pt.ethErrors.rpc.invalidRequest({message:Qe.errors.invalidRequestArgs(),data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw pt.ethErrors.rpc.invalidRequest({message:Qe.errors.invalidRequestMethod(),data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw pt.ethErrors.rpc.invalidRequest({message:Qe.errors.invalidRequestParams(),data:e});return new Promise((a,o)=>{this._rpcRequest({method:t,params:n},Pn(a,o))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,n)=>{this._rpcRequest(e,Pn(t,n))})}_handleStreamDisconnect(e,t){La(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const Ot=r=>{const e=window.document.createElement("template"),t=r.trim();return e.innerHTML=t,e.content.firstChild};function br(r){return r.version===void 0}class jo extends Tr{constructor(e){let{url:t,target:n,features:a,timeout:o=3e4}=e;super(),pe(this,"url",void 0),pe(this,"target",void 0),pe(this,"features",void 0),pe(this,"window",void 0),pe(this,"windowTimer",void 0),pe(this,"iClosedWindow",void 0),pe(this,"timeout",void 0),this.url=t,this.target=n||"_blank",this.features=a||$t(ja),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=o,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),(e=this.window)!=null&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class Or extends Do{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:a="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:a}),pe(this,"embedTranslations",void 0),pe(this,"torusUrl",void 0),pe(this,"dappStorageKey",void 0),pe(this,"windowRefs",void 0),pe(this,"tryWindowHandle",void 0),pe(this,"torusAlertContainer",void 0),pe(this,"torusIframe",void 0),this._state=He({},Or._defaultState),this.torusUrl="",this.dappStorageKey="";const o=Un.translations[xa()];this.embedTranslations=o.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const u=w=>{const{method:O,params:T}=w;if(O===wr.IFRAME_STATUS){const{isFullScreen:k,rid:W}=T;this._displayIframe({isFull:k,rid:W})}else if(O==="create_window"){const{windowId:k,url:W}=T;this._createPopupBlockAlert(k,W)}else if(O===wr.CLOSE_WINDOW)this._handleCloseWindow(T);else if(O===wr.USER_LOGGED_IN){const{currentLoginProvider:k}=T;this._state.isLoggedIn=!0,this._state.currentLoginProvider=k}else O===wr.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",u)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:n,torusAlertContainer:a,torusIframe:o}=e;this.torusUrl=t,this.dappStorageKey=n,this.torusAlertContainer=a,this.torusIframe=o,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:u,isLoggedIn:w}=await this.request({method:at.GET_PROVIDER_STATE,params:[]});this._handleConnect(u,w)}catch(t){ve.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{ve.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:n,features:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(o.hash?o.hash+=`&dappStorageKey=${this.dappStorageKey}`:o.hash=`#dappStorageKey=${this.dappStorageKey}`);const u=new jo({url:o,target:n,features:a});if(u.open(),!u.window){this._createPopupBlockAlert(e,o.href);return}this.windowRefs[e]=u,this.request({method:"opened_window",params:{windowId:e}}),u.once("close",()=>{delete this.windowRefs[e],this.request({method:at.CLOSED_WINDOW,params:{windowId:e}})})}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(e)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case Bt.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case Bt.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case Bt.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case Bt.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=e,this.request({method:at.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const n=t,a=e;Array.isArray(a)||a.jsonrpc||(a.jsonrpc="2.0"),this.tryWindowHandle(a,n)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),ve.debug(Qe.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new pt.EthereumRpcError(1013,t||Qe.errors.disconnected()),ve.debug(n)):(n=new pt.EthereumRpcError(1011,t||Qe.errors.permanentlyDisconnected()),ve.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const n=this.getLogoUrl(),a=Ot(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=Ot(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),u=Ot('<div id="torusAlert__btn-container"></div>');u.appendChild(o),a.appendChild(u);const w=()=>{o.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:$t(Mo)}),a.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(a)})(),w(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}pe(Or,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Nr extends Do{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:a="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:a}),pe(this,"chainId",void 0),pe(this,"selectedAddress",void 0),pe(this,"tryWindowHandle",void 0),this._state=He({},Nr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const o=u=>{const{method:w,params:O}=u;w===An.ACCOUNTS_CHANGED?this._handleAccountsChanged(O):w===An.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(O):w===An.CHAIN_CHANGED&&this._handleChainChanged(O)};this.jsonRpcConnectionEvents.on("notification",o)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:n}=await this.request({method:ba.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:n}),this._handleAccountsChanged(e)}catch(e){ve.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{ve.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=t;const o=e;if(!Array.isArray(o)){if(o.jsonrpc||(o.jsonrpc="2.0"),o.method==="solana_accounts"||o.method==="solana_requestAccounts")a=(u,w)=>{this._handleAccountsChanged(w.result||[],o.method==="solana_accounts",n),t(u,w)};else if(o.method==="wallet_getProviderState"){this._rpcEngine.handle(e,a);return}}this.tryWindowHandle(o,a)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),ve.debug(Qe.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new pt.EthereumRpcError(1013,t||Qe.errors.disconnected()),ve.debug(n)):(n=new pt.EthereumRpcError(1011,t||Qe.errors.permanentlyDisconnected()),ve.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=e;Array.isArray(a)||(ve.error("Torus: Received non-array accounts parameter. Please report this bug.",a),a=[]);for(const o of e)if(typeof o!="string"){ve.error("Torus: Received non-string account. Please report this bug.",e),a=[];break}Aa(this._state.accounts,a)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&ve.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',a),this._state.accounts=a,this.emit("accountsChanged",a)),this.selectedAddress!==a[0]&&(this.selectedAddress=a[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e){ve.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e});return}e==="loading"?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){ve.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}}pe(Nr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function fo(r){return new Promise((e,t)=>{try{const n=document.createElement("img");n.onload=()=>e(!0),n.onerror=()=>e(!1),n.src=r}catch(n){t(n)}})}const Wa=r=>{const{document:e}=r,t=e.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const n=e.querySelector('head > meta[name="title"]');return n?n.content:e.title&&e.title.length>0?e.title:r.location.hostname};async function Fa(r){try{const{document:e}=r;let t=e.querySelector('head > link[rel="shortcut icon"]');return t&&await fo(t.href)||(t=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),t&&await fo(t.href))?t.href:""}catch{return""}}const Ua=async()=>({name:Wa(window),icon:await Fa(window)}),qa=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Ba=[at.SET_PROVIDER],$a=ka("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await xo("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){ve.warn(e)}})();class Ga{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pe(this,"isInitialized",void 0),pe(this,"torusAlert",void 0),pe(this,"modalZIndex",void 0),pe(this,"alertZIndex",void 0),pe(this,"requestedLoginProvider",void 0),pe(this,"provider",void 0),pe(this,"communicationProvider",void 0),pe(this,"dappStorageKey",void 0),pe(this,"isTopupHidden",!1),pe(this,"torusAlertContainer",void 0),pe(this,"torusUrl",void 0),pe(this,"torusIframe",void 0),pe(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:e=Na.PRODUCTION,enableLogging:t=!1,network:n,showTorusButton:a=!1,useLocalStorage:o=!1,buttonPosition:u=Bt.BOTTOM_LEFT,apiKey:w="torus-default",extraParams:O={},whiteLabel:T}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:k,logLevel:W}=await xo(e);ve.enableAll(),ve.info(k,"url loaded"),ve.info(`Solana Embed Version :${Ra}`),this.torusUrl=k,ve.setDefaultLevel(W),t?ve.enableAll():ve.disableAll();const m=this.handleDappStorageKey(o),q=new URL(k);q.pathname.endsWith("/")?q.pathname+="frame":q.pathname+="/frame";const $=new URLSearchParams;return m&&$.append("dappStorageKey",m),$.append("origin",window.location.origin),q.hash=$.toString(),this.torusIframe=Ot(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${q.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=Ot(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Ot(`<link href="${k}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((x,A)=>{try{this.torusIframe.addEventListener("load",async()=>{const f=await Ua();this.torusIframe.contentWindow.postMessage({buttonPosition:u,apiKey:w,network:n,dappMetadata:f,extraParams:O,whiteLabel:T},q.origin),await this._setupWeb3({torusUrl:k}),a&&this.showTorusButton(),T!=null&&T.topupHide?this.isTopupHidden=T.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,x()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(f){A(f)}})}async login(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((n,a)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},Pn(n,a))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw ve.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:n}=e,{success:a}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:n}});if(!a)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:at.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(t){return t instanceof Element||t instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:at.SET_PROVIDER,params:He({},e)})}async showWallet(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:at.WALLET_INSTANCE_ID,params:[]}),a=e?`/${e}`:"",o=new URL(`${this.torusUrl}/wallet${a}`);o.searchParams.append("instanceId",n),Object.keys(t).forEach(w=>{o.searchParams.append(w,t[w])}),this.dappStorageKey&&(o.hash=`#dappStorageKey=${this.dappStorageKey}`),new jo({url:o,features:$t(Da)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:at.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=_r();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:at.TOPUP,params:{provider:e,params:t,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=br(e),n=t?e.serialize({requireAllSignatures:!1}).toString("hex"):Ve.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const n=br(e),a=n?e.serialize({requireAllSignatures:!1}).toString("hex"):Ve.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:a,options:t,isLegacyTransaction:n}})}}async signTransaction(e){const t=br(e),n=t?e.serializeMessage().toString("hex"):Ve.from(e.message.serialize()).toString("hex"),a=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:t}}),o=JSON.parse(a),u={publicKey:new Xn(o.publicKey),signature:Ve.from(o.signature,"hex")};return e.addSignature(u.publicKey,u.signature),e}async signAllTransactions(e){let t;const n=e.map(u=>(t=br(u),t?u.serializeMessage().toString("hex"):Ve.from(u.message.serialize()).toString("hex"))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:t}})).map(u=>{const w=JSON.parse(u);return{publicKey:new Xn(w.publicKey),signature:Ve.from(w.signature,"hex")}});return e.forEach((u,w)=>(u.addSignature(o[w].publicKey,o[w].signature),u)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${Un.localStorageKeyPrefix}${window.location.hostname}`;let n="";if($a&&e){const a=window.localStorage.getItem(t);if(a)n=a;else{const o=`torus-app-${_r()}`;window.localStorage.setItem(t,o),n=o}}return this.dappStorageKey=n,n}async _setupWeb3(e){ve.info("setupWeb3 running");const t=new ki({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new ki({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),a=new Nr(t,{}),o=new Or(n,{});a.tryWindowHandle=(T,k)=>{const W=T;if(!Array.isArray(W)&&qa.includes(W.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const m=_r();o._handleWindow(m,{target:"_blank",features:$t(Mo)}),W.windowId=m}a._rpcEngine.handle(W,k)},o.tryWindowHandle=(T,k)=>{const W=T;if(!Array.isArray(W)&&Ba.includes(W.method)){const m=_r();o._handleWindow(m,{target:"_blank",features:$t(Ma)}),W.params.windowId=m}o._rpcEngine.handle(W,k)};const u=T=>{const k=a[T],W=this;a[T]=function(q,$){const{method:x,params:A=[]}=q;if(x==="solana_requestAccounts"){if(!$)return W.login({loginProvider:A[0]});W.login({loginProvider:A[0]}).then(f=>$(null,f)).catch(f=>$(f))}return k.apply(this,[q,$])}};u("request"),u("sendAsync"),u("send");const w=new Proxy(a,{deleteProperty:()=>!0}),O=new Proxy(o,{deleteProperty:()=>!0});this.provider=w,this.communicationProvider=O,await Promise.all([a._initializeState(),o._initializeState(He(He({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),ve.debug("Torus - injected provider")}}export{Bt as BUTTON_POSITION,Na as TORUS_BUILD_ENV,Nr as TorusInPageProvider,Ga as default};
