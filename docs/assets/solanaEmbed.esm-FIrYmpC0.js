import{r as rs,a as bt,c as dr,g as St,d as ns,e as is,s as Zi,B as Ke,P as Un}from"./index-BTBW_jCN.js";import{p as eo}from"./index-BAMY2Nnw.js";var Dr={},qn;function os(){if(qn)return Dr;qn=1;var r=rs().Buffer,e=r.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(f){if(!f)return"utf8";for(var c;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(c)return;f=(""+f).toLowerCase(),c=!0}}function n(f){var c=t(f);if(typeof c!="string"&&(r.isEncoding===e||!e(f)))throw new Error("Unknown encoding: "+f);return c||f}Dr.StringDecoder=o;function o(f){this.encoding=n(f);var c;switch(this.encoding){case"utf16le":this.text=k,this.end=v,c=4;break;case"utf8":this.fillLast=O,c=4;break;case"base64":this.text=F,this.end=q,c=3;break;default:this.write=P,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(c)}o.prototype.write=function(f){if(f.length===0)return"";var c,S;if(this.lastNeed){if(c=this.fillLast(f),c===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<f.length?c?c+this.text(f,S):this.text(f,S):c||""},o.prototype.end=D,o.prototype.text=T,o.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function s(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function u(f,c,S){var H=c.length-1;if(H<S)return 0;var G=s(c[H]);return G>=0?(G>0&&(f.lastNeed=G-1),G):--H<S||G===-2?0:(G=s(c[H]),G>=0?(G>0&&(f.lastNeed=G-2),G):--H<S||G===-2?0:(G=s(c[H]),G>=0?(G>0&&(G===2?G=0:f.lastNeed=G-3),G):0))}function _(f,c,S){if((c[0]&192)!==128)return f.lastNeed=0,"�";if(f.lastNeed>1&&c.length>1){if((c[1]&192)!==128)return f.lastNeed=1,"�";if(f.lastNeed>2&&c.length>2&&(c[2]&192)!==128)return f.lastNeed=2,"�"}}function O(f){var c=this.lastTotal-this.lastNeed,S=_(this,f);if(S!==void 0)return S;if(this.lastNeed<=f.length)return f.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,c,0,f.length),this.lastNeed-=f.length}function T(f,c){var S=u(this,f,c);if(!this.lastNeed)return f.toString("utf8",c);this.lastTotal=S;var H=f.length-(S-this.lastNeed);return f.copy(this.lastChar,0,H),f.toString("utf8",c,H)}function D(f){var c=f&&f.length?this.write(f):"";return this.lastNeed?c+"�":c}function k(f,c){if((f.length-c)%2===0){var S=f.toString("utf16le",c);if(S){var H=S.charCodeAt(S.length-1);if(H>=55296&&H<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",c,f.length-1)}function v(f){var c=f&&f.length?this.write(f):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,S)}return c}function F(f,c){var S=(f.length-c)%3;return S===0?f.toString("base64",c):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",c,f.length-S))}function q(f){var c=f&&f.length?this.write(f):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function P(f){return f.toString(this.encoding)}function A(f){return f&&f.length?this.write(f):""}return Dr}function jt(r){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(r)}function ss(r,e){if(jt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(jt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function as(r){var e=ss(r,"string");return jt(e)=="symbol"?e:e+""}function ge(r,e,t){return(e=as(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Bn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function $e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bn(Object(t),!0).forEach(function(n){ge(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Bn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var kr={exports:{}},jr={exports:{}},Wr,$n;function Ie(){if($n)return Wr;$n=1;class r extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let o=0;o<t.length;o++)n+=`    ${t[o].stack}
`;super(n),this.name="AggregateError",this.errors=t}}return Wr={AggregateError:r,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},Wr}var Fr={exports:{}},Ur,Hn;function to(){return Hn||(Hn=1,Ur={format(r,...e){return r.replace(/%([sdifj])/g,function(...[t,n]){const o=e.shift();return n==="f"?o.toFixed(6):n==="j"?JSON.stringify(o):n==="s"&&typeof o=="object"?`${o.constructor!==Object?o.constructor.name:""} {}`.trim():o.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),Ur}var qr,zn;function Le(){if(zn)return qr;zn=1;const{format:r,inspect:e}=to(),{AggregateError:t}=Ie(),n=globalThis.AggregateError||t,o=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,_="__node_internal_",O={};function T(A,f){if(!A)throw new O.ERR_INTERNAL_ASSERTION(f)}function D(A){let f="",c=A.length;const S=A[0]==="-"?1:0;for(;c>=S+4;c-=3)f=`_${A.slice(c-3,c)}${f}`;return`${A.slice(0,c)}${f}`}function k(A,f,c){if(typeof f=="function")return T(f.length<=c.length,`Code: ${A}; The provided arguments length (${c.length}) does not match the required ones (${f.length}).`),f(...c);const S=(f.match(/%[dfijoOs]/g)||[]).length;return T(S===c.length,`Code: ${A}; The provided arguments length (${c.length}) does not match the required ones (${S}).`),c.length===0?f:r(f,...c)}function v(A,f,c){c||(c=Error);class S extends c{constructor(...G){super(k(A,f,G))}toString(){return`${this.name} [${A}]: ${this.message}`}}Object.defineProperties(S.prototype,{name:{value:c.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${A}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),S.prototype.code=A,S.prototype[o]=!0,O[A]=S}function F(A){const f=_+A.name;return Object.defineProperty(A,"name",{value:f}),A}function q(A,f){if(A&&f&&A!==f){if(Array.isArray(f.errors))return f.errors.push(A),f;const c=new n([f,A],f.message);return c.code=f.code,c}return A||f}class P extends Error{constructor(f="The operation was aborted",c=void 0){if(c!==void 0&&typeof c!="object")throw new O.ERR_INVALID_ARG_TYPE("options","Object",c);super(f,c),this.code="ABORT_ERR",this.name="AbortError"}}return v("ERR_ASSERTION","%s",Error),v("ERR_INVALID_ARG_TYPE",(A,f,c)=>{T(typeof A=="string","'name' must be a string"),Array.isArray(f)||(f=[f]);let S="The ";A.endsWith(" argument")?S+=`${A} `:S+=`"${A}" ${A.includes(".")?"property":"argument"} `,S+="must be ";const H=[],G=[],se=[];for(const i of f)T(typeof i=="string","All expected entries have to be of type string"),s.includes(i)?H.push(i.toLowerCase()):u.test(i)?G.push(i):(T(i!=="object",'The value "object" should be written as "Object"'),se.push(i));if(G.length>0){const i=H.indexOf("object");i!==-1&&(H.splice(H,i,1),G.push("Object"))}if(H.length>0){switch(H.length){case 1:S+=`of type ${H[0]}`;break;case 2:S+=`one of type ${H[0]} or ${H[1]}`;break;default:{const i=H.pop();S+=`one of type ${H.join(", ")}, or ${i}`}}(G.length>0||se.length>0)&&(S+=" or ")}if(G.length>0){switch(G.length){case 1:S+=`an instance of ${G[0]}`;break;case 2:S+=`an instance of ${G[0]} or ${G[1]}`;break;default:{const i=G.pop();S+=`an instance of ${G.join(", ")}, or ${i}`}}se.length>0&&(S+=" or ")}switch(se.length){case 0:break;case 1:se[0].toLowerCase()!==se[0]&&(S+="an "),S+=`${se[0]}`;break;case 2:S+=`one of ${se[0]} or ${se[1]}`;break;default:{const i=se.pop();S+=`one of ${se.join(", ")}, or ${i}`}}if(c==null)S+=`. Received ${c}`;else if(typeof c=="function"&&c.name)S+=`. Received function ${c.name}`;else if(typeof c=="object"){var he;if((he=c.constructor)!==null&&he!==void 0&&he.name)S+=`. Received an instance of ${c.constructor.name}`;else{const i=e(c,{depth:-1});S+=`. Received ${i}`}}else{let i=e(c,{colors:!1});i.length>25&&(i=`${i.slice(0,25)}...`),S+=`. Received type ${typeof c} (${i})`}return S},TypeError),v("ERR_INVALID_ARG_VALUE",(A,f,c="is invalid")=>{let S=e(f);return S.length>128&&(S=S.slice(0,128)+"..."),`The ${A.includes(".")?"property":"argument"} '${A}' ${c}. Received ${S}`},TypeError),v("ERR_INVALID_RETURN_VALUE",(A,f,c)=>{var S;const H=c!=null&&(S=c.constructor)!==null&&S!==void 0&&S.name?`instance of ${c.constructor.name}`:`type ${typeof c}`;return`Expected ${A} to be returned from the "${f}" function but got ${H}.`},TypeError),v("ERR_MISSING_ARGS",(...A)=>{T(A.length>0,"At least one arg needs to be specified");let f;const c=A.length;switch(A=(Array.isArray(A)?A:[A]).map(S=>`"${S}"`).join(" or "),c){case 1:f+=`The ${A[0]} argument`;break;case 2:f+=`The ${A[0]} and ${A[1]} arguments`;break;default:{const S=A.pop();f+=`The ${A.join(", ")}, and ${S} arguments`}break}return`${f} must be specified`},TypeError),v("ERR_OUT_OF_RANGE",(A,f,c)=>{T(f,'Missing "range" argument');let S;if(Number.isInteger(c)&&Math.abs(c)>2**32)S=D(String(c));else if(typeof c=="bigint"){S=String(c);const H=BigInt(2)**BigInt(32);(c>H||c<-H)&&(S=D(S)),S+="n"}else S=e(c);return`The value of "${A}" is out of range. It must be ${f}. Received ${S}`},RangeError),v("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),v("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),v("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),v("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),v("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),v("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),v("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),v("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),v("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),v("ERR_STREAM_WRITE_AFTER_END","write after end",Error),v("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),qr={AbortError:P,aggregateTwoErrors:F(q),hideStackFrames:F,codes:O},qr}var Pt={exports:{}},Gn;function Wt(){if(Gn)return Pt.exports;Gn=1;const{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Pt.exports=r,Pt.exports.AbortSignal=e,Pt.exports.default=r,Pt.exports}var Kn;function De(){return Kn||(Kn=1,function(r){const e=bt(),{format:t,inspect:n}=to(),{codes:{ERR_INVALID_ARG_TYPE:o}}=Le(),{kResistStopPropagation:s,AggregateError:u,SymbolDispose:_}=Ie(),O=globalThis.AbortSignal||Wt().AbortSignal,T=globalThis.AbortController||Wt().AbortController,D=Object.getPrototypeOf(async function(){}).constructor,k=globalThis.Blob||e.Blob,v=typeof k<"u"?function(A){return A instanceof k}:function(A){return!1},F=(P,A)=>{if(P!==void 0&&(P===null||typeof P!="object"||!("aborted"in P)))throw new o(A,"AbortSignal",P)},q=(P,A)=>{if(typeof P!="function")throw new o(A,"Function",P)};r.exports={AggregateError:u,kEmptyObject:Object.freeze({}),once(P){let A=!1;return function(...f){A||(A=!0,P.apply(this,f))}},createDeferredPromise:function(){let P,A;return{promise:new Promise((c,S)=>{P=c,A=S}),resolve:P,reject:A}},promisify(P){return new Promise((A,f)=>{P((c,...S)=>c?f(c):A(...S))})},debuglog(){return function(){}},format:t,inspect:n,types:{isAsyncFunction(P){return P instanceof D},isArrayBufferView(P){return ArrayBuffer.isView(P)}},isBlob:v,deprecate(P,A){return P},addAbortListener:dr().addAbortListener||function(A,f){if(A===void 0)throw new o("signal","AbortSignal",A);F(A,"signal"),q(f,"listener");let c;return A.aborted?queueMicrotask(()=>f()):(A.addEventListener("abort",f,{__proto__:null,once:!0,[s]:!0}),c=()=>{A.removeEventListener("abort",f)}),{__proto__:null,[_](){var S;(S=c)===null||S===void 0||S()}}},AbortSignalAny:O.any||function(A){if(A.length===1)return A[0];const f=new T,c=()=>f.abort();return A.forEach(S=>{F(S,"signals"),S.addEventListener("abort",c,{once:!0})}),f.signal.addEventListener("abort",()=>{A.forEach(S=>S.removeEventListener("abort",c))},{once:!0}),f.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Fr)),Fr.exports}var Zt={},Br,Vn;function Ft(){if(Vn)return Br;Vn=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:o,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:_,NumberParseInt:O,ObjectPrototypeHasOwnProperty:T,RegExpPrototypeExec:D,String:k,StringPrototypeToUpperCase:v,StringPrototypeTrim:F}=Ie(),{hideStackFrames:q,codes:{ERR_SOCKET_BAD_PORT:P,ERR_INVALID_ARG_TYPE:A,ERR_INVALID_ARG_VALUE:f,ERR_OUT_OF_RANGE:c,ERR_UNKNOWN_SIGNAL:S}}=Le(),{normalizeEncoding:H}=De(),{isAsyncFunction:G,isArrayBufferView:se}=De().types,he={};function i(C){return C===(C|0)}function g(C){return C===C>>>0}const a=/^[0-7]+$/,d="must be a 32-bit unsigned integer or an octal string";function h(C,J,Z){if(typeof C>"u"&&(C=Z),typeof C=="string"){if(D(a,C)===null)throw new f(J,C,d);C=O(C,8)}return m(C,J),C}const l=q((C,J,Z=_,V=u)=>{if(typeof C!="number")throw new A(J,"number",C);if(!o(C))throw new c(J,"an integer",C);if(C<Z||C>V)throw new c(J,`>= ${Z} && <= ${V}`,C)}),I=q((C,J,Z=-2147483648,V=2147483647)=>{if(typeof C!="number")throw new A(J,"number",C);if(!o(C))throw new c(J,"an integer",C);if(C<Z||C>V)throw new c(J,`>= ${Z} && <= ${V}`,C)}),m=q((C,J,Z=!1)=>{if(typeof C!="number")throw new A(J,"number",C);if(!o(C))throw new c(J,"an integer",C);const V=Z?1:0,we=4294967295;if(C<V||C>we)throw new c(J,`>= ${V} && <= ${we}`,C)});function R(C,J){if(typeof C!="string")throw new A(J,"string",C)}function M(C,J,Z=void 0,V){if(typeof C!="number")throw new A(J,"number",C);if(Z!=null&&C<Z||V!=null&&C>V||(Z!=null||V!=null)&&s(C))throw new c(J,`${Z!=null?`>= ${Z}`:""}${Z!=null&&V!=null?" && ":""}${V!=null?`<= ${V}`:""}`,C)}const b=q((C,J,Z)=>{if(!e(Z,C)){const we="must be one of: "+t(n(Z,Re=>typeof Re=="string"?`'${Re}'`:k(Re)),", ");throw new f(J,C,we)}});function j(C,J){if(typeof C!="boolean")throw new A(J,"boolean",C)}function w(C,J,Z){return C==null||!T(C,J)?Z:C[J]}const W=q((C,J,Z=null)=>{const V=w(Z,"allowArray",!1),we=w(Z,"allowFunction",!1);if(!w(Z,"nullable",!1)&&C===null||!V&&r(C)||typeof C!="object"&&(!we||typeof C!="function"))throw new A(J,"Object",C)}),Y=q((C,J)=>{if(C!=null&&typeof C!="object"&&typeof C!="function")throw new A(J,"a dictionary",C)}),B=q((C,J,Z=0)=>{if(!r(C))throw new A(J,"Array",C);if(C.length<Z){const V=`must be longer than ${Z}`;throw new f(J,C,V)}});function X(C,J){B(C,J);for(let Z=0;Z<C.length;Z++)R(C[Z],`${J}[${Z}]`)}function ee(C,J){B(C,J);for(let Z=0;Z<C.length;Z++)j(C[Z],`${J}[${Z}]`)}function le(C,J){B(C,J);for(let Z=0;Z<C.length;Z++){const V=C[Z],we=`${J}[${Z}]`;if(V==null)throw new A(we,"AbortSignal",V);ue(V,we)}}function ae(C,J="signal"){if(R(C,J),he[C]===void 0)throw he[v(C)]!==void 0?new S(C+" (signals must use all capital letters)"):new S(C)}const z=q((C,J="buffer")=>{if(!se(C))throw new A(J,["Buffer","TypedArray","DataView"],C)});function K(C,J){const Z=H(J),V=C.length;if(Z==="hex"&&V%2!==0)throw new f("encoding",J,`is invalid for data of length ${V}`)}function oe(C,J="Port",Z=!0){if(typeof C!="number"&&typeof C!="string"||typeof C=="string"&&F(C).length===0||+C!==+C>>>0||C>65535||C===0&&!Z)throw new P(J,C,Z);return C|0}const ue=q((C,J)=>{if(C!==void 0&&(C===null||typeof C!="object"||!("aborted"in C)))throw new A(J,"AbortSignal",C)}),de=q((C,J)=>{if(typeof C!="function")throw new A(J,"Function",C)}),N=q((C,J)=>{if(typeof C!="function"||G(C))throw new A(J,"Function",C)}),L=q((C,J)=>{if(C!==void 0)throw new A(J,"undefined",C)});function U(C,J,Z){if(!e(Z,C))throw new A(J,`('${t(Z,"|")}')`,C)}const ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function re(C,J){if(typeof C>"u"||!D(ne,C))throw new f(J,C,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function te(C){if(typeof C=="string")return re(C,"hints"),C;if(r(C)){const J=C.length;let Z="";if(J===0)return Z;for(let V=0;V<J;V++){const we=C[V];re(we,"hints"),Z+=we,V!==J-1&&(Z+=", ")}return Z}throw new f("hints",C,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Br={isInt32:i,isUint32:g,parseFileMode:h,validateArray:B,validateStringArray:X,validateBooleanArray:ee,validateAbortSignalArray:le,validateBoolean:j,validateBuffer:z,validateDictionary:Y,validateEncoding:K,validateFunction:de,validateInt32:I,validateInteger:l,validateNumber:M,validateObject:W,validateOneOf:b,validatePlainFunction:N,validatePort:oe,validateSignalName:ae,validateString:R,validateUint32:m,validateUndefined:L,validateUnion:U,validateAbortSignal:ue,validateLinkHeaderValue:te},Br}var er={exports:{}},$r={},Jn;function yt(){return Jn||(Jn=1,function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(H){return H&&H.__esModule&&Object.prototype.hasOwnProperty.call(H,"default")?H.default:H}var t={exports:{}},n=t.exports={},o,s;function u(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=u}catch{o=u}try{typeof clearTimeout=="function"?s=clearTimeout:s=_}catch{s=_}})();function O(H){if(o===setTimeout)return setTimeout(H,0);if((o===u||!o)&&setTimeout)return o=setTimeout,setTimeout(H,0);try{return o(H,0)}catch{try{return o.call(null,H,0)}catch{return o.call(this,H,0)}}}function T(H){if(s===clearTimeout)return clearTimeout(H);if((s===_||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(H);try{return s(H)}catch{try{return s.call(null,H)}catch{return s.call(this,H)}}}var D=[],k=!1,v,F=-1;function q(){!k||!v||(k=!1,v.length?D=v.concat(D):F=-1,D.length&&P())}function P(){if(!k){var H=O(q);k=!0;for(var G=D.length;G;){for(v=D,D=[];++F<G;)v&&v[F].run();F=-1,G=D.length}v=null,k=!1,T(H)}}n.nextTick=function(H){var G=new Array(arguments.length-1);if(arguments.length>1)for(var se=1;se<arguments.length;se++)G[se-1]=arguments[se];D.push(new A(H,G)),D.length===1&&!k&&O(P)};function A(H,G){this.fun=H,this.array=G}A.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function f(){}n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(H){return[]},n.binding=function(H){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(H){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};var c=t.exports;const S=e(c);r.default=S,r.process=S}($r)),$r}var Hr,Yn;function st(){if(Yn)return Hr;Yn=1;const{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Ie(),n=t("nodejs.stream.destroyed"),o=t("nodejs.stream.errored"),s=t("nodejs.stream.readable"),u=t("nodejs.stream.writable"),_=t("nodejs.stream.disturbed"),O=t("nodejs.webstream.isClosedPromise"),T=t("nodejs.webstream.controllerErrorFunction");function D(w,W=!1){var Y;return!!(w&&typeof w.pipe=="function"&&typeof w.on=="function"&&(!W||typeof w.pause=="function"&&typeof w.resume=="function")&&(!w._writableState||((Y=w._readableState)===null||Y===void 0?void 0:Y.readable)!==!1)&&(!w._writableState||w._readableState))}function k(w){var W;return!!(w&&typeof w.write=="function"&&typeof w.on=="function"&&(!w._readableState||((W=w._writableState)===null||W===void 0?void 0:W.writable)!==!1))}function v(w){return!!(w&&typeof w.pipe=="function"&&w._readableState&&typeof w.on=="function"&&typeof w.write=="function")}function F(w){return w&&(w._readableState||w._writableState||typeof w.write=="function"&&typeof w.on=="function"||typeof w.pipe=="function"&&typeof w.on=="function")}function q(w){return!!(w&&!F(w)&&typeof w.pipeThrough=="function"&&typeof w.getReader=="function"&&typeof w.cancel=="function")}function P(w){return!!(w&&!F(w)&&typeof w.getWriter=="function"&&typeof w.abort=="function")}function A(w){return!!(w&&!F(w)&&typeof w.readable=="object"&&typeof w.writable=="object")}function f(w){return q(w)||P(w)||A(w)}function c(w,W){return w==null?!1:W===!0?typeof w[r]=="function":W===!1?typeof w[e]=="function":typeof w[r]=="function"||typeof w[e]=="function"}function S(w){if(!F(w))return null;const W=w._writableState,Y=w._readableState,B=W||Y;return!!(w.destroyed||w[n]||B!=null&&B.destroyed)}function H(w){if(!k(w))return null;if(w.writableEnded===!0)return!0;const W=w._writableState;return W!=null&&W.errored?!1:typeof(W==null?void 0:W.ended)!="boolean"?null:W.ended}function G(w,W){if(!k(w))return null;if(w.writableFinished===!0)return!0;const Y=w._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.finished)!="boolean"?null:!!(Y.finished||W===!1&&Y.ended===!0&&Y.length===0)}function se(w){if(!D(w))return null;if(w.readableEnded===!0)return!0;const W=w._readableState;return!W||W.errored?!1:typeof(W==null?void 0:W.ended)!="boolean"?null:W.ended}function he(w,W){if(!D(w))return null;const Y=w._readableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.endEmitted)!="boolean"?null:!!(Y.endEmitted||W===!1&&Y.ended===!0&&Y.length===0)}function i(w){return w&&w[s]!=null?w[s]:typeof(w==null?void 0:w.readable)!="boolean"?null:S(w)?!1:D(w)&&w.readable&&!he(w)}function g(w){return w&&w[u]!=null?w[u]:typeof(w==null?void 0:w.writable)!="boolean"?null:S(w)?!1:k(w)&&w.writable&&!H(w)}function a(w,W){return F(w)?S(w)?!0:!((W==null?void 0:W.readable)!==!1&&i(w)||(W==null?void 0:W.writable)!==!1&&g(w)):null}function d(w){var W,Y;return F(w)?w.writableErrored?w.writableErrored:(W=(Y=w._writableState)===null||Y===void 0?void 0:Y.errored)!==null&&W!==void 0?W:null:null}function h(w){var W,Y;return F(w)?w.readableErrored?w.readableErrored:(W=(Y=w._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&W!==void 0?W:null:null}function l(w){if(!F(w))return null;if(typeof w.closed=="boolean")return w.closed;const W=w._writableState,Y=w._readableState;return typeof(W==null?void 0:W.closed)=="boolean"||typeof(Y==null?void 0:Y.closed)=="boolean"?(W==null?void 0:W.closed)||(Y==null?void 0:Y.closed):typeof w._closed=="boolean"&&I(w)?w._closed:null}function I(w){return typeof w._closed=="boolean"&&typeof w._defaultKeepAlive=="boolean"&&typeof w._removedConnection=="boolean"&&typeof w._removedContLen=="boolean"}function m(w){return typeof w._sent100=="boolean"&&I(w)}function R(w){var W;return typeof w._consuming=="boolean"&&typeof w._dumped=="boolean"&&((W=w.req)===null||W===void 0?void 0:W.upgradeOrConnect)===void 0}function M(w){if(!F(w))return null;const W=w._writableState,Y=w._readableState,B=W||Y;return!B&&m(w)||!!(B&&B.autoDestroy&&B.emitClose&&B.closed===!1)}function b(w){var W;return!!(w&&((W=w[_])!==null&&W!==void 0?W:w.readableDidRead||w.readableAborted))}function j(w){var W,Y,B,X,ee,le,ae,z,K,oe;return!!(w&&((W=(Y=(B=(X=(ee=(le=w[o])!==null&&le!==void 0?le:w.readableErrored)!==null&&ee!==void 0?ee:w.writableErrored)!==null&&X!==void 0?X:(ae=w._readableState)===null||ae===void 0?void 0:ae.errorEmitted)!==null&&B!==void 0?B:(z=w._writableState)===null||z===void 0?void 0:z.errorEmitted)!==null&&Y!==void 0?Y:(K=w._readableState)===null||K===void 0?void 0:K.errored)!==null&&W!==void 0?W:!((oe=w._writableState)===null||oe===void 0)&&oe.errored))}return Hr={isDestroyed:S,kIsDestroyed:n,isDisturbed:b,kIsDisturbed:_,isErrored:j,kIsErrored:o,isReadable:i,kIsReadable:s,kIsClosedPromise:O,kControllerErrorFunction:T,kIsWritable:u,isClosed:l,isDuplexNodeStream:v,isFinished:a,isIterable:c,isReadableNodeStream:D,isReadableStream:q,isReadableEnded:se,isReadableFinished:he,isReadableErrored:h,isNodeStream:F,isWebStream:f,isWritable:g,isWritableNodeStream:k,isWritableStream:P,isWritableEnded:H,isWritableFinished:G,isWritableErrored:d,isServerRequest:R,isServerResponse:m,willEmitClose:M,isTransformStream:A},Hr}var Xn;function ft(){if(Xn)return er.exports;Xn=1;const r=yt(),{AbortError:e,codes:t}=Le(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:o}=t,{kEmptyObject:s,once:u}=De(),{validateAbortSignal:_,validateFunction:O,validateObject:T,validateBoolean:D}=Ft(),{Promise:k,PromisePrototypeThen:v,SymbolDispose:F}=Ie(),{isClosed:q,isReadable:P,isReadableNodeStream:A,isReadableStream:f,isReadableFinished:c,isReadableErrored:S,isWritable:H,isWritableNodeStream:G,isWritableStream:se,isWritableFinished:he,isWritableErrored:i,isNodeStream:g,willEmitClose:a,kIsClosedPromise:d}=st();let h;function l(b){return b.setHeader&&typeof b.abort=="function"}const I=()=>{};function m(b,j,w){var W,Y;if(arguments.length===2?(w=j,j=s):j==null?j=s:T(j,"options"),O(w,"callback"),_(j.signal,"options.signal"),w=u(w),f(b)||se(b))return R(b,j,w);if(!g(b))throw new n("stream",["ReadableStream","WritableStream","Stream"],b);const B=(W=j.readable)!==null&&W!==void 0?W:A(b),X=(Y=j.writable)!==null&&Y!==void 0?Y:G(b),ee=b._writableState,le=b._readableState,ae=()=>{b.writable||oe()};let z=a(b)&&A(b)===B&&G(b)===X,K=he(b,!1);const oe=()=>{K=!0,b.destroyed&&(z=!1),!(z&&(!b.readable||B))&&(!B||ue)&&w.call(b)};let ue=c(b,!1);const de=()=>{ue=!0,b.destroyed&&(z=!1),!(z&&(!b.writable||X))&&(!X||K)&&w.call(b)},N=C=>{w.call(b,C)};let L=q(b);const U=()=>{L=!0;const C=i(b)||S(b);if(C&&typeof C!="boolean")return w.call(b,C);if(B&&!ue&&A(b,!0)&&!c(b,!1))return w.call(b,new o);if(X&&!K&&!he(b,!1))return w.call(b,new o);w.call(b)},ne=()=>{L=!0;const C=i(b)||S(b);if(C&&typeof C!="boolean")return w.call(b,C);w.call(b)},re=()=>{b.req.on("finish",oe)};l(b)?(b.on("complete",oe),z||b.on("abort",U),b.req?re():b.on("request",re)):X&&!ee&&(b.on("end",ae),b.on("close",ae)),!z&&typeof b.aborted=="boolean"&&b.on("aborted",U),b.on("end",de),b.on("finish",oe),j.error!==!1&&b.on("error",N),b.on("close",U),L?r.nextTick(U):ee!=null&&ee.errorEmitted||le!=null&&le.errorEmitted?z||r.nextTick(ne):(!B&&(!z||P(b))&&(K||H(b)===!1)||!X&&(!z||H(b))&&(ue||P(b)===!1)||le&&b.req&&b.aborted)&&r.nextTick(ne);const te=()=>{w=I,b.removeListener("aborted",U),b.removeListener("complete",oe),b.removeListener("abort",U),b.removeListener("request",re),b.req&&b.req.removeListener("finish",oe),b.removeListener("end",ae),b.removeListener("close",ae),b.removeListener("finish",oe),b.removeListener("end",de),b.removeListener("error",N),b.removeListener("close",U)};if(j.signal&&!L){const C=()=>{const J=w;te(),J.call(b,new e(void 0,{cause:j.signal.reason}))};if(j.signal.aborted)r.nextTick(C);else{h=h||De().addAbortListener;const J=h(j.signal,C),Z=w;w=u((...V)=>{J[F](),Z.apply(b,V)})}}return te}function R(b,j,w){let W=!1,Y=I;if(j.signal)if(Y=()=>{W=!0,w.call(b,new e(void 0,{cause:j.signal.reason}))},j.signal.aborted)r.nextTick(Y);else{h=h||De().addAbortListener;const X=h(j.signal,Y),ee=w;w=u((...le)=>{X[F](),ee.apply(b,le)})}const B=(...X)=>{W||r.nextTick(()=>w.apply(b,X))};return v(b[d].promise,B,B),I}function M(b,j){var w;let W=!1;return j===null&&(j=s),(w=j)!==null&&w!==void 0&&w.cleanup&&(D(j.cleanup,"cleanup"),W=j.cleanup),new k((Y,B)=>{const X=m(b,j,ee=>{W&&X(),ee?B(ee):Y()})})}return er.exports=m,er.exports.finished=M,er.exports}var zr,Qn;function Et(){if(Qn)return zr;Qn=1;const r=yt(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=Le(),{Symbol:o}=Ie(),{kIsDestroyed:s,isDestroyed:u,isFinished:_,isServerRequest:O}=st(),T=o("kDestroy"),D=o("kConstruct");function k(a,d,h){a&&(a.stack,d&&!d.errored&&(d.errored=a),h&&!h.errored&&(h.errored=a))}function v(a,d){const h=this._readableState,l=this._writableState,I=l||h;return l!=null&&l.destroyed||h!=null&&h.destroyed?(typeof d=="function"&&d(),this):(k(a,l,h),l&&(l.destroyed=!0),h&&(h.destroyed=!0),I.constructed?F(this,a,d):this.once(T,function(m){F(this,e(m,a),d)}),this)}function F(a,d,h){let l=!1;function I(m){if(l)return;l=!0;const R=a._readableState,M=a._writableState;k(m,M,R),M&&(M.closed=!0),R&&(R.closed=!0),typeof h=="function"&&h(m),m?r.nextTick(q,a,m):r.nextTick(P,a)}try{a._destroy(d||null,I)}catch(m){I(m)}}function q(a,d){A(a,d),P(a)}function P(a){const d=a._readableState,h=a._writableState;h&&(h.closeEmitted=!0),d&&(d.closeEmitted=!0),(h!=null&&h.emitClose||d!=null&&d.emitClose)&&a.emit("close")}function A(a,d){const h=a._readableState,l=a._writableState;l!=null&&l.errorEmitted||h!=null&&h.errorEmitted||(l&&(l.errorEmitted=!0),h&&(h.errorEmitted=!0),a.emit("error",d))}function f(){const a=this._readableState,d=this._writableState;a&&(a.constructed=!0,a.closed=!1,a.closeEmitted=!1,a.destroyed=!1,a.errored=null,a.errorEmitted=!1,a.reading=!1,a.ended=a.readable===!1,a.endEmitted=a.readable===!1),d&&(d.constructed=!0,d.destroyed=!1,d.closed=!1,d.closeEmitted=!1,d.errored=null,d.errorEmitted=!1,d.finalCalled=!1,d.prefinished=!1,d.ended=d.writable===!1,d.ending=d.writable===!1,d.finished=d.writable===!1)}function c(a,d,h){const l=a._readableState,I=a._writableState;if(I!=null&&I.destroyed||l!=null&&l.destroyed)return this;l!=null&&l.autoDestroy||I!=null&&I.autoDestroy?a.destroy(d):d&&(d.stack,I&&!I.errored&&(I.errored=d),l&&!l.errored&&(l.errored=d),h?r.nextTick(A,a,d):A(a,d))}function S(a,d){if(typeof a._construct!="function")return;const h=a._readableState,l=a._writableState;h&&(h.constructed=!1),l&&(l.constructed=!1),a.once(D,d),!(a.listenerCount(D)>1)&&r.nextTick(H,a)}function H(a){let d=!1;function h(l){if(d){c(a,l??new t);return}d=!0;const I=a._readableState,m=a._writableState,R=m||I;I&&(I.constructed=!0),m&&(m.constructed=!0),R.destroyed?a.emit(T,l):l?c(a,l,!0):r.nextTick(G,a)}try{a._construct(l=>{r.nextTick(h,l)})}catch(l){r.nextTick(h,l)}}function G(a){a.emit(D)}function se(a){return(a==null?void 0:a.setHeader)&&typeof a.abort=="function"}function he(a){a.emit("close")}function i(a,d){a.emit("error",d),r.nextTick(he,a)}function g(a,d){!a||u(a)||(!d&&!_(a)&&(d=new n),O(a)?(a.socket=null,a.destroy(d)):se(a)?a.abort():se(a.req)?a.req.abort():typeof a.destroy=="function"?a.destroy(d):typeof a.close=="function"?a.close():d?r.nextTick(i,a,d):r.nextTick(he,a),a.destroyed||(a[s]=!0))}return zr={construct:S,destroyer:g,destroy:v,undestroy:f,errorOrDestroy:c},zr}var Gr,Zn;function En(){if(Zn)return Gr;Zn=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Ie(),{EventEmitter:t}=dr();function n(s){t.call(this,s)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(s,u){const _=this;function O(P){s.writable&&s.write(P)===!1&&_.pause&&_.pause()}_.on("data",O);function T(){_.readable&&_.resume&&_.resume()}s.on("drain",T),!s._isStdio&&(!u||u.end!==!1)&&(_.on("end",k),_.on("close",v));let D=!1;function k(){D||(D=!0,s.end())}function v(){D||(D=!0,typeof s.destroy=="function"&&s.destroy())}function F(P){q(),t.listenerCount(this,"error")===0&&this.emit("error",P)}o(_,"error",F),o(s,"error",F);function q(){_.removeListener("data",O),s.removeListener("drain",T),_.removeListener("end",k),_.removeListener("close",v),_.removeListener("error",F),s.removeListener("error",F),_.removeListener("end",q),_.removeListener("close",q),s.removeListener("close",q)}return _.on("end",q),_.on("close",q),s.on("close",q),s.emit("pipe",_),s};function o(s,u,_){if(typeof s.prependListener=="function")return s.prependListener(u,_);!s._events||!s._events[u]?s.on(u,_):r(s._events[u])?s._events[u].unshift(_):s._events[u]=[_,s._events[u]]}return Gr={Stream:n,prependListener:o},Gr}var Kr={exports:{}},ei;function hr(){return ei||(ei=1,function(r){const{SymbolDispose:e}=Ie(),{AbortError:t,codes:n}=Le(),{isNodeStream:o,isWebStream:s,kControllerErrorFunction:u}=st(),_=ft(),{ERR_INVALID_ARG_TYPE:O}=n;let T;const D=(k,v)=>{if(typeof k!="object"||!("aborted"in k))throw new O(v,"AbortSignal",k)};r.exports.addAbortSignal=function(v,F){if(D(v,"signal"),!o(F)&&!s(F))throw new O("stream",["ReadableStream","WritableStream","Stream"],F);return r.exports.addAbortSignalNoValidate(v,F)},r.exports.addAbortSignalNoValidate=function(k,v){if(typeof k!="object"||!("aborted"in k))return v;const F=o(v)?()=>{v.destroy(new t(void 0,{cause:k.reason}))}:()=>{v[u](new t(void 0,{cause:k.reason}))};if(k.aborted)F();else{T=T||De().addAbortListener;const q=T(k,F);_(v,q[e])}return v}}(Kr)),Kr.exports}var Vr,ti;function ls(){if(ti)return Vr;ti=1;const{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Ie(),{Buffer:o}=bt(),{inspect:s}=De();return Vr=class{constructor(){this.head=null,this.tail=null,this.length=0}push(_){const O={data:_,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}unshift(_){const O={data:_,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length}shift(){if(this.length===0)return;const _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}clear(){this.head=this.tail=null,this.length=0}join(_){if(this.length===0)return"";let O=this.head,T=""+O.data;for(;(O=O.next)!==null;)T+=_+O.data;return T}concat(_){if(this.length===0)return o.alloc(0);const O=o.allocUnsafe(_>>>0);let T=this.head,D=0;for(;T;)t(O,T.data,D),D+=T.data.length,T=T.next;return O}consume(_,O){const T=this.head.data;if(_<T.length){const D=T.slice(0,_);return this.head.data=T.slice(_),D}return _===T.length?this.shift():O?this._getString(_):this._getBuffer(_)}first(){return this.head.data}*[e](){for(let _=this.head;_;_=_.next)yield _.data}_getString(_){let O="",T=this.head,D=0;do{const k=T.data;if(_>k.length)O+=k,_-=k.length;else{_===k.length?(O+=k,++D,T.next?this.head=T.next:this.head=this.tail=null):(O+=r(k,0,_),this.head=T,T.data=r(k,_));break}++D}while((T=T.next)!==null);return this.length-=D,O}_getBuffer(_){const O=o.allocUnsafe(_),T=_;let D=this.head,k=0;do{const v=D.data;if(_>v.length)t(O,v,T-_),_-=v.length;else{_===v.length?(t(O,v,T-_),++k,D.next?this.head=D.next:this.head=this.tail=null):(t(O,new n(v.buffer,v.byteOffset,_),T-_),this.head=D,D.data=v.slice(_));break}++k}while((D=D.next)!==null);return this.length-=k,O}[Symbol.for("nodejs.util.inspect.custom")](_,O){return s(this,{...O,depth:0,customInspect:!1})}},Vr}var Jr,ri;function gr(){if(ri)return Jr;ri=1;const{MathFloor:r,NumberIsInteger:e}=Ie(),{validateInteger:t}=Ft(),{ERR_INVALID_ARG_VALUE:n}=Le().codes;let o=16*1024,s=16;function u(D,k,v){return D.highWaterMark!=null?D.highWaterMark:k?D[v]:null}function _(D){return D?s:o}function O(D,k){t(k,"value",0),D?s=k:o=k}function T(D,k,v,F){const q=u(k,F,v);if(q!=null){if(!e(q)||q<0){const P=F?`options.${v}`:"options.highWaterMark";throw new n(P,q)}return r(q)}return _(D.objectMode)}return Jr={getHighWaterMark:T,getDefaultHighWaterMark:_,setDefaultHighWaterMark:O},Jr}var Yr,ni;function ro(){if(ni)return Yr;ni=1;const r=yt(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Ie(),{Buffer:o}=bt(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:u}=Le().codes;function _(O,T,D){let k;if(typeof T=="string"||T instanceof o)return new O({objectMode:!0,...D,read(){this.push(T),this.push(null)}});let v;if(T&&T[t])v=!0,k=T[t]();else if(T&&T[n])v=!1,k=T[n]();else throw new s("iterable",["Iterable"],T);const F=new O({objectMode:!0,highWaterMark:1,...D});let q=!1;F._read=function(){q||(q=!0,A())},F._destroy=function(f,c){e(P(f),()=>r.nextTick(c,f),S=>r.nextTick(c,S||f))};async function P(f){const c=f!=null,S=typeof k.throw=="function";if(c&&S){const{value:H,done:G}=await k.throw(f);if(await H,G)return}if(typeof k.return=="function"){const{value:H}=await k.return();await H}}async function A(){for(;;){try{const{value:f,done:c}=v?await k.next():k.next();if(c)F.push(null);else{const S=f&&typeof f.then=="function"?await f:f;if(S===null)throw q=!1,new u;if(F.push(S))continue;q=!1}}catch(f){F.destroy(f)}break}}return F}return Yr=_,Yr}var Xr,ii;function pr(){if(ii)return Xr;ii=1;const r=yt(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:s,ObjectKeys:u,ObjectSetPrototypeOf:_,Promise:O,SafeSet:T,SymbolAsyncDispose:D,SymbolAsyncIterator:k,Symbol:v}=Ie();Xr=V,V.ReadableState=Z;const{EventEmitter:F}=dr(),{Stream:q,prependListener:P}=En(),{Buffer:A}=bt(),{addAbortSignal:f}=hr(),c=ft();let S=De().debuglog("stream",p=>{S=p});const H=ls(),G=Et(),{getHighWaterMark:se,getDefaultHighWaterMark:he}=gr(),{aggregateTwoErrors:i,codes:{ERR_INVALID_ARG_TYPE:g,ERR_METHOD_NOT_IMPLEMENTED:a,ERR_OUT_OF_RANGE:d,ERR_STREAM_PUSH_AFTER_EOF:h,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:l},AbortError:I}=Le(),{validateObject:m}=Ft(),R=v("kPaused"),{StringDecoder:M}=os(),b=ro();_(V.prototype,q.prototype),_(V,q);const j=()=>{},{errorOrDestroy:w}=G,W=1,Y=2,B=4,X=8,ee=16,le=32,ae=64,z=128,K=256,oe=512,ue=1024,de=2048,N=4096,L=8192,U=16384,ne=32768,re=65536,te=1<<17,C=1<<18;function J(p){return{enumerable:!1,get(){return(this.state&p)!==0},set(E){E?this.state|=p:this.state&=~p}}}s(Z.prototype,{objectMode:J(W),ended:J(Y),endEmitted:J(B),reading:J(X),constructed:J(ee),sync:J(le),needReadable:J(ae),emittedReadable:J(z),readableListening:J(K),resumeScheduled:J(oe),errorEmitted:J(ue),emitClose:J(de),autoDestroy:J(N),destroyed:J(L),closed:J(U),closeEmitted:J(ne),multiAwaitDrain:J(re),readingMore:J(te),dataEmitted:J(C)});function Z(p,E,ie){typeof ie!="boolean"&&(ie=E instanceof ot()),this.state=de|N|ee|le,p&&p.objectMode&&(this.state|=W),ie&&p&&p.readableObjectMode&&(this.state|=W),this.highWaterMark=p?se(this,p,"readableHighWaterMark",ie):he(!1),this.buffer=new H,this.length=0,this.pipes=[],this.flowing=null,this[R]=null,p&&p.emitClose===!1&&(this.state&=-2049),p&&p.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=p&&p.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,p&&p.encoding&&(this.decoder=new M(p.encoding),this.encoding=p.encoding)}function V(p){if(!(this instanceof V))return new V(p);const E=this instanceof ot();this._readableState=new Z(p,this,E),p&&(typeof p.read=="function"&&(this._read=p.read),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.construct=="function"&&(this._construct=p.construct),p.signal&&!E&&f(p.signal,this)),q.call(this,p),G.construct(this,()=>{this._readableState.needReadable&&Pe(this,this._readableState)})}V.prototype.destroy=G.destroy,V.prototype._undestroy=G.undestroy,V.prototype._destroy=function(p,E){E(p)},V.prototype[F.captureRejectionSymbol]=function(p){this.destroy(p)},V.prototype[D]=function(){let p;return this.destroyed||(p=this.readableEnded?null:new I,this.destroy(p)),new O((E,ie)=>c(this,Q=>Q&&Q!==p?ie(Q):E(null)))},V.prototype.push=function(p,E){return we(this,p,E,!1)},V.prototype.unshift=function(p,E){return we(this,p,E,!0)};function we(p,E,ie,Q){S("readableAddChunk",E);const fe=p._readableState;let Ne;if((fe.state&W)===0&&(typeof E=="string"?(ie=ie||fe.defaultEncoding,fe.encoding!==ie&&(Q&&fe.encoding?E=A.from(E,ie).toString(fe.encoding):(E=A.from(E,ie),ie=""))):E instanceof A?ie="":q._isUint8Array(E)?(E=q._uint8ArrayToBuffer(E),ie=""):E!=null&&(Ne=new g("chunk",["string","Buffer","Uint8Array"],E))),Ne)w(p,Ne);else if(E===null)fe.state&=-9,ke(p,fe);else if((fe.state&W)!==0||E&&E.length>0)if(Q)if((fe.state&B)!==0)w(p,new l);else{if(fe.destroyed||fe.errored)return!1;Re(p,fe,E,!0)}else if(fe.ended)w(p,new h);else{if(fe.destroyed||fe.errored)return!1;fe.state&=-9,fe.decoder&&!ie?(E=fe.decoder.write(E),fe.objectMode||E.length!==0?Re(p,fe,E,!1):Pe(p,fe)):Re(p,fe,E,!1)}else Q||(fe.state&=-9,Pe(p,fe));return!fe.ended&&(fe.length<fe.highWaterMark||fe.length===0)}function Re(p,E,ie,Q){E.flowing&&E.length===0&&!E.sync&&p.listenerCount("data")>0?((E.state&re)!==0?E.awaitDrainWriters.clear():E.awaitDrainWriters=null,E.dataEmitted=!0,p.emit("data",ie)):(E.length+=E.objectMode?1:ie.length,Q?E.buffer.unshift(ie):E.buffer.push(ie),(E.state&ae)!==0&&je(p)),Pe(p,E)}V.prototype.isPaused=function(){const p=this._readableState;return p[R]===!0||p.flowing===!1},V.prototype.setEncoding=function(p){const E=new M(p);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;const ie=this._readableState.buffer;let Q="";for(const fe of ie)Q+=E.write(fe);return ie.clear(),Q!==""&&ie.push(Q),this._readableState.length=Q.length,this};const be=1073741824;function Ce(p){if(p>be)throw new d("size","<= 1GiB",p);return p--,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p++,p}function Oe(p,E){return p<=0||E.length===0&&E.ended?0:(E.state&W)!==0?1:n(p)?E.flowing&&E.length?E.buffer.first().length:E.length:p<=E.length?p:E.ended?E.length:0}V.prototype.read=function(p){S("read",p),p===void 0?p=NaN:t(p)||(p=o(p,10));const E=this._readableState,ie=p;if(p>E.highWaterMark&&(E.highWaterMark=Ce(p)),p!==0&&(E.state&=-129),p===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return S("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?Xe(this):je(this),null;if(p=Oe(p,E),p===0&&E.ended)return E.length===0&&Xe(this),null;let Q=(E.state&ae)!==0;if(S("need readable",Q),(E.length===0||E.length-p<E.highWaterMark)&&(Q=!0,S("length less than watermark",Q)),E.ended||E.reading||E.destroyed||E.errored||!E.constructed)Q=!1,S("reading, ended or constructing",Q);else if(Q){S("do read"),E.state|=X|le,E.length===0&&(E.state|=ae);try{this._read(E.highWaterMark)}catch(Ne){w(this,Ne)}E.state&=-33,E.reading||(p=Oe(ie,E))}let fe;return p>0?fe=Rt(p,E):fe=null,fe===null?(E.needReadable=E.length<=E.highWaterMark,p=0):(E.length-=p,E.multiAwaitDrain?E.awaitDrainWriters.clear():E.awaitDrainWriters=null),E.length===0&&(E.ended||(E.needReadable=!0),ie!==p&&E.ended&&Xe(this)),fe!==null&&!E.errorEmitted&&!E.closeEmitted&&(E.dataEmitted=!0,this.emit("data",fe)),fe};function ke(p,E){if(S("onEofChunk"),!E.ended){if(E.decoder){const ie=E.decoder.end();ie&&ie.length&&(E.buffer.push(ie),E.length+=E.objectMode?1:ie.length)}E.ended=!0,E.sync?je(p):(E.needReadable=!1,E.emittedReadable=!0,ct(p))}}function je(p){const E=p._readableState;S("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(S("emitReadable",E.flowing),E.emittedReadable=!0,r.nextTick(ct,p))}function ct(p){const E=p._readableState;S("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&!E.errored&&(E.length||E.ended)&&(p.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,Ht(p)}function Pe(p,E){!E.readingMore&&E.constructed&&(E.readingMore=!0,r.nextTick(qt,p,E))}function qt(p,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){const ie=E.length;if(S("maybeReadMore read 0"),p.read(0),ie===E.length)break}E.readingMore=!1}V.prototype._read=function(p){throw new a("_read()")},V.prototype.pipe=function(p,E){const ie=this,Q=this._readableState;Q.pipes.length===1&&(Q.multiAwaitDrain||(Q.multiAwaitDrain=!0,Q.awaitDrainWriters=new T(Q.awaitDrainWriters?[Q.awaitDrainWriters]:[]))),Q.pipes.push(p),S("pipe count=%d opts=%j",Q.pipes.length,E);const Ne=(!E||E.end!==!1)&&p!==r.stdout&&p!==r.stderr?Gt:dt;Q.endEmitted?r.nextTick(Ne):ie.once("end",Ne),p.on("unpipe",xe);function xe(tt,He){S("onunpipe"),tt===ie&&He&&He.hasUnpiped===!1&&(He.hasUnpiped=!0,Ar())}function Gt(){S("onend"),p.end()}let Ze,et=!1;function Ar(){S("cleanup"),p.removeListener("close",Ot),p.removeListener("finish",Ve),Ze&&p.removeListener("drain",Ze),p.removeListener("error",It),p.removeListener("unpipe",xe),ie.removeListener("end",Gt),ie.removeListener("end",dt),ie.removeListener("data",Vt),et=!0,Ze&&Q.awaitDrainWriters&&(!p._writableState||p._writableState.needDrain)&&Ze()}function Kt(){et||(Q.pipes.length===1&&Q.pipes[0]===p?(S("false write response, pause",0),Q.awaitDrainWriters=p,Q.multiAwaitDrain=!1):Q.pipes.length>1&&Q.pipes.includes(p)&&(S("false write response, pause",Q.awaitDrainWriters.size),Q.awaitDrainWriters.add(p)),ie.pause()),Ze||(Ze=Bt(ie,p),p.on("drain",Ze))}ie.on("data",Vt);function Vt(tt){S("ondata");const He=p.write(tt);S("dest.write",He),He===!1&&Kt()}function It(tt){if(S("onerror",tt),dt(),p.removeListener("error",It),p.listenerCount("error")===0){const He=p._writableState||p._readableState;He&&!He.errorEmitted?w(p,tt):p.emit("error",tt)}}P(p,"error",It);function Ot(){p.removeListener("finish",Ve),dt()}p.once("close",Ot);function Ve(){S("onfinish"),p.removeListener("close",Ot),dt()}p.once("finish",Ve);function dt(){S("unpipe"),ie.unpipe(p)}return p.emit("pipe",ie),p.writableNeedDrain===!0?Kt():Q.flowing||(S("pipe resume"),ie.resume()),p};function Bt(p,E){return function(){const Q=p._readableState;Q.awaitDrainWriters===E?(S("pipeOnDrain",1),Q.awaitDrainWriters=null):Q.multiAwaitDrain&&(S("pipeOnDrain",Q.awaitDrainWriters.size),Q.awaitDrainWriters.delete(E)),(!Q.awaitDrainWriters||Q.awaitDrainWriters.size===0)&&p.listenerCount("data")&&p.resume()}}V.prototype.unpipe=function(p){const E=this._readableState,ie={hasUnpiped:!1};if(E.pipes.length===0)return this;if(!p){const fe=E.pipes;E.pipes=[],this.pause();for(let Ne=0;Ne<fe.length;Ne++)fe[Ne].emit("unpipe",this,{hasUnpiped:!1});return this}const Q=e(E.pipes,p);return Q===-1?this:(E.pipes.splice(Q,1),E.pipes.length===0&&this.pause(),p.emit("unpipe",this,ie),this)},V.prototype.on=function(p,E){const ie=q.prototype.on.call(this,p,E),Q=this._readableState;return p==="data"?(Q.readableListening=this.listenerCount("readable")>0,Q.flowing!==!1&&this.resume()):p==="readable"&&!Q.endEmitted&&!Q.readableListening&&(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,S("on readable",Q.length,Q.reading),Q.length?je(this):Q.reading||r.nextTick(vr,this)),ie},V.prototype.addListener=V.prototype.on,V.prototype.removeListener=function(p,E){const ie=q.prototype.removeListener.call(this,p,E);return p==="readable"&&r.nextTick($t,this),ie},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(p){const E=q.prototype.removeAllListeners.apply(this,arguments);return(p==="readable"||p===void 0)&&r.nextTick($t,this),E};function $t(p){const E=p._readableState;E.readableListening=p.listenerCount("readable")>0,E.resumeScheduled&&E[R]===!1?E.flowing=!0:p.listenerCount("data")>0?p.resume():E.readableListening||(E.flowing=null)}function vr(p){S("readable nexttick read 0"),p.read(0)}V.prototype.resume=function(){const p=this._readableState;return p.flowing||(S("resume"),p.flowing=!p.readableListening,Ye(this,p)),p[R]=!1,this};function Ye(p,E){E.resumeScheduled||(E.resumeScheduled=!0,r.nextTick(mt,p,E))}function mt(p,E){S("resume",E.reading),E.reading||p.read(0),E.resumeScheduled=!1,p.emit("resume"),Ht(p),E.flowing&&!E.reading&&p.read(0)}V.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[R]=!0,this};function Ht(p){const E=p._readableState;for(S("flow",E.flowing);E.flowing&&p.read()!==null;);}V.prototype.wrap=function(p){let E=!1;p.on("data",Q=>{!this.push(Q)&&p.pause&&(E=!0,p.pause())}),p.on("end",()=>{this.push(null)}),p.on("error",Q=>{w(this,Q)}),p.on("close",()=>{this.destroy()}),p.on("destroy",()=>{this.destroy()}),this._read=()=>{E&&p.resume&&(E=!1,p.resume())};const ie=u(p);for(let Q=1;Q<ie.length;Q++){const fe=ie[Q];this[fe]===void 0&&typeof p[fe]=="function"&&(this[fe]=p[fe].bind(p))}return this},V.prototype[k]=function(){return At(this)},V.prototype.iterator=function(p){return p!==void 0&&m(p,"options"),At(this,p)};function At(p,E){typeof p.read!="function"&&(p=V.wrap(p,{objectMode:!0}));const ie=Sr(p,E);return ie.stream=p,ie}async function*Sr(p,E){let ie=j;function Q(xe){this===p?(ie(),ie=j):ie=xe}p.on("readable",Q);let fe;const Ne=c(p,{writable:!1},xe=>{fe=xe?i(fe,xe):null,ie(),ie=j});try{for(;;){const xe=p.destroyed?null:p.read();if(xe!==null)yield xe;else{if(fe)throw fe;if(fe===null)return;await new O(Q)}}}catch(xe){throw fe=i(fe,xe),fe}finally{(fe||(E==null?void 0:E.destroyOnReturn)!==!1)&&(fe===void 0||p._readableState.autoDestroy)?G.destroyer(p,null):(p.off("readable",Q),Ne())}}s(V.prototype,{readable:{__proto__:null,get(){const p=this._readableState;return!!p&&p.readable!==!1&&!p.destroyed&&!p.errorEmitted&&!p.endEmitted},set(p){this._readableState&&(this._readableState.readable=!!p)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(p){this._readableState&&(this._readableState.flowing=p)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(p){this._readableState&&(this._readableState.destroyed=p)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(Z.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[R]!==!1},set(p){this[R]=!!p}}}),V._fromList=Rt;function Rt(p,E){if(E.length===0)return null;let ie;return E.objectMode?ie=E.buffer.shift():!p||p>=E.length?(E.decoder?ie=E.buffer.join(""):E.buffer.length===1?ie=E.buffer.first():ie=E.buffer.concat(E.length),E.buffer.clear()):ie=E.buffer.consume(p,E.decoder),ie}function Xe(p){const E=p._readableState;S("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,r.nextTick(Er,E,p))}function Er(p,E){if(S("endReadableNT",p.endEmitted,p.length),!p.errored&&!p.closeEmitted&&!p.endEmitted&&p.length===0){if(p.endEmitted=!0,E.emit("end"),E.writable&&E.allowHalfOpen===!1)r.nextTick(Qe,E);else if(p.autoDestroy){const ie=E._writableState;(!ie||ie.autoDestroy&&(ie.finished||ie.writable===!1))&&E.destroy()}}}function Qe(p){p.writable&&!p.writableEnded&&!p.destroyed&&p.end()}V.from=function(p,E){return b(V,p,E)};let Tt;function zt(){return Tt===void 0&&(Tt={}),Tt}return V.fromWeb=function(p,E){return zt().newStreamReadableFromReadableStream(p,E)},V.toWeb=function(p,E){return zt().newReadableStreamFromStreamReadable(p,E)},V.wrap=function(p,E){var ie,Q;return new V({objectMode:(ie=(Q=p.readableObjectMode)!==null&&Q!==void 0?Q:p.objectMode)!==null&&ie!==void 0?ie:!0,...E,destroy(fe,Ne){G.destroyer(p,fe),Ne(fe)}}).wrap(p)},Xr}var Qr,oi;function An(){if(oi)return Qr;oi=1;const r=yt(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:s,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:_,Symbol:O,SymbolHasInstance:T}=Ie();Qr=m,m.WritableState=l;const{EventEmitter:D}=dr(),k=En().Stream,{Buffer:v}=bt(),F=Et(),{addAbortSignal:q}=hr(),{getHighWaterMark:P,getDefaultHighWaterMark:A}=gr(),{ERR_INVALID_ARG_TYPE:f,ERR_METHOD_NOT_IMPLEMENTED:c,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:H,ERR_STREAM_DESTROYED:G,ERR_STREAM_ALREADY_FINISHED:se,ERR_STREAM_NULL_VALUES:he,ERR_STREAM_WRITE_AFTER_END:i,ERR_UNKNOWN_ENCODING:g}=Le().codes,{errorOrDestroy:a}=F;u(m.prototype,k.prototype),u(m,k);function d(){}const h=O("kOnFinished");function l(N,L,U){typeof U!="boolean"&&(U=L instanceof ot()),this.objectMode=!!(N&&N.objectMode),U&&(this.objectMode=this.objectMode||!!(N&&N.writableObjectMode)),this.highWaterMark=N?P(this,N,"writableHighWaterMark",U):A(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ne=!!(N&&N.decodeStrings===!1);this.decodeStrings=!ne,this.defaultEncoding=N&&N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=w.bind(void 0,L),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,I(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!N||N.emitClose!==!1,this.autoDestroy=!N||N.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[h]=[]}function I(N){N.buffered=[],N.bufferedIndex=0,N.allBuffers=!0,N.allNoop=!0}l.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},o(l.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function m(N){const L=this instanceof ot();if(!L&&!n(m,this))return new m(N);this._writableState=new l(N,this,L),N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final),typeof N.construct=="function"&&(this._construct=N.construct),N.signal&&q(N.signal,this)),k.call(this,N),F.construct(this,()=>{const U=this._writableState;U.writing||X(this,U),z(this,U)})}o(m,T,{__proto__:null,value:function(N){return n(this,N)?!0:this!==m?!1:N&&N._writableState instanceof l}}),m.prototype.pipe=function(){a(this,new H)};function R(N,L,U,ne){const re=N._writableState;if(typeof U=="function")ne=U,U=re.defaultEncoding;else{if(!U)U=re.defaultEncoding;else if(U!=="buffer"&&!v.isEncoding(U))throw new g(U);typeof ne!="function"&&(ne=d)}if(L===null)throw new he;if(!re.objectMode)if(typeof L=="string")re.decodeStrings!==!1&&(L=v.from(L,U),U="buffer");else if(L instanceof v)U="buffer";else if(k._isUint8Array(L))L=k._uint8ArrayToBuffer(L),U="buffer";else throw new f("chunk",["string","Buffer","Uint8Array"],L);let te;return re.ending?te=new i:re.destroyed&&(te=new G("write")),te?(r.nextTick(ne,te),a(N,te,!0),te):(re.pendingcb++,M(N,re,L,U,ne))}m.prototype.write=function(N,L,U){return R(this,N,L,U)===!0},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){const N=this._writableState;N.corked&&(N.corked--,N.writing||X(this,N))},m.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=_(L)),!v.isEncoding(L))throw new g(L);return this._writableState.defaultEncoding=L,this};function M(N,L,U,ne,re){const te=L.objectMode?1:U.length;L.length+=te;const C=L.length<L.highWaterMark;return C||(L.needDrain=!0),L.writing||L.corked||L.errored||!L.constructed?(L.buffered.push({chunk:U,encoding:ne,callback:re}),L.allBuffers&&ne!=="buffer"&&(L.allBuffers=!1),L.allNoop&&re!==d&&(L.allNoop=!1)):(L.writelen=te,L.writecb=re,L.writing=!0,L.sync=!0,N._write(U,ne,L.onwrite),L.sync=!1),C&&!L.errored&&!L.destroyed}function b(N,L,U,ne,re,te,C){L.writelen=ne,L.writecb=C,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new G("write")):U?N._writev(re,L.onwrite):N._write(re,te,L.onwrite),L.sync=!1}function j(N,L,U,ne){--L.pendingcb,ne(U),B(L),a(N,U)}function w(N,L){const U=N._writableState,ne=U.sync,re=U.writecb;if(typeof re!="function"){a(N,new S);return}U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0,L?(L.stack,U.errored||(U.errored=L),N._readableState&&!N._readableState.errored&&(N._readableState.errored=L),ne?r.nextTick(j,N,U,L,re):j(N,U,L,re)):(U.buffered.length>U.bufferedIndex&&X(N,U),ne?U.afterWriteTickInfo!==null&&U.afterWriteTickInfo.cb===re?U.afterWriteTickInfo.count++:(U.afterWriteTickInfo={count:1,cb:re,stream:N,state:U},r.nextTick(W,U.afterWriteTickInfo)):Y(N,U,1,re))}function W({stream:N,state:L,count:U,cb:ne}){return L.afterWriteTickInfo=null,Y(N,L,U,ne)}function Y(N,L,U,ne){for(!L.ending&&!N.destroyed&&L.length===0&&L.needDrain&&(L.needDrain=!1,N.emit("drain"));U-- >0;)L.pendingcb--,ne();L.destroyed&&B(L),z(N,L)}function B(N){if(N.writing)return;for(let re=N.bufferedIndex;re<N.buffered.length;++re){var L;const{chunk:te,callback:C}=N.buffered[re],J=N.objectMode?1:te.length;N.length-=J,C((L=N.errored)!==null&&L!==void 0?L:new G("write"))}const U=N[h].splice(0);for(let re=0;re<U.length;re++){var ne;U[re]((ne=N.errored)!==null&&ne!==void 0?ne:new G("end"))}I(N)}function X(N,L){if(L.corked||L.bufferProcessing||L.destroyed||!L.constructed)return;const{buffered:U,bufferedIndex:ne,objectMode:re}=L,te=U.length-ne;if(!te)return;let C=ne;if(L.bufferProcessing=!0,te>1&&N._writev){L.pendingcb-=te-1;const J=L.allNoop?d:V=>{for(let we=C;we<U.length;++we)U[we].callback(V)},Z=L.allNoop&&C===0?U:e(U,C);Z.allBuffers=L.allBuffers,b(N,L,!0,L.length,Z,"",J),I(L)}else{do{const{chunk:J,encoding:Z,callback:V}=U[C];U[C++]=null;const we=re?1:J.length;b(N,L,!1,we,J,Z,V)}while(C<U.length&&!L.writing);C===U.length?I(L):C>256?(U.splice(0,C),L.bufferedIndex=0):L.bufferedIndex=C}L.bufferProcessing=!1}m.prototype._write=function(N,L,U){if(this._writev)this._writev([{chunk:N,encoding:L}],U);else throw new c("_write()")},m.prototype._writev=null,m.prototype.end=function(N,L,U){const ne=this._writableState;typeof N=="function"?(U=N,N=null,L=null):typeof L=="function"&&(U=L,L=null);let re;if(N!=null){const te=R(this,N,L);te instanceof t&&(re=te)}return ne.corked&&(ne.corked=1,this.uncork()),re||(!ne.errored&&!ne.ending?(ne.ending=!0,z(this,ne,!0),ne.ended=!0):ne.finished?re=new se("end"):ne.destroyed&&(re=new G("end"))),typeof U=="function"&&(re||ne.finished?r.nextTick(U,re):ne[h].push(U)),this};function ee(N){return N.ending&&!N.destroyed&&N.constructed&&N.length===0&&!N.errored&&N.buffered.length===0&&!N.finished&&!N.writing&&!N.errorEmitted&&!N.closeEmitted}function le(N,L){let U=!1;function ne(re){if(U){a(N,re??S());return}if(U=!0,L.pendingcb--,re){const te=L[h].splice(0);for(let C=0;C<te.length;C++)te[C](re);a(N,re,L.sync)}else ee(L)&&(L.prefinished=!0,N.emit("prefinish"),L.pendingcb++,r.nextTick(K,N,L))}L.sync=!0,L.pendingcb++;try{N._final(ne)}catch(re){ne(re)}L.sync=!1}function ae(N,L){!L.prefinished&&!L.finalCalled&&(typeof N._final=="function"&&!L.destroyed?(L.finalCalled=!0,le(N,L)):(L.prefinished=!0,N.emit("prefinish")))}function z(N,L,U){ee(L)&&(ae(N,L),L.pendingcb===0&&(U?(L.pendingcb++,r.nextTick((ne,re)=>{ee(re)?K(ne,re):re.pendingcb--},N,L)):ee(L)&&(L.pendingcb++,K(N,L))))}function K(N,L){L.pendingcb--,L.finished=!0;const U=L[h].splice(0);for(let ne=0;ne<U.length;ne++)U[ne]();if(N.emit("finish"),L.autoDestroy){const ne=N._readableState;(!ne||ne.autoDestroy&&(ne.endEmitted||ne.readable===!1))&&N.destroy()}}s(m.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(N){this._writableState&&(this._writableState.destroyed=N)}},writable:{__proto__:null,get(){const N=this._writableState;return!!N&&N.writable!==!1&&!N.destroyed&&!N.errored&&!N.ending&&!N.ended},set(N){this._writableState&&(this._writableState.writable=!!N)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const N=this._writableState;return N?!N.destroyed&&!N.ending&&N.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const oe=F.destroy;m.prototype.destroy=function(N,L){const U=this._writableState;return!U.destroyed&&(U.bufferedIndex<U.buffered.length||U[h].length)&&r.nextTick(B,U),oe.call(this,N,L),this},m.prototype._undestroy=F.undestroy,m.prototype._destroy=function(N,L){L(N)},m.prototype[D.captureRejectionSymbol]=function(N){this.destroy(N)};let ue;function de(){return ue===void 0&&(ue={}),ue}return m.fromWeb=function(N,L){return de().newStreamWritableFromWritableStream(N,L)},m.toWeb=function(N){return de().newWritableStreamFromStreamWritable(N)},Qr}var Zr,si;function us(){if(si)return Zr;si=1;const r=yt(),e=bt(),{isReadable:t,isWritable:n,isIterable:o,isNodeStream:s,isReadableNodeStream:u,isWritableNodeStream:_,isDuplexNodeStream:O,isReadableStream:T,isWritableStream:D}=st(),k=ft(),{AbortError:v,codes:{ERR_INVALID_ARG_TYPE:F,ERR_INVALID_RETURN_VALUE:q}}=Le(),{destroyer:P}=Et(),A=ot(),f=pr(),c=An(),{createDeferredPromise:S}=De(),H=ro(),G=globalThis.Blob||e.Blob,se=typeof G<"u"?function(l){return l instanceof G}:function(l){return!1},he=globalThis.AbortController||Wt().AbortController,{FunctionPrototypeCall:i}=Ie();class g extends A{constructor(l){super(l),(l==null?void 0:l.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(l==null?void 0:l.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Zr=function h(l,I){if(O(l))return l;if(u(l))return d({readable:l});if(_(l))return d({writable:l});if(s(l))return d({writable:!1,readable:!1});if(T(l))return d({readable:f.fromWeb(l)});if(D(l))return d({writable:c.fromWeb(l)});if(typeof l=="function"){const{value:R,write:M,final:b,destroy:j}=a(l);if(o(R))return H(g,R,{objectMode:!0,write:M,final:b,destroy:j});const w=R==null?void 0:R.then;if(typeof w=="function"){let W;const Y=i(w,R,B=>{if(B!=null)throw new q("nully","body",B)},B=>{P(W,B)});return W=new g({objectMode:!0,readable:!1,write:M,final(B){b(async()=>{try{await Y,r.nextTick(B,null)}catch(X){r.nextTick(B,X)}})},destroy:j})}throw new q("Iterable, AsyncIterable or AsyncFunction",I,R)}if(se(l))return h(l.arrayBuffer());if(o(l))return H(g,l,{objectMode:!0,writable:!1});if(T(l==null?void 0:l.readable)&&D(l==null?void 0:l.writable))return g.fromWeb(l);if(typeof(l==null?void 0:l.writable)=="object"||typeof(l==null?void 0:l.readable)=="object"){const R=l!=null&&l.readable?u(l==null?void 0:l.readable)?l==null?void 0:l.readable:h(l.readable):void 0,M=l!=null&&l.writable?_(l==null?void 0:l.writable)?l==null?void 0:l.writable:h(l.writable):void 0;return d({readable:R,writable:M})}const m=l==null?void 0:l.then;if(typeof m=="function"){let R;return i(m,l,M=>{M!=null&&R.push(M),R.push(null)},M=>{P(R,M)}),R=new g({objectMode:!0,writable:!1,read(){}})}throw new F(I,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],l)};function a(h){let{promise:l,resolve:I}=S();const m=new he,R=m.signal;return{value:h(async function*(){for(;;){const b=l;l=null;const{chunk:j,done:w,cb:W}=await b;if(r.nextTick(W),w)return;if(R.aborted)throw new v(void 0,{cause:R.reason});({promise:l,resolve:I}=S()),yield j}}(),{signal:R}),write(b,j,w){const W=I;I=null,W({chunk:b,done:!1,cb:w})},final(b){const j=I;I=null,j({done:!0,cb:b})},destroy(b,j){m.abort(),j(b)}}}function d(h){const l=h.readable&&typeof h.readable.read!="function"?f.wrap(h.readable):h.readable,I=h.writable;let m=!!t(l),R=!!n(I),M,b,j,w,W;function Y(B){const X=w;w=null,X?X(B):B&&W.destroy(B)}return W=new g({readableObjectMode:!!(l!=null&&l.readableObjectMode),writableObjectMode:!!(I!=null&&I.writableObjectMode),readable:m,writable:R}),R&&(k(I,B=>{R=!1,B&&P(l,B),Y(B)}),W._write=function(B,X,ee){I.write(B,X)?ee():M=ee},W._final=function(B){I.end(),b=B},I.on("drain",function(){if(M){const B=M;M=null,B()}}),I.on("finish",function(){if(b){const B=b;b=null,B()}})),m&&(k(l,B=>{m=!1,B&&P(l,B),Y(B)}),l.on("readable",function(){if(j){const B=j;j=null,B()}}),l.on("end",function(){W.push(null)}),W._read=function(){for(;;){const B=l.read();if(B===null){j=W._read;return}if(!W.push(B))return}}),W._destroy=function(B,X){!B&&w!==null&&(B=new v),j=null,M=null,b=null,w===null?X(B):(w=X,P(I,B),P(l,B))},W}return Zr}var en,ai;function ot(){if(ai)return en;ai=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Ie();en=u;const o=pr(),s=An();n(u.prototype,o.prototype),n(u,o);{const D=t(s.prototype);for(let k=0;k<D.length;k++){const v=D[k];u.prototype[v]||(u.prototype[v]=s.prototype[v])}}function u(D){if(!(this instanceof u))return new u(D);o.call(this,D),s.call(this,D),D?(this.allowHalfOpen=D.allowHalfOpen!==!1,D.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),D.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(u.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(D){this._readableState&&this._writableState&&(this._readableState.destroyed=D,this._writableState.destroyed=D)}}});let _;function O(){return _===void 0&&(_={}),_}u.fromWeb=function(D,k){return O().newStreamDuplexFromReadableWritablePair(D,k)},u.toWeb=function(D){return O().newReadableWritablePairFromDuplex(D)};let T;return u.from=function(D){return T||(T=us()),T(D,"body")},en}var tn,li;function no(){if(li)return tn;li=1;const{ObjectSetPrototypeOf:r,Symbol:e}=Ie();tn=u;const{ERR_METHOD_NOT_IMPLEMENTED:t}=Le().codes,n=ot(),{getHighWaterMark:o}=gr();r(u.prototype,n.prototype),r(u,n);const s=e("kCallback");function u(T){if(!(this instanceof u))return new u(T);const D=T?o(this,T,"readableHighWaterMark",!0):null;D===0&&(T={...T,highWaterMark:null,readableHighWaterMark:D,writableHighWaterMark:T.writableHighWaterMark||0}),n.call(this,T),this._readableState.sync=!1,this[s]=null,T&&(typeof T.transform=="function"&&(this._transform=T.transform),typeof T.flush=="function"&&(this._flush=T.flush)),this.on("prefinish",O)}function _(T){typeof this._flush=="function"&&!this.destroyed?this._flush((D,k)=>{if(D){T?T(D):this.destroy(D);return}k!=null&&this.push(k),this.push(null),T&&T()}):(this.push(null),T&&T())}function O(){this._final!==_&&_.call(this)}return u.prototype._final=_,u.prototype._transform=function(T,D,k){throw new t("_transform()")},u.prototype._write=function(T,D,k){const v=this._readableState,F=this._writableState,q=v.length;this._transform(T,D,(P,A)=>{if(P){k(P);return}A!=null&&this.push(A),F.ended||q===v.length||v.length<v.highWaterMark?k():this[s]=k})},u.prototype._read=function(){if(this[s]){const T=this[s];this[s]=null,T()}},tn}var rn,ui;function io(){if(ui)return rn;ui=1;const{ObjectSetPrototypeOf:r}=Ie();rn=t;const e=no();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,o,s){s(null,n)},rn}var nn,fi;function Rn(){if(fi)return nn;fi=1;const r=yt(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:o}=Ie(),s=ft(),{once:u}=De(),_=Et(),O=ot(),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:D,ERR_INVALID_RETURN_VALUE:k,ERR_MISSING_ARGS:v,ERR_STREAM_DESTROYED:F,ERR_STREAM_PREMATURE_CLOSE:q},AbortError:P}=Le(),{validateFunction:A,validateAbortSignal:f}=Ft(),{isIterable:c,isReadable:S,isReadableNodeStream:H,isNodeStream:G,isTransformStream:se,isWebStream:he,isReadableStream:i,isReadableFinished:g}=st(),a=globalThis.AbortController||Wt().AbortController;let d,h,l;function I(B,X,ee){let le=!1;B.on("close",()=>{le=!0});const ae=s(B,{readable:X,writable:ee},z=>{le=!z});return{destroy:z=>{le||(le=!0,_.destroyer(B,z||new F("pipe")))},cleanup:ae}}function m(B){return A(B[B.length-1],"streams[stream.length - 1]"),B.pop()}function R(B){if(c(B))return B;if(H(B))return M(B);throw new D("val",["Readable","Iterable","AsyncIterable"],B)}async function*M(B){h||(h=pr()),yield*h.prototype[n].call(B)}async function b(B,X,ee,{end:le}){let ae,z=null;const K=de=>{if(de&&(ae=de),z){const N=z;z=null,N()}},oe=()=>new t((de,N)=>{ae?N(ae):z=()=>{ae?N(ae):de()}});X.on("drain",K);const ue=s(X,{readable:!1},K);try{X.writableNeedDrain&&await oe();for await(const de of B)X.write(de)||await oe();le&&(X.end(),await oe()),ee()}catch(de){ee(ae!==de?T(ae,de):de)}finally{ue(),X.off("drain",K)}}async function j(B,X,ee,{end:le}){se(X)&&(X=X.writable);const ae=X.getWriter();try{for await(const z of B)await ae.ready,ae.write(z).catch(()=>{});await ae.ready,le&&await ae.close(),ee()}catch(z){try{await ae.abort(z),ee(z)}catch(K){ee(K)}}}function w(...B){return W(B,u(m(B)))}function W(B,X,ee){if(B.length===1&&e(B[0])&&(B=B[0]),B.length<2)throw new v("streams");const le=new a,ae=le.signal,z=ee==null?void 0:ee.signal,K=[];f(z,"options.signal");function oe(){re(new P)}l=l||De().addAbortListener;let ue;z&&(ue=l(z,oe));let de,N;const L=[];let U=0;function ne(Z){re(Z,--U===0)}function re(Z,V){var we;if(Z&&(!de||de.code==="ERR_STREAM_PREMATURE_CLOSE")&&(de=Z),!(!de&&!V)){for(;L.length;)L.shift()(de);(we=ue)===null||we===void 0||we[o](),le.abort(),V&&(de||K.forEach(Re=>Re()),r.nextTick(X,de,N))}}let te;for(let Z=0;Z<B.length;Z++){const V=B[Z],we=Z<B.length-1,Re=Z>0,be=we||(ee==null?void 0:ee.end)!==!1,Ce=Z===B.length-1;if(G(V)){let Oe=function(ke){ke&&ke.name!=="AbortError"&&ke.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ne(ke)};if(be){const{destroy:ke,cleanup:je}=I(V,we,Re);L.push(ke),S(V)&&Ce&&K.push(je)}V.on("error",Oe),S(V)&&Ce&&K.push(()=>{V.removeListener("error",Oe)})}if(Z===0)if(typeof V=="function"){if(te=V({signal:ae}),!c(te))throw new k("Iterable, AsyncIterable or Stream","source",te)}else c(V)||H(V)||se(V)?te=V:te=O.from(V);else if(typeof V=="function"){if(se(te)){var C;te=R((C=te)===null||C===void 0?void 0:C.readable)}else te=R(te);if(te=V(te,{signal:ae}),we){if(!c(te,!0))throw new k("AsyncIterable",`transform[${Z-1}]`,te)}else{var J;d||(d=io());const Oe=new d({objectMode:!0}),ke=(J=te)===null||J===void 0?void 0:J.then;if(typeof ke=="function")U++,ke.call(te,Pe=>{N=Pe,Pe!=null&&Oe.write(Pe),be&&Oe.end(),r.nextTick(ne)},Pe=>{Oe.destroy(Pe),r.nextTick(ne,Pe)});else if(c(te,!0))U++,b(te,Oe,ne,{end:be});else if(i(te)||se(te)){const Pe=te.readable||te;U++,b(Pe,Oe,ne,{end:be})}else throw new k("AsyncIterable or Promise","destination",te);te=Oe;const{destroy:je,cleanup:ct}=I(te,!1,!0);L.push(je),Ce&&K.push(ct)}}else if(G(V)){if(H(te)){U+=2;const Oe=Y(te,V,ne,{end:be});S(V)&&Ce&&K.push(Oe)}else if(se(te)||i(te)){const Oe=te.readable||te;U++,b(Oe,V,ne,{end:be})}else if(c(te))U++,b(te,V,ne,{end:be});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],te);te=V}else if(he(V)){if(H(te))U++,j(R(te),V,ne,{end:be});else if(i(te)||c(te))U++,j(te,V,ne,{end:be});else if(se(te))U++,j(te.readable,V,ne,{end:be});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],te);te=V}else te=O.from(V)}return(ae!=null&&ae.aborted||z!=null&&z.aborted)&&r.nextTick(oe),te}function Y(B,X,ee,{end:le}){let ae=!1;if(X.on("close",()=>{ae||ee(new q)}),B.pipe(X,{end:!1}),le){let z=function(){ae=!0,X.end()};g(B)?r.nextTick(z):B.once("end",z)}else ee();return s(B,{readable:!0,writable:!1},z=>{const K=B._readableState;z&&z.code==="ERR_STREAM_PREMATURE_CLOSE"&&K&&K.ended&&!K.errored&&!K.errorEmitted?B.once("end",ee).once("error",ee):ee(z)}),s(X,{readable:!1,writable:!0},ee)}return nn={pipelineImpl:W,pipeline:w},nn}var on,ci;function oo(){if(ci)return on;ci=1;const{pipeline:r}=Rn(),e=ot(),{destroyer:t}=Et(),{isNodeStream:n,isReadable:o,isWritable:s,isWebStream:u,isTransformStream:_,isWritableStream:O,isReadableStream:T}=st(),{AbortError:D,codes:{ERR_INVALID_ARG_VALUE:k,ERR_MISSING_ARGS:v}}=Le(),F=ft();return on=function(...P){if(P.length===0)throw new v("streams");if(P.length===1)return e.from(P[0]);const A=[...P];if(typeof P[0]=="function"&&(P[0]=e.from(P[0])),typeof P[P.length-1]=="function"){const d=P.length-1;P[d]=e.from(P[d])}for(let d=0;d<P.length;++d)if(!(!n(P[d])&&!u(P[d]))){if(d<P.length-1&&!(o(P[d])||T(P[d])||_(P[d])))throw new k(`streams[${d}]`,A[d],"must be readable");if(d>0&&!(s(P[d])||O(P[d])||_(P[d])))throw new k(`streams[${d}]`,A[d],"must be writable")}let f,c,S,H,G;function se(d){const h=H;H=null,h?h(d):d?G.destroy(d):!a&&!g&&G.destroy()}const he=P[0],i=r(P,se),g=!!(s(he)||O(he)||_(he)),a=!!(o(i)||T(i)||_(i));if(G=new e({writableObjectMode:!!(he!=null&&he.writableObjectMode),readableObjectMode:!!(i!=null&&i.readableObjectMode),writable:g,readable:a}),g){if(n(he))G._write=function(h,l,I){he.write(h,l)?I():f=I},G._final=function(h){he.end(),c=h},he.on("drain",function(){if(f){const h=f;f=null,h()}});else if(u(he)){const l=(_(he)?he.writable:he).getWriter();G._write=async function(I,m,R){try{await l.ready,l.write(I).catch(()=>{}),R()}catch(M){R(M)}},G._final=async function(I){try{await l.ready,l.close().catch(()=>{}),c=I}catch(m){I(m)}}}const d=_(i)?i.readable:i;F(d,()=>{if(c){const h=c;c=null,h()}})}if(a){if(n(i))i.on("readable",function(){if(S){const d=S;S=null,d()}}),i.on("end",function(){G.push(null)}),G._read=function(){for(;;){const d=i.read();if(d===null){S=G._read;return}if(!G.push(d))return}};else if(u(i)){const h=(_(i)?i.readable:i).getReader();G._read=async function(){for(;;)try{const{value:l,done:I}=await h.read();if(!G.push(l))return;if(I){G.push(null);return}}catch{return}}}}return G._destroy=function(d,h){!d&&H!==null&&(d=new D),S=null,f=null,c=null,H===null?h(d):(H=h,n(i)&&t(i,d))},G},on}var di;function fs(){if(di)return Zt;di=1;const r=globalThis.AbortController||Wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:o},AbortError:s}=Le(),{validateAbortSignal:u,validateInteger:_,validateObject:O}=Ft(),T=Ie().Symbol("kWeak"),D=Ie().Symbol("kResistStopPropagation"),{finished:k}=ft(),v=oo(),{addAbortSignalNoValidate:F}=hr(),{isWritable:q,isNodeStream:P}=st(),{deprecate:A}=De(),{ArrayPrototypePush:f,Boolean:c,MathFloor:S,Number:H,NumberIsNaN:G,Promise:se,PromiseReject:he,PromiseResolve:i,PromisePrototypeThen:g,Symbol:a}=Ie(),d=a("kEmpty"),h=a("kEof");function l(z,K){if(K!=null&&O(K,"options"),(K==null?void 0:K.signal)!=null&&u(K.signal,"options.signal"),P(z)&&!q(z))throw new e("stream",z,"must be writable");const oe=v(this,z);return K!=null&&K.signal&&F(K.signal,oe),oe}function I(z,K){if(typeof z!="function")throw new t("fn",["Function","AsyncFunction"],z);K!=null&&O(K,"options"),(K==null?void 0:K.signal)!=null&&u(K.signal,"options.signal");let oe=1;(K==null?void 0:K.concurrency)!=null&&(oe=S(K.concurrency));let ue=oe-1;return(K==null?void 0:K.highWaterMark)!=null&&(ue=S(K.highWaterMark)),_(oe,"options.concurrency",1),_(ue,"options.highWaterMark",0),ue+=oe,(async function*(){const N=De().AbortSignalAny([K==null?void 0:K.signal].filter(c)),L=this,U=[],ne={signal:N};let re,te,C=!1,J=0;function Z(){C=!0,V()}function V(){J-=1,we()}function we(){te&&!C&&J<oe&&U.length<ue&&(te(),te=null)}async function Re(){try{for await(let be of L){if(C)return;if(N.aborted)throw new s;try{if(be=z(be,ne),be===d)continue;be=i(be)}catch(Ce){be=he(Ce)}J+=1,g(be,V,Z),U.push(be),re&&(re(),re=null),!C&&(U.length>=ue||J>=oe)&&await new se(Ce=>{te=Ce})}U.push(h)}catch(be){const Ce=he(be);g(Ce,V,Z),U.push(Ce)}finally{C=!0,re&&(re(),re=null)}}Re();try{for(;;){for(;U.length>0;){const be=await U[0];if(be===h)return;if(N.aborted)throw new s;be!==d&&(yield be),U.shift(),we()}await new se(be=>{re=be})}}finally{C=!0,te&&(te(),te=null)}}).call(this)}function m(z=void 0){return z!=null&&O(z,"options"),(z==null?void 0:z.signal)!=null&&u(z.signal,"options.signal"),(async function*(){let oe=0;for await(const de of this){var ue;if(z!=null&&(ue=z.signal)!==null&&ue!==void 0&&ue.aborted)throw new s({cause:z.signal.reason});yield[oe++,de]}}).call(this)}async function R(z,K=void 0){for await(const oe of w.call(this,z,K))return!0;return!1}async function M(z,K=void 0){if(typeof z!="function")throw new t("fn",["Function","AsyncFunction"],z);return!await R.call(this,async(...oe)=>!await z(...oe),K)}async function b(z,K){for await(const oe of w.call(this,z,K))return oe}async function j(z,K){if(typeof z!="function")throw new t("fn",["Function","AsyncFunction"],z);async function oe(ue,de){return await z(ue,de),d}for await(const ue of I.call(this,oe,K));}function w(z,K){if(typeof z!="function")throw new t("fn",["Function","AsyncFunction"],z);async function oe(ue,de){return await z(ue,de)?ue:d}return I.call(this,oe,K)}class W extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Y(z,K,oe){var ue;if(typeof z!="function")throw new t("reducer",["Function","AsyncFunction"],z);oe!=null&&O(oe,"options"),(oe==null?void 0:oe.signal)!=null&&u(oe.signal,"options.signal");let de=arguments.length>1;if(oe!=null&&(ue=oe.signal)!==null&&ue!==void 0&&ue.aborted){const re=new s(void 0,{cause:oe.signal.reason});throw this.once("error",()=>{}),await k(this.destroy(re)),re}const N=new r,L=N.signal;if(oe!=null&&oe.signal){const re={once:!0,[T]:this,[D]:!0};oe.signal.addEventListener("abort",()=>N.abort(),re)}let U=!1;try{for await(const re of this){var ne;if(U=!0,oe!=null&&(ne=oe.signal)!==null&&ne!==void 0&&ne.aborted)throw new s;de?K=await z(K,re,{signal:L}):(K=re,de=!0)}if(!U&&!de)throw new W}finally{N.abort()}return K}async function B(z){z!=null&&O(z,"options"),(z==null?void 0:z.signal)!=null&&u(z.signal,"options.signal");const K=[];for await(const ue of this){var oe;if(z!=null&&(oe=z.signal)!==null&&oe!==void 0&&oe.aborted)throw new s(void 0,{cause:z.signal.reason});f(K,ue)}return K}function X(z,K){const oe=I.call(this,z,K);return(async function*(){for await(const de of oe)yield*de}).call(this)}function ee(z){if(z=H(z),G(z))return 0;if(z<0)throw new o("number",">= 0",z);return z}function le(z,K=void 0){return K!=null&&O(K,"options"),(K==null?void 0:K.signal)!=null&&u(K.signal,"options.signal"),z=ee(z),(async function*(){var ue;if(K!=null&&(ue=K.signal)!==null&&ue!==void 0&&ue.aborted)throw new s;for await(const N of this){var de;if(K!=null&&(de=K.signal)!==null&&de!==void 0&&de.aborted)throw new s;z--<=0&&(yield N)}}).call(this)}function ae(z,K=void 0){return K!=null&&O(K,"options"),(K==null?void 0:K.signal)!=null&&u(K.signal,"options.signal"),z=ee(z),(async function*(){var ue;if(K!=null&&(ue=K.signal)!==null&&ue!==void 0&&ue.aborted)throw new s;for await(const N of this){var de;if(K!=null&&(de=K.signal)!==null&&de!==void 0&&de.aborted)throw new s;if(z-- >0&&(yield N),z<=0)return}}).call(this)}return Zt.streamReturningOperators={asIndexedPairs:A(m,"readable.asIndexedPairs will be removed in a future version."),drop:le,filter:w,flatMap:X,map:I,take:ae,compose:l},Zt.promiseReturningOperators={every:M,forEach:j,reduce:Y,toArray:B,some:R,find:b},Zt}var sn,hi;function so(){if(hi)return sn;hi=1;const{ArrayPrototypePop:r,Promise:e}=Ie(),{isIterable:t,isNodeStream:n,isWebStream:o}=st(),{pipelineImpl:s}=Rn(),{finished:u}=ft();ao();function _(...O){return new e((T,D)=>{let k,v;const F=O[O.length-1];if(F&&typeof F=="object"&&!n(F)&&!t(F)&&!o(F)){const q=r(O);k=q.signal,v=q.end}s(O,(q,P)=>{q?D(q):T(P)},{signal:k,end:v})})}return sn={finished:u,pipeline:_},sn}var gi;function ao(){if(gi)return jr.exports;gi=1;const{Buffer:r}=bt(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Ie(),{promisify:{custom:o}}=De(),{streamReturningOperators:s,promiseReturningOperators:u}=fs(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:_}}=Le(),O=oo(),{setDefaultHighWaterMark:T,getDefaultHighWaterMark:D}=gr(),{pipeline:k}=Rn(),{destroyer:v}=Et(),F=ft(),q=so(),P=st(),A=jr.exports=En().Stream;A.isDestroyed=P.isDestroyed,A.isDisturbed=P.isDisturbed,A.isErrored=P.isErrored,A.isReadable=P.isReadable,A.isWritable=P.isWritable,A.Readable=pr();for(const c of t(s)){let H=function(...G){if(new.target)throw _();return A.Readable.from(n(S,this,G))};const S=s[c];e(H,"name",{__proto__:null,value:S.name}),e(H,"length",{__proto__:null,value:S.length}),e(A.Readable.prototype,c,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}for(const c of t(u)){let H=function(...G){if(new.target)throw _();return n(S,this,G)};const S=u[c];e(H,"name",{__proto__:null,value:S.name}),e(H,"length",{__proto__:null,value:S.length}),e(A.Readable.prototype,c,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}A.Writable=An(),A.Duplex=ot(),A.Transform=no(),A.PassThrough=io(),A.pipeline=k;const{addAbortSignal:f}=hr();return A.addAbortSignal=f,A.finished=F,A.destroy=v,A.compose=O,A.setDefaultHighWaterMark=T,A.getDefaultHighWaterMark=D,e(A,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return q}}),e(k,o,{__proto__:null,enumerable:!0,get(){return q.pipeline}}),e(F,o,{__proto__:null,enumerable:!0,get(){return q.finished}}),A.Stream=A,A._isUint8Array=function(S){return S instanceof Uint8Array},A._uint8ArrayToBuffer=function(S){return r.from(S.buffer,S.byteOffset,S.byteLength)},jr.exports}var pi;function cs(){return pi||(pi=1,function(r){const e=ao(),t=so(),n=e.Readable.destroy;r.exports=e.Readable,r.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,r.exports._isUint8Array=e._isUint8Array,r.exports.isDisturbed=e.isDisturbed,r.exports.isErrored=e.isErrored,r.exports.isReadable=e.isReadable,r.exports.Readable=e.Readable,r.exports.Writable=e.Writable,r.exports.Duplex=e.Duplex,r.exports.Transform=e.Transform,r.exports.PassThrough=e.PassThrough,r.exports.addAbortSignal=e.addAbortSignal,r.exports.finished=e.finished,r.exports.destroy=e.destroy,r.exports.destroy=n,r.exports.pipeline=e.pipeline,r.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),r.exports.Stream=e.Stream,r.exports.default=r.exports}(kr)),kr.exports}var wr=cs(),an,wi;function lo(){if(wi)return an;wi=1,an=s,s.default=s,s.stable=T,s.stableStringify=T;var r="[...]",e="[Circular]",t=[],n=[];function o(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(v,F,q,P){typeof P>"u"&&(P=o()),_(v,"",0,[],void 0,0,P);var A;try{n.length===0?A=JSON.stringify(v,F,q):A=JSON.stringify(v,k(F),q)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var f=t.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return A}function u(v,F,q,P){var A=Object.getOwnPropertyDescriptor(P,q);A.get!==void 0?A.configurable?(Object.defineProperty(P,q,{value:v}),t.push([P,q,F,A])):n.push([F,q,v]):(P[q]=v,t.push([P,q,F]))}function _(v,F,q,P,A,f,c){f+=1;var S;if(typeof v=="object"&&v!==null){for(S=0;S<P.length;S++)if(P[S]===v){u(e,v,F,A);return}if(typeof c.depthLimit<"u"&&f>c.depthLimit){u(r,v,F,A);return}if(typeof c.edgesLimit<"u"&&q+1>c.edgesLimit){u(r,v,F,A);return}if(P.push(v),Array.isArray(v))for(S=0;S<v.length;S++)_(v[S],S,S,P,v,f,c);else{var H=Object.keys(v);for(S=0;S<H.length;S++){var G=H[S];_(v[G],G,S,P,v,f,c)}}P.pop()}}function O(v,F){return v<F?-1:v>F?1:0}function T(v,F,q,P){typeof P>"u"&&(P=o());var A=D(v,"",0,[],void 0,0,P)||v,f;try{n.length===0?f=JSON.stringify(A,F,q):f=JSON.stringify(A,k(F),q)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var c=t.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return f}function D(v,F,q,P,A,f,c){f+=1;var S;if(typeof v=="object"&&v!==null){for(S=0;S<P.length;S++)if(P[S]===v){u(e,v,F,A);return}try{if(typeof v.toJSON=="function")return}catch{return}if(typeof c.depthLimit<"u"&&f>c.depthLimit){u(r,v,F,A);return}if(typeof c.edgesLimit<"u"&&q+1>c.edgesLimit){u(r,v,F,A);return}if(P.push(v),Array.isArray(v))for(S=0;S<v.length;S++)D(v[S],S,S,P,v,f,c);else{var H={},G=Object.keys(v).sort(O);for(S=0;S<G.length;S++){var se=G[S];D(v[se],se,S,P,v,f,c),H[se]=v[se]}if(typeof A<"u")t.push([A,F,v]),A[F]=H;else return H}P.pop()}}function k(v){return v=typeof v<"u"?v:function(F,q){return q},function(F,q){if(n.length>0)for(var P=0;P<n.length;P++){var A=n[P];if(A[1]===F&&A[0]===q){q=A[2],n.splice(P,1);break}}return v.call(this,F,q)}}return an}var ds=lo();const hs=St(ds);var tr={exports:{}},ln,_i;function gs(){if(_i)return ln;_i=1,ln=r;function r(e,t){if(e&&t)return r(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(o){n[o]=e[o]}),n;function n(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];var u=e.apply(this,o),_=o[o.length-1];return typeof u=="function"&&u!==_&&Object.keys(_).forEach(function(O){u[O]=_[O]}),u}}return ln}var bi;function Tn(){if(bi)return tr.exports;bi=1;var r=gs();tr.exports=r(e),tr.exports.strict=r(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(n){var o=function(){return o.called?o.value:(o.called=!0,o.value=n.apply(this,arguments))};return o.called=!1,o}function t(n){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=n.apply(this,arguments)},s=n.name||"Function wrapped with `once`";return o.onceError=s+" shouldn't be called more than once",o.called=!1,o}return tr.exports}var un,yi;function uo(){if(yi)return un;yi=1;var r=Tn(),e=function(){},t=function(s){return s.setHeader&&typeof s.abort=="function"},n=function(s){return s.stdio&&Array.isArray(s.stdio)&&s.stdio.length===3},o=function(s,u,_){if(typeof u=="function")return o(s,null,u);u||(u={}),_=r(_||e);var O=s._writableState,T=s._readableState,D=u.readable||u.readable!==!1&&s.readable,k=u.writable||u.writable!==!1&&s.writable,v=!1,F=function(){s.writable||q()},q=function(){k=!1,D||_.call(s)},P=function(){D=!1,k||_.call(s)},A=function(G){_.call(s,G?new Error("exited with error code: "+G):null)},f=function(G){_.call(s,G)},c=function(){eo.nextTick(S)},S=function(){if(!v){if(D&&!(T&&T.ended&&!T.destroyed))return _.call(s,new Error("premature close"));if(k&&!(O&&O.ended&&!O.destroyed))return _.call(s,new Error("premature close"))}},H=function(){s.req.on("finish",q)};return t(s)?(s.on("complete",q),s.on("abort",c),s.req?H():s.on("request",H)):k&&!O&&(s.on("end",F),s.on("close",F)),n(s)&&s.on("exit",A),s.on("end",P),s.on("finish",q),u.error!==!1&&s.on("error",f),s.on("close",c),function(){v=!0,s.removeListener("complete",q),s.removeListener("abort",c),s.removeListener("request",H),s.req&&s.req.removeListener("finish",q),s.removeListener("end",F),s.removeListener("close",F),s.removeListener("finish",q),s.removeListener("exit",A),s.removeListener("end",P),s.removeListener("error",f),s.removeListener("close",c)}};return un=o,un}var ps=uo();const mi=St(ps);var ws=Tn();const _s=St(ws);var bs=null;const ys=Object.freeze(Object.defineProperty({__proto__:null,default:bs},Symbol.toStringTag,{value:"Module"})),ms=ns(ys);var fn,vi;function vs(){if(vi)return fn;vi=1;var r=Tn(),e=uo(),t;try{t=ms}catch{}var n=function(){},o=/^v?\.0/.test(eo.version),s=function(v){return typeof v=="function"},u=function(v){return!o||!t?!1:(v instanceof(t.ReadStream||n)||v instanceof(t.WriteStream||n))&&s(v.close)},_=function(v){return v.setHeader&&s(v.abort)},O=function(v,F,q,P){P=r(P);var A=!1;v.on("close",function(){A=!0}),e(v,{readable:F,writable:q},function(c){if(c)return P(c);A=!0,P()});var f=!1;return function(c){if(!A&&!f){if(f=!0,u(v))return v.close(n);if(_(v))return v.abort();if(s(v.destroy))return v.destroy();P(c||new Error("stream was destroyed"))}}},T=function(v){v()},D=function(v,F){return v.pipe(F)},k=function(){var v=Array.prototype.slice.call(arguments),F=s(v[v.length-1]||n)&&v.pop()||n;if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new Error("pump requires two streams per minimum");var q,P=v.map(function(A,f){var c=f<v.length-1,S=f>0;return O(A,c,S,function(H){q||(q=H),H&&P.forEach(T),!c&&(P.forEach(T),F(q))})});return v.reduce(D)};return fn=k,fn}var Ss=vs();const Si=St(Ss);function rr(){}const Ei="SYN",cn="ACK",Ai="BRK";class Ri extends wr.Duplex{constructor(e){let{name:t,target:n,targetWindow:o=window,targetOrigin:s="*"}=e;if(super({objectMode:!0}),ge(this,"_init",void 0),ge(this,"_haveSyn",void 0),ge(this,"_name",void 0),ge(this,"_target",void 0),ge(this,"_targetWindow",void 0),ge(this,"_targetOrigin",void 0),ge(this,"_onMessage",void 0),ge(this,"_synIntervalId",void 0),!t||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=n,this._targetWindow=o,this._targetOrigin=s,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(Ai,null,rr),this._haveSyn=!1,this._init=!1}_handShake(){this._write(Ei,null,rr),this.cork()}_onData(e){if(!this._init)e===Ei?(this._haveSyn=!0,this._write(cn,null,rr)):e===cn&&(this._init=!0,this._haveSyn||this._write(cn,null,rr),this.uncork());else if(e===Ai)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;this._targetOrigin!=="*"&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,n){this._postMessage(e),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const Es={rpc:{internal:-32603}},Ti={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Ii=Es.rpc.internal,As="Unspecified error message. This is a bug, please report it.";function fo(r){return Number.isInteger(r)}function Oi(r){return typeof r=="string"&&r.length>0}function Ni(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function co(r){const e=r;return!(!e||!fo(e.code)||!Oi(e.message)||e.stack&&!Oi(e.stack))}function Rs(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:As;if(fo(r)){const t=r.toString();if(Object.hasOwn(Ti,t))return Ti[t].message}return e}const Ts={code:Ii,message:Rs(Ii)};function yn(r){try{JSON.parse(JSON.stringify(r,(e,t)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof t=="function"||typeof t=="symbol")throw new Error("Not valid json");return t}),(e,t)=>{if(!(e==="__proto__"||e==="constructor"))return t})}catch{return!1}return!0}function Ci(r){return Object.getOwnPropertyNames(r).reduce((e,t)=>{const n=r[t];return yn(n)&&(e[t]=n),e},{})}function Is(r){return Array.isArray(r)?r.map(e=>yn(e)?e:Ni(e)?Ci(e):null):Ni(r)?Ci(r):yn(r)?r:null}function Os(r,e){if(r&&typeof r=="object"&&"serialize"in r&&typeof r.serialize=="function")return r.serialize();if(co(r))return r;const t=Is(r);return $e($e({},e),{},{data:{cause:t}})}function Pi(r){let{fallbackError:e=Ts,shouldIncludeStack:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!co(e))throw new Error("Must provide fallback error with integer number code and string message.");const n=Os(r,e);return t||delete n.stack,n}function Li(r,e,t){try{Reflect.apply(r,e,t)}catch(n){setTimeout(()=>{throw n})}}function Ns(r){const e=r.length,t=new Array(e);for(let n=0;n<e;n+=1)t[n]=r[n];return t}class _r extends is.EventEmitter{emit(e){let t=e==="error";const n=this._events;if(n!==void 0)t=t&&n.error===void 0;else if(!t)return!1;for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];if(t){let O;if(s.length>0&&([O]=s),O instanceof Error)throw O;const T=new Error(`Unhandled error.${O?` (${O.message})`:""}`);throw T.context=O,T}const _=n[e];if(_===void 0)return!1;if(typeof _=="function")Li(_,this,s);else{const O=_.length,T=Ns(_);for(let D=0;D<O;D+=1)Li(T[D],this,s)}return!0}}class Lt extends Error{constructor(e){let{code:t,message:n,data:o}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),ge(this,"code",void 0),ge(this,"data",void 0),this.code=t,o!==void 0&&(this.data=o)}toString(){return hs({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const mn=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,o)=>{n||o.error?e(n||o.error):!t||Array.isArray(o)?r(o):r(o.result)}};function Cs(){const r={};function e(){return!1}const t=new _r;function n(O){const T=r[O.id];if(!T)throw new Error(`StreamMiddleware - Unknown response id "${O.id}"`);delete r[O.id],Object.assign(T.res,O),setTimeout(T.end)}function o(O){t.emit("notification",O)}function s(O,T,D){let k;try{!O.id?o(O):n(O)}catch(v){k=v}D(k)}const u=new wr.Duplex({objectMode:!0,read:e,write:s});return{events:t,middleware:(O,T,D,k)=>{u.push(O),r[O.id]={req:O,res:T,next:D,end:k}},stream:u}}function Ps(){return(r,e,t,n)=>{const o=r.id,s=Math.random().toString(36).slice(2);r.id=s,e.id=s,t(u=>{r.id=o,e.id=o,u()})}}class nt extends _r{constructor(){super(),ge(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,n){const o=[];let s=null,u=!1;for(const _ of n)if([s,u]=await nt._runMiddleware(e,t,_,o),u)break;return[s,u,o.reverse()]}static _runMiddleware(e,t,n,o){return new Promise(s=>{const u=O=>{const T=O||t.error;T&&(typeof T=="object"&&Object.keys(T).includes("stack")===!1&&(T.stack="Stack trace is not available."),t.error=Pi(T,{shouldIncludeStack:!0,fallbackError:{message:(T==null?void 0:T.message)||(T==null?void 0:T.toString()),code:(T==null?void 0:T.code)||-32603,stack:(T==null?void 0:T.stack)||"Stack trace is not available.",data:(T==null?void 0:T.data)||(T==null?void 0:T.message)||(T==null?void 0:T.toString())}})),s([T,!0])},_=O=>{t.error?u(t.error):(O&&(typeof O!="function"&&u(new Lt({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),o.push(O)),s([null,!1]))};try{n(e,t,_,u)}catch(O){u(O)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((n,o)=>{t(s=>s?o(s):n())})}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new Lt({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Lt({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,o)=>{try{const[s,u,_]=await nt._runAllMiddleware(e,t,this._middleware);return u?(await nt._runReturnHandlers(_),o(s)):n(async O=>{try{await nt._runReturnHandlers(_)}catch(T){return O(T)}return O()})}catch(s){return o(s)}}}async _handleBatch(e,t){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(e){return new Promise((t,n)=>{this._handle(e,(o,s)=>{o&&s===void 0?n(o):t(s)}).catch(n)})}async _handle(e,t){if(!e||Array.isArray(e)||typeof e!="object"){const F=new Lt({code:-32603,message:"request must be plain object"});return t(F,{id:void 0,jsonrpc:"2.0",error:F})}if(typeof e.method!="string"){const F=new Lt({code:-32603,message:"method must be string"});return t(F,{id:e.id,jsonrpc:"2.0",error:F})}const n=$e({},e),o={id:n.id,jsonrpc:n.jsonrpc};let s=null;try{await this._processRequest(n,o)}catch(F){s=F}if(s&&(delete o.result,!o.error)){var u,_,O,T,D,k,v;typeof s=="object"&&Object.keys(s).includes("stack")===!1&&(s.stack="Stack trace is not available."),o.error=Pi(s,{shouldIncludeStack:!0,fallbackError:{message:((u=s)===null||u===void 0?void 0:u.message)||((_=s)===null||_===void 0?void 0:_.toString()),code:((O=s)===null||O===void 0?void 0:O.code)||-32603,stack:((T=s)===null||T===void 0?void 0:T.stack)||"Stack trace is not available.",data:((D=s)===null||D===void 0?void 0:D.data)||((k=s)===null||k===void 0?void 0:k.message)||((v=s)===null||v===void 0?void 0:v.toString())}})}return t(s,o)}async _processRequest(e,t){const[n,o,s]=await nt._runAllMiddleware(e,t,this._middleware);if(nt._checkForCompletion(e,t,o),await nt._runReturnHandlers(s),n)throw n}}class Ls extends wr.Duplex{constructor(e){let{parent:t,name:n}=e;super({objectMode:!0}),ge(this,"_parent",void 0),ge(this,"_name",void 0),this._parent=t,this._name=n}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}const xi=Symbol("IGNORE_SUBSTREAM");class xs extends wr.Duplex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super($e($e({},e),{},{objectMode:!0})),ge(this,"_substreams",void 0),ge(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new Ls({parent:this,name:e});return this._substreams[e]=t,Ms(this,n=>t.destroy(n||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=xi}_read(){}_write(e,t,n){const{name:o,data:s}=e;if(!o)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();const u=this._substreams[o];return u?(u!==xi&&u.push(s),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),n())}}function Ms(r,e){const t=_s(e);mi(r,{readable:!1},t),mi(r,{writable:!1},t)}var Mt={exports:{}};Mt.exports;var Mi;function Ds(){return Mi||(Mi=1,function(r,e){var t={},n=200,o="__lodash_hash_undefined__",s=800,u=16,_=9007199254740991,O="[object Arguments]",T="[object Array]",D="[object AsyncFunction]",k="[object Boolean]",v="[object Date]",F="[object Error]",q="[object Function]",P="[object GeneratorFunction]",A="[object Map]",f="[object Number]",c="[object Null]",S="[object Object]",H="[object Proxy]",G="[object RegExp]",se="[object Set]",he="[object String]",i="[object Undefined]",g="[object WeakMap]",a="[object ArrayBuffer]",d="[object DataView]",h="[object Float32Array]",l="[object Float64Array]",I="[object Int8Array]",m="[object Int16Array]",R="[object Int32Array]",M="[object Uint8Array]",b="[object Uint8ClampedArray]",j="[object Uint16Array]",w="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,Y=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,X={};X[h]=X[l]=X[I]=X[m]=X[R]=X[M]=X[b]=X[j]=X[w]=!0,X[O]=X[T]=X[a]=X[k]=X[d]=X[v]=X[F]=X[q]=X[A]=X[f]=X[S]=X[G]=X[se]=X[he]=X[g]=!1;var ee=typeof t=="object"&&t&&t.Object===Object&&t,le=typeof self=="object"&&self&&self.Object===Object&&self,ae=ee||le||Function("return this")(),z=e&&!e.nodeType&&e,K=z&&!0&&r&&!r.nodeType&&r,oe=K&&K.exports===z,ue=oe&&ee.process,de=function(){try{var y=K&&K.require&&K.require("util").types;return y||ue&&ue.binding&&ue.binding("util")}catch{}}(),N=de&&de.isTypedArray;function L(y,x,$){switch($.length){case 0:return y.call(x);case 1:return y.call(x,$[0]);case 2:return y.call(x,$[0],$[1]);case 3:return y.call(x,$[0],$[1],$[2])}return y.apply(x,$)}function U(y,x){for(var $=-1,ce=Array(y);++$<y;)ce[$]=x($);return ce}function ne(y){return function(x){return y(x)}}function re(y,x){return y==null?void 0:y[x]}function te(y,x){return function($){return y(x($))}}var C=Array.prototype,J=Function.prototype,Z=Object.prototype,V=ae["__core-js_shared__"],we=J.toString,Re=Z.hasOwnProperty,be=function(){var y=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Ce=Z.toString,Oe=we.call(Object),ke=RegExp("^"+we.call(Re).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=oe?ae.Buffer:void 0,ct=ae.Symbol,Pe=ae.Uint8Array;je&&je.allocUnsafe;var qt=te(Object.getPrototypeOf,Object),Bt=Object.create,$t=Z.propertyIsEnumerable,vr=C.splice,Ye=ct?ct.toStringTag:void 0,mt=function(){try{var y=Ir(Object,"defineProperty");return y({},"",{}),y}catch{}}(),Ht=je?je.isBuffer:void 0,At=Math.max,Sr=Date.now,Rt=Ir(ae,"Map"),Xe=Ir(Object,"create"),Er=function(){function y(){}return function(x){if(!ht(x))return{};if(Bt)return Bt(x);y.prototype=x;var $=new y;return y.prototype=void 0,$}}();function Qe(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var ce=y[x];this.set(ce[0],ce[1])}}function Tt(){this.__data__=Xe?Xe(null):{},this.size=0}function zt(y){var x=this.has(y)&&delete this.__data__[y];return this.size-=x?1:0,x}function p(y){var x=this.__data__;if(Xe){var $=x[y];return $===o?void 0:$}return Re.call(x,y)?x[y]:void 0}function E(y){var x=this.__data__;return Xe?x[y]!==void 0:Re.call(x,y)}function ie(y,x){var $=this.__data__;return this.size+=this.has(y)?0:1,$[y]=Xe&&x===void 0?o:x,this}Qe.prototype.clear=Tt,Qe.prototype.delete=zt,Qe.prototype.get=p,Qe.prototype.has=E,Qe.prototype.set=ie;function Q(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var ce=y[x];this.set(ce[0],ce[1])}}function fe(){this.__data__=[],this.size=0}function Ne(y){var x=this.__data__,$=Jt(x,y);if($<0)return!1;var ce=x.length-1;return $==ce?x.pop():vr.call(x,$,1),--this.size,!0}function xe(y){var x=this.__data__,$=Jt(x,y);return $<0?void 0:x[$][1]}function Gt(y){return Jt(this.__data__,y)>-1}function Ze(y,x){var $=this.__data__,ce=Jt($,y);return ce<0?(++this.size,$.push([y,x])):$[ce][1]=x,this}Q.prototype.clear=fe,Q.prototype.delete=Ne,Q.prototype.get=xe,Q.prototype.has=Gt,Q.prototype.set=Ze;function et(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var ce=y[x];this.set(ce[0],ce[1])}}function Ar(){this.size=0,this.__data__={hash:new Qe,map:new(Rt||Q),string:new Qe}}function Kt(y){var x=Xt(this,y).delete(y);return this.size-=x?1:0,x}function Vt(y){return Xt(this,y).get(y)}function It(y){return Xt(this,y).has(y)}function Ot(y,x){var $=Xt(this,y),ce=$.size;return $.set(y,x),this.size+=$.size==ce?0:1,this}et.prototype.clear=Ar,et.prototype.delete=Kt,et.prototype.get=Vt,et.prototype.has=It,et.prototype.set=Ot;function Ve(y){var x=this.__data__=new Q(y);this.size=x.size}function dt(){this.__data__=new Q,this.size=0}function tt(y){var x=this.__data__,$=x.delete(y);return this.size=x.size,$}function He(y){return this.__data__.get(y)}function vo(y){return this.__data__.has(y)}function So(y,x){var $=this.__data__;if($ instanceof Q){var ce=$.__data__;if(!Rt||ce.length<n-1)return ce.push([y,x]),this.size=++$.size,this;$=this.__data__=new et(ce)}return $.set(y,x),this.size=$.size,this}Ve.prototype.clear=dt,Ve.prototype.delete=tt,Ve.prototype.get=He,Ve.prototype.has=vo,Ve.prototype.set=So;function Eo(y,x){var $=Cr(y),ce=!$&&Nr(y),_e=!$&&!ce&&Mn(y),me=!$&&!ce&&!_e&&kn(y),Ee=$||ce||_e||me,ye=Ee?U(y.length,String):[],Ae=ye.length;for(var ze in y)Ee&&(ze=="length"||_e&&(ze=="offset"||ze=="parent")||me&&(ze=="buffer"||ze=="byteLength"||ze=="byteOffset")||Ln(ze,Ae))||ye.push(ze);return ye}function Rr(y,x,$){($!==void 0&&!Qt(y[x],$)||$===void 0&&!(x in y))&&Tr(y,x,$)}function Ao(y,x,$){var ce=y[x];(!(Re.call(y,x)&&Qt(ce,$))||$===void 0&&!(x in y))&&Tr(y,x,$)}function Jt(y,x){for(var $=y.length;$--;)if(Qt(y[$][0],x))return $;return-1}function Tr(y,x,$){x=="__proto__"&&mt?mt(y,x,{configurable:!0,enumerable:!0,value:$,writable:!0}):y[x]=$}var Ro=Wo();function Yt(y){return y==null?y===void 0?i:c:Ye&&Ye in Object(y)?Fo(y):zo(y)}function Cn(y){return Nt(y)&&Yt(y)==O}function To(y){if(!ht(y)||$o(y))return!1;var x=Lr(y)?ke:Y;return x.test(Jo(y))}function Io(y){return Nt(y)&&Dn(y.length)&&!!X[Yt(y)]}function Oo(y){if(!ht(y))return Ho(y);var x=xn(y),$=[];for(var ce in y)ce=="constructor"&&(x||!Re.call(y,ce))||$.push(ce);return $}function Pn(y,x,$,ce,_e){y!==x&&Ro(x,function(me,Ee){if(_e||(_e=new Ve),ht(me))No(y,x,Ee,$,Pn,ce,_e);else{var ye=ce?ce(Or(y,Ee),me,Ee+"",y,x,_e):void 0;ye===void 0&&(ye=me),Rr(y,Ee,ye)}},jn)}function No(y,x,$,ce,_e,me,Ee){var ye=Or(y,$),Ae=Or(x,$),ze=Ee.get(Ae);if(ze){Rr(y,$,ze);return}var We=me?me(ye,Ae,$+"",y,x,Ee):void 0,Ct=We===void 0;if(Ct){var xr=Cr(Ae),Mr=!xr&&Mn(Ae),Fn=!xr&&!Mr&&kn(Ae);We=Ae,xr||Mr||Fn?Cr(ye)?We=ye:Yo(ye)?We=Do(ye):Mr?(Ct=!1,We=Lo(Ae)):Fn?(Ct=!1,We=Mo(Ae)):We=[]:Xo(Ae)||Nr(Ae)?(We=ye,Nr(ye)?We=Qo(ye):(!ht(ye)||Lr(ye))&&(We=Uo(Ae))):Ct=!1}Ct&&(Ee.set(Ae,We),_e(We,Ae,ce,me,Ee),Ee.delete(Ae)),Rr(y,$,We)}function Co(y,x){return Ko(Go(y,x,Wn),y+"")}var Po=mt?function(y,x){return mt(y,"toString",{configurable:!0,enumerable:!1,value:es(x),writable:!0})}:Wn;function Lo(y,x){return y.slice()}function xo(y){var x=new y.constructor(y.byteLength);return new Pe(x).set(new Pe(y)),x}function Mo(y,x){var $=xo(y.buffer);return new y.constructor($,y.byteOffset,y.length)}function Do(y,x){var $=-1,ce=y.length;for(x||(x=Array(ce));++$<ce;)x[$]=y[$];return x}function ko(y,x,$,ce){var _e=!$;$||($={});for(var me=-1,Ee=x.length;++me<Ee;){var ye=x[me],Ae=void 0;Ae===void 0&&(Ae=y[ye]),_e?Tr($,ye,Ae):Ao($,ye,Ae)}return $}function jo(y){return Co(function(x,$){var ce=-1,_e=$.length,me=_e>1?$[_e-1]:void 0,Ee=_e>2?$[2]:void 0;for(me=y.length>3&&typeof me=="function"?(_e--,me):void 0,Ee&&qo($[0],$[1],Ee)&&(me=_e<3?void 0:me,_e=1),x=Object(x);++ce<_e;){var ye=$[ce];ye&&y(x,ye,ce,me)}return x})}function Wo(y){return function(x,$,ce){for(var _e=-1,me=Object(x),Ee=ce(x),ye=Ee.length;ye--;){var Ae=Ee[++_e];if($(me[Ae],Ae,me)===!1)break}return x}}function Xt(y,x){var $=y.__data__;return Bo(x)?$[typeof x=="string"?"string":"hash"]:$.map}function Ir(y,x){var $=re(y,x);return To($)?$:void 0}function Fo(y){var x=Re.call(y,Ye),$=y[Ye];try{y[Ye]=void 0;var ce=!0}catch{}var _e=Ce.call(y);return ce&&(x?y[Ye]=$:delete y[Ye]),_e}function Uo(y){return typeof y.constructor=="function"&&!xn(y)?Er(qt(y)):{}}function Ln(y,x){var $=typeof y;return x=x??_,!!x&&($=="number"||$!="symbol"&&B.test(y))&&y>-1&&y%1==0&&y<x}function qo(y,x,$){if(!ht($))return!1;var ce=typeof x;return(ce=="number"?Pr($)&&Ln(x,$.length):ce=="string"&&x in $)?Qt($[x],y):!1}function Bo(y){var x=typeof y;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?y!=="__proto__":y===null}function $o(y){return!!be&&be in y}function xn(y){var x=y&&y.constructor,$=typeof x=="function"&&x.prototype||Z;return y===$}function Ho(y){var x=[];if(y!=null)for(var $ in Object(y))x.push($);return x}function zo(y){return Ce.call(y)}function Go(y,x,$){return x=At(x===void 0?y.length-1:x,0),function(){for(var ce=arguments,_e=-1,me=At(ce.length-x,0),Ee=Array(me);++_e<me;)Ee[_e]=ce[x+_e];_e=-1;for(var ye=Array(x+1);++_e<x;)ye[_e]=ce[_e];return ye[x]=$(Ee),L(y,this,ye)}}function Or(y,x){if(!(x==="constructor"&&typeof y[x]=="function")&&x!="__proto__")return y[x]}var Ko=Vo(Po);function Vo(y){var x=0,$=0;return function(){var ce=Sr(),_e=u-(ce-$);if($=ce,_e>0){if(++x>=s)return arguments[0]}else x=0;return y.apply(void 0,arguments)}}function Jo(y){if(y!=null){try{return we.call(y)}catch{}try{return y+""}catch{}}return""}function Qt(y,x){return y===x||y!==y&&x!==x}var Nr=Cn(function(){return arguments}())?Cn:function(y){return Nt(y)&&Re.call(y,"callee")&&!$t.call(y,"callee")},Cr=Array.isArray;function Pr(y){return y!=null&&Dn(y.length)&&!Lr(y)}function Yo(y){return Nt(y)&&Pr(y)}var Mn=Ht||ts;function Lr(y){if(!ht(y))return!1;var x=Yt(y);return x==q||x==P||x==D||x==H}function Dn(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=_}function ht(y){var x=typeof y;return y!=null&&(x=="object"||x=="function")}function Nt(y){return y!=null&&typeof y=="object"}function Xo(y){if(!Nt(y)||Yt(y)!=S)return!1;var x=qt(y);if(x===null)return!0;var $=Re.call(x,"constructor")&&x.constructor;return typeof $=="function"&&$ instanceof $&&we.call($)==Oe}var kn=N?ne(N):Io;function Qo(y){return ko(y,jn(y))}function jn(y){return Pr(y)?Eo(y):Oo(y)}var Zo=jo(function(y,x,$){Pn(y,x,$)});function es(y){return function(){return y}}function Wn(y){return y}function ts(){return!1}r.exports=Zo}(Mt,Mt.exports)),Mt.exports}Ds();var fr={exports:{}},ks=fr.exports,Di;function js(){return Di||(Di=1,function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(ks,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],s={},u=null;function _(P,A){var f=P[A];if(typeof f.bind=="function")return f.bind(P);try{return Function.prototype.bind.call(f,P)}catch{return function(){return Function.prototype.apply.apply(f,[P,arguments])}}}function O(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function T(P){return P==="debug"&&(P="log"),typeof console===t?!1:P==="trace"&&n?O:console[P]!==void 0?_(console,P):console.log!==void 0?_(console,"log"):e}function D(){for(var P=this.getLevel(),A=0;A<o.length;A++){var f=o[A];this[f]=A<P?e:this.methodFactory(f,P,this.name)}if(this.log=this.debug,typeof console===t&&P<this.levels.SILENT)return"No console available for logging"}function k(P){return function(){typeof console!==t&&(D.call(this),this[P].apply(this,arguments))}}function v(P,A,f){return T(P)||k.apply(this,arguments)}function F(P,A){var f=this,c,S,H,G="loglevel";typeof P=="string"?G+=":"+P:typeof P=="symbol"&&(G=void 0);function se(d){var h=(o[d]||"silent").toUpperCase();if(!(typeof window===t||!G)){try{window.localStorage[G]=h;return}catch{}try{window.document.cookie=encodeURIComponent(G)+"="+h+";"}catch{}}}function he(){var d;if(!(typeof window===t||!G)){try{d=window.localStorage[G]}catch{}if(typeof d===t)try{var h=window.document.cookie,l=encodeURIComponent(G),I=h.indexOf(l+"=");I!==-1&&(d=/^([^;]+)/.exec(h.slice(I+l.length+1))[1])}catch{}return f.levels[d]===void 0&&(d=void 0),d}}function i(){if(!(typeof window===t||!G)){try{window.localStorage.removeItem(G)}catch{}try{window.document.cookie=encodeURIComponent(G)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function g(d){var h=d;if(typeof h=="string"&&f.levels[h.toUpperCase()]!==void 0&&(h=f.levels[h.toUpperCase()]),typeof h=="number"&&h>=0&&h<=f.levels.SILENT)return h;throw new TypeError("log.setLevel() called with invalid level: "+d)}f.name=P,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=A||v,f.getLevel=function(){return H??S??c},f.setLevel=function(d,h){return H=g(d),h!==!1&&se(H),D.call(f)},f.setDefaultLevel=function(d){S=g(d),he()||f.setLevel(d,!1)},f.resetLevel=function(){H=null,i(),D.call(f)},f.enableAll=function(d){f.setLevel(f.levels.TRACE,d)},f.disableAll=function(d){f.setLevel(f.levels.SILENT,d)},f.rebuild=function(){if(u!==f&&(c=g(u.getLevel())),D.call(f),u===f)for(var d in s)s[d].rebuild()},c=g(u?u.getLevel():"WARN");var a=he();a!=null&&(H=g(a)),D.call(f)}u=new F,u.getLogger=function(A){if(typeof A!="symbol"&&typeof A!="string"||A==="")throw new TypeError("You must supply a name when creating a logger.");var f=s[A];return f||(f=s[A]=new F(A,u.methodFactory)),f};var q=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=q),u},u.getLoggers=function(){return s},u.default=u,u})}(fr)),fr.exports}var ho=js();const cr=St(ho),Ws=cr.getLogger("http-helpers");Ws.setLevel(ho.levels.INFO);function Fs(r){let e=r;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const vn={},Sn={};for(let r=0;r<16;r++){const e=r,t=r*16,n=r.toString(16).toLowerCase();Sn[n]=e,Sn[n.toUpperCase()]=e,vn[n]=t,vn[n.toUpperCase()]=t}function Us(r){const e=r.length,t=new Uint8Array(e/2);for(let n=0;n<e;n+=2)t[n/2]=vn[r[n]]+Sn[r[n+1]];return t}Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));for(let r=0;r<=256*256-1;r++)BigInt(r);const br=r=>{if(typeof r!="string")throw new Error(`hex argument type ${typeof r} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(r))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${r}`);const e=r.slice(2);return Us(e.length%2===0?e:Fs(e))},qs=r=>{if(!Number.isSafeInteger(r)||r<0)throw new Error(`Received an invalid integer type: ${r}`);return`0x${r.toString(16)}`},Ut=r=>{const e=qs(r);return br(e)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");Zi.CURVE.n;Zi.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Bs="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";br(Bs);const $s="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";br($s);const Hs="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";br(Hs);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));var ki;(function(r){r.String="string",r.Bytes="view",r.Number="number"})(ki||(ki={}));var ji;(function(r){r.String="string",r.Bytes="view",r.JSON="json"})(ji||(ji={}));var Wi;(function(r){r[r.Number=0]="Number",r[r.BigInt=1]="BigInt",r[r.Uint8Array=2]="Uint8Array",r[r.PrefixedHexString=3]="PrefixedHexString"})(Wi||(Wi={}));var Fi;(function(r){r[r.Deposit=0]="Deposit",r[r.Withdrawal=1]="Withdrawal",r[r.Consolidation=2]="Consolidation"})(Fi||(Fi={}));var _t;(function(r){r[r.Version=0]="Version",r[r.Balance=1]="Balance",r[r.Nonce=2]="Nonce",r[r.CodeHash=3]="CodeHash",r[r.CodeSize=4]="CodeSize"})(_t||(_t={}));Ut(_t.Version);Ut(_t.Balance);Ut(_t.Nonce);Ut(_t.CodeHash);Ut(_t.CodeSize);BigInt(256)**BigInt(31);var dn={exports:{}},nr={},ir={},Ui;function zs(){if(Ui)return ir;Ui=1,Object.defineProperty(ir,"__esModule",{value:!0});function r(e){var t=4,n=e.length,o=n%t;if(!o)return e;var s=n,u=t-o,_=n+u,O=Ke.alloc(_);for(O.write(e);u--;)O.write("=",s++);return O.toString()}return ir.default=r,ir}var qi;function Gs(){if(qi)return nr;qi=1,Object.defineProperty(nr,"__esModule",{value:!0});var r=zs();function e(_,O){return O===void 0&&(O="utf8"),Ke.isBuffer(_)?o(_.toString("base64")):o(Ke.from(_,O).toString("base64"))}function t(_,O){return O===void 0&&(O="utf8"),Ke.from(n(_),"base64").toString(O)}function n(_){return _=_.toString(),r.default(_).replace(/\-/g,"+").replace(/_/g,"/")}function o(_){return _.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(_){return Ke.from(n(_),"base64")}var u=e;return u.encode=e,u.decode=t,u.toBase64=n,u.fromBase64=o,u.toBuffer=s,nr.default=u,nr}var Bi;function Ks(){return Bi||(Bi=1,function(r){r.exports=Gs().default,r.exports.default=r.exports}(dn)),dn.exports}Ks();const Se={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},lt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";Se.AQUA+"",lt.SAPPHIRE_MAINNET,Se.CELESTE+"",lt.SAPPHIRE_MAINNET,Se.CYAN+"",lt.SAPPHIRE_MAINNET,Se.MAINNET+"",lt.SAPPHIRE_MAINNET,Se.TESTNET+"",lt.SAPPHIRE_DEVNET;Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";lt.SAPPHIRE_MAINNET+"",lt.SAPPHIRE_DEVNET+"",Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";function $i(r){let e=!1,t=0,n;try{n=window[r],e=!0,t=n.length;const o="__storage_test__";return n.setItem(o,o),n.removeItem(o),!0}catch(o){const s=o;return s&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&t!==0}}class Vs{constructor(){ge(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class Js{constructor(e,t){ge(this,"storage",void 0),ge(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(e)){let n;t==="local"&&$i("localStorage")?n=window.localStorage:t==="session"&&$i("sessionStorage")?n=window.sessionStorage:n=new Vs,this.instanceMap.set(e,new this(e,n))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(n))}}ge(Js,"instanceMap",new Map);$e($e({},lt),Se);var Ys=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,hn=Math.ceil,qe=Math.floor,Me="[BigNumber Error] ",Hi=Me+"Number primitive has more than 15 significant digits: ",Ge=1e14,pe=14,zi=9007199254740991,gn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],at=1e7,Fe=1e9;function go(r){var e,t,n,o=c.prototype={constructor:c,toString:null,valueOf:null},s=new c(1),u=20,_=4,O=-7,T=21,D=-1e7,k=1e7,v=!1,F=1,q=0,P={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",f=!0;function c(i,g){var a,d,h,l,I,m,R,M,b=this;if(!(b instanceof c))return new c(i,g);if(g==null){if(i&&i._isBigNumber===!0){b.s=i.s,!i.c||i.e>k?b.c=b.e=null:i.e<D?b.c=[b.e=0]:(b.e=i.e,b.c=i.c.slice());return}if((m=typeof i=="number")&&i*0==0){if(b.s=1/i<0?(i=-i,-1):1,i===~~i){for(l=0,I=i;I>=10;I/=10,l++);l>k?b.c=b.e=null:(b.e=l,b.c=[i]);return}M=String(i)}else{if(!Ys.test(M=String(i)))return n(b,M,m);b.s=M.charCodeAt(0)==45?(M=M.slice(1),-1):1}(l=M.indexOf("."))>-1&&(M=M.replace(".","")),(I=M.search(/e/i))>0?(l<0&&(l=I),l+=+M.slice(I+1),M=M.substring(0,I)):l<0&&(l=M.length)}else{if(Te(g,2,A.length,"Base"),g==10&&f)return b=new c(i),se(b,u+b.e+1,_);if(M=String(i),m=typeof i=="number"){if(i*0!=0)return n(b,M,m,g);if(b.s=1/i<0?(M=M.slice(1),-1):1,c.DEBUG&&M.replace(/^0\.0*|\./,"").length>15)throw Error(Hi+i)}else b.s=M.charCodeAt(0)===45?(M=M.slice(1),-1):1;for(a=A.slice(0,g),l=I=0,R=M.length;I<R;I++)if(a.indexOf(d=M.charAt(I))<0){if(d=="."){if(I>l){l=R;continue}}else if(!h&&(M==M.toUpperCase()&&(M=M.toLowerCase())||M==M.toLowerCase()&&(M=M.toUpperCase()))){h=!0,I=-1,l=0;continue}return n(b,String(i),m,g)}m=!1,M=t(M,g,10,b.s),(l=M.indexOf("."))>-1?M=M.replace(".",""):l=M.length}for(I=0;M.charCodeAt(I)===48;I++);for(R=M.length;M.charCodeAt(--R)===48;);if(M=M.slice(I,++R)){if(R-=I,m&&c.DEBUG&&R>15&&(i>zi||i!==qe(i)))throw Error(Hi+b.s*i);if((l=l-I-1)>k)b.c=b.e=null;else if(l<D)b.c=[b.e=0];else{if(b.e=l,b.c=[],I=(l+1)%pe,l<0&&(I+=pe),I<R){for(I&&b.c.push(+M.slice(0,I)),R-=pe;I<R;)b.c.push(+M.slice(I,I+=pe));I=pe-(M=M.slice(I)).length}else I-=R;for(;I--;M+="0");b.c.push(+M)}}else b.c=[b.e=0]}c.clone=go,c.ROUND_UP=0,c.ROUND_DOWN=1,c.ROUND_CEIL=2,c.ROUND_FLOOR=3,c.ROUND_HALF_UP=4,c.ROUND_HALF_DOWN=5,c.ROUND_HALF_EVEN=6,c.ROUND_HALF_CEIL=7,c.ROUND_HALF_FLOOR=8,c.EUCLID=9,c.config=c.set=function(i){var g,a;if(i!=null)if(typeof i=="object"){if(i.hasOwnProperty(g="DECIMAL_PLACES")&&(a=i[g],Te(a,0,Fe,g),u=a),i.hasOwnProperty(g="ROUNDING_MODE")&&(a=i[g],Te(a,0,8,g),_=a),i.hasOwnProperty(g="EXPONENTIAL_AT")&&(a=i[g],a&&a.pop?(Te(a[0],-1e9,0,g),Te(a[1],0,Fe,g),O=a[0],T=a[1]):(Te(a,-1e9,Fe,g),O=-(T=a<0?-a:a))),i.hasOwnProperty(g="RANGE"))if(a=i[g],a&&a.pop)Te(a[0],-1e9,-1,g),Te(a[1],1,Fe,g),D=a[0],k=a[1];else if(Te(a,-1e9,Fe,g),a)D=-(k=a<0?-a:a);else throw Error(Me+g+" cannot be zero: "+a);if(i.hasOwnProperty(g="CRYPTO"))if(a=i[g],a===!!a)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=a;else throw v=!a,Error(Me+"crypto unavailable");else v=a;else throw Error(Me+g+" not true or false: "+a);if(i.hasOwnProperty(g="MODULO_MODE")&&(a=i[g],Te(a,0,9,g),F=a),i.hasOwnProperty(g="POW_PRECISION")&&(a=i[g],Te(a,0,Fe,g),q=a),i.hasOwnProperty(g="FORMAT"))if(a=i[g],typeof a=="object")P=a;else throw Error(Me+g+" not an object: "+a);if(i.hasOwnProperty(g="ALPHABET"))if(a=i[g],typeof a=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(a))f=a.slice(0,10)=="0123456789",A=a;else throw Error(Me+g+" invalid: "+a)}else throw Error(Me+"Object expected: "+i);return{DECIMAL_PLACES:u,ROUNDING_MODE:_,EXPONENTIAL_AT:[O,T],RANGE:[D,k],CRYPTO:v,MODULO_MODE:F,POW_PRECISION:q,FORMAT:P,ALPHABET:A}},c.isBigNumber=function(i){if(!i||i._isBigNumber!==!0)return!1;if(!c.DEBUG)return!0;var g,a,d=i.c,h=i.e,l=i.s;e:if({}.toString.call(d)=="[object Array]"){if((l===1||l===-1)&&h>=-1e9&&h<=Fe&&h===qe(h)){if(d[0]===0){if(h===0&&d.length===1)return!0;break e}if(g=(h+1)%pe,g<1&&(g+=pe),String(d[0]).length==g){for(g=0;g<d.length;g++)if(a=d[g],a<0||a>=Ge||a!==qe(a))break e;if(a!==0)return!0}}}else if(d===null&&h===null&&(l===null||l===1||l===-1))return!0;throw Error(Me+"Invalid BigNumber: "+i)},c.maximum=c.max=function(){return H(arguments,-1)},c.minimum=c.min=function(){return H(arguments,1)},c.random=function(){var i=9007199254740992,g=Math.random()*i&2097151?function(){return qe(Math.random()*i)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(a){var d,h,l,I,m,R=0,M=[],b=new c(s);if(a==null?a=u:Te(a,0,Fe),I=hn(a/pe),v)if(crypto.getRandomValues){for(d=crypto.getRandomValues(new Uint32Array(I*=2));R<I;)m=d[R]*131072+(d[R+1]>>>11),m>=9e15?(h=crypto.getRandomValues(new Uint32Array(2)),d[R]=h[0],d[R+1]=h[1]):(M.push(m%1e14),R+=2);R=I/2}else if(crypto.randomBytes){for(d=crypto.randomBytes(I*=7);R<I;)m=(d[R]&31)*281474976710656+d[R+1]*1099511627776+d[R+2]*4294967296+d[R+3]*16777216+(d[R+4]<<16)+(d[R+5]<<8)+d[R+6],m>=9e15?crypto.randomBytes(7).copy(d,R):(M.push(m%1e14),R+=7);R=I/7}else throw v=!1,Error(Me+"crypto unavailable");if(!v)for(;R<I;)m=g(),m<9e15&&(M[R++]=m%1e14);for(I=M[--R],a%=pe,I&&a&&(m=gn[pe-a],M[R]=qe(I/m)*m);M[R]===0;M.pop(),R--);if(R<0)M=[l=0];else{for(l=-1;M[0]===0;M.splice(0,1),l-=pe);for(R=1,m=M[0];m>=10;m/=10,R++);R<pe&&(l-=pe-R)}return b.e=l,b.c=M,b}}(),c.sum=function(){for(var i=1,g=arguments,a=new c(g[0]);i<g.length;)a=a.plus(g[i++]);return a},t=function(){var i="0123456789";function g(a,d,h,l){for(var I,m=[0],R,M=0,b=a.length;M<b;){for(R=m.length;R--;m[R]*=d);for(m[0]+=l.indexOf(a.charAt(M++)),I=0;I<m.length;I++)m[I]>h-1&&(m[I+1]==null&&(m[I+1]=0),m[I+1]+=m[I]/h|0,m[I]%=h)}return m.reverse()}return function(a,d,h,l,I){var m,R,M,b,j,w,W,Y,B=a.indexOf("."),X=u,ee=_;for(B>=0&&(b=q,q=0,a=a.replace(".",""),Y=new c(d),w=Y.pow(a.length-B),q=b,Y.c=g(rt(Ue(w.c),w.e,"0"),10,h,i),Y.e=Y.c.length),W=g(a,d,h,I?(m=A,i):(m=i,A)),M=b=W.length;W[--b]==0;W.pop());if(!W[0])return m.charAt(0);if(B<0?--M:(w.c=W,w.e=M,w.s=l,w=e(w,Y,X,ee,h),W=w.c,j=w.r,M=w.e),R=M+X+1,B=W[R],b=h/2,j=j||R<0||W[R+1]!=null,j=ee<4?(B!=null||j)&&(ee==0||ee==(w.s<0?3:2)):B>b||B==b&&(ee==4||j||ee==6&&W[R-1]&1||ee==(w.s<0?8:7)),R<1||!W[0])a=j?rt(m.charAt(1),-X,m.charAt(0)):m.charAt(0);else{if(W.length=R,j)for(--h;++W[--R]>h;)W[R]=0,R||(++M,W=[1].concat(W));for(b=W.length;!W[--b];);for(B=0,a="";B<=b;a+=m.charAt(W[B++]));a=rt(a,M,m.charAt(0))}return a}}(),e=function(){function i(d,h,l){var I,m,R,M,b=0,j=d.length,w=h%at,W=h/at|0;for(d=d.slice();j--;)R=d[j]%at,M=d[j]/at|0,I=W*R+M*w,m=w*R+I%at*at+b,b=(m/l|0)+(I/at|0)+W*M,d[j]=m%l;return b&&(d=[b].concat(d)),d}function g(d,h,l,I){var m,R;if(l!=I)R=l>I?1:-1;else for(m=R=0;m<l;m++)if(d[m]!=h[m]){R=d[m]>h[m]?1:-1;break}return R}function a(d,h,l,I){for(var m=0;l--;)d[l]-=m,m=d[l]<h[l]?1:0,d[l]=m*I+d[l]-h[l];for(;!d[0]&&d.length>1;d.splice(0,1));}return function(d,h,l,I,m){var R,M,b,j,w,W,Y,B,X,ee,le,ae,z,K,oe,ue,de,N=d.s==h.s?1:-1,L=d.c,U=h.c;if(!L||!L[0]||!U||!U[0])return new c(!d.s||!h.s||(L?U&&L[0]==U[0]:!U)?NaN:L&&L[0]==0||!U?N*0:N/0);for(B=new c(N),X=B.c=[],M=d.e-h.e,N=l+M+1,m||(m=Ge,M=Be(d.e/pe)-Be(h.e/pe),N=N/pe|0),b=0;U[b]==(L[b]||0);b++);if(U[b]>(L[b]||0)&&M--,N<0)X.push(1),j=!0;else{for(K=L.length,ue=U.length,b=0,N+=2,w=qe(m/(U[0]+1)),w>1&&(U=i(U,w,m),L=i(L,w,m),ue=U.length,K=L.length),z=ue,ee=L.slice(0,ue),le=ee.length;le<ue;ee[le++]=0);de=U.slice(),de=[0].concat(de),oe=U[0],U[1]>=m/2&&oe++;do{if(w=0,R=g(U,ee,ue,le),R<0){if(ae=ee[0],ue!=le&&(ae=ae*m+(ee[1]||0)),w=qe(ae/oe),w>1)for(w>=m&&(w=m-1),W=i(U,w,m),Y=W.length,le=ee.length;g(W,ee,Y,le)==1;)w--,a(W,ue<Y?de:U,Y,m),Y=W.length,R=1;else w==0&&(R=w=1),W=U.slice(),Y=W.length;if(Y<le&&(W=[0].concat(W)),a(ee,W,le,m),le=ee.length,R==-1)for(;g(U,ee,ue,le)<1;)w++,a(ee,ue<le?de:U,le,m),le=ee.length}else R===0&&(w++,ee=[0]);X[b++]=w,ee[0]?ee[le++]=L[z]||0:(ee=[L[z]],le=1)}while((z++<K||ee[0]!=null)&&N--);j=ee[0]!=null,X[0]||X.splice(0,1)}if(m==Ge){for(b=1,N=X[0];N>=10;N/=10,b++);se(B,l+(B.e=b+M*pe-1)+1,I,j)}else B.e=M,B.r=+j;return B}}();function S(i,g,a,d){var h,l,I,m,R;if(a==null?a=_:Te(a,0,8),!i.c)return i.toString();if(h=i.c[0],I=i.e,g==null)R=Ue(i.c),R=d==1||d==2&&(I<=O||I>=T)?sr(R,I):rt(R,I,"0");else if(i=se(new c(i),g,a),l=i.e,R=Ue(i.c),m=R.length,d==1||d==2&&(g<=l||l<=O)){for(;m<g;R+="0",m++);R=sr(R,l)}else if(g-=I,R=rt(R,l,"0"),l+1>m){if(--g>0)for(R+=".";g--;R+="0");}else if(g+=l-m,g>0)for(l+1==m&&(R+=".");g--;R+="0");return i.s<0&&h?"-"+R:R}function H(i,g){for(var a,d,h=1,l=new c(i[0]);h<i.length;h++)d=new c(i[h]),(!d.s||(a=gt(l,d))===g||a===0&&l.s===g)&&(l=d);return l}function G(i,g,a){for(var d=1,h=g.length;!g[--h];g.pop());for(h=g[0];h>=10;h/=10,d++);return(a=d+a*pe-1)>k?i.c=i.e=null:a<D?i.c=[i.e=0]:(i.e=a,i.c=g),i}n=function(){var i=/^(-?)0([xbo])(?=\w[\w.]*$)/i,g=/^([^.]+)\.$/,a=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(l,I,m,R){var M,b=m?I:I.replace(h,"");if(d.test(b))l.s=isNaN(b)?null:b<0?-1:1;else{if(!m&&(b=b.replace(i,function(j,w,W){return M=(W=W.toLowerCase())=="x"?16:W=="b"?2:8,!R||R==M?w:j}),R&&(M=R,b=b.replace(g,"$1").replace(a,"0.$1")),I!=b))return new c(b,M);if(c.DEBUG)throw Error(Me+"Not a"+(R?" base "+R:"")+" number: "+I);l.s=null}l.c=l.e=null}}();function se(i,g,a,d){var h,l,I,m,R,M,b,j=i.c,w=gn;if(j){e:{for(h=1,m=j[0];m>=10;m/=10,h++);if(l=g-h,l<0)l+=pe,I=g,R=j[M=0],b=qe(R/w[h-I-1]%10);else if(M=hn((l+1)/pe),M>=j.length)if(d){for(;j.length<=M;j.push(0));R=b=0,h=1,l%=pe,I=l-pe+1}else break e;else{for(R=m=j[M],h=1;m>=10;m/=10,h++);l%=pe,I=l-pe+h,b=I<0?0:qe(R/w[h-I-1]%10)}if(d=d||g<0||j[M+1]!=null||(I<0?R:R%w[h-I-1]),d=a<4?(b||d)&&(a==0||a==(i.s<0?3:2)):b>5||b==5&&(a==4||d||a==6&&(l>0?I>0?R/w[h-I]:0:j[M-1])%10&1||a==(i.s<0?8:7)),g<1||!j[0])return j.length=0,d?(g-=i.e+1,j[0]=w[(pe-g%pe)%pe],i.e=-g||0):j[0]=i.e=0,i;if(l==0?(j.length=M,m=1,M--):(j.length=M+1,m=w[pe-l],j[M]=I>0?qe(R/w[h-I]%w[I])*m:0),d)for(;;)if(M==0){for(l=1,I=j[0];I>=10;I/=10,l++);for(I=j[0]+=m,m=1;I>=10;I/=10,m++);l!=m&&(i.e++,j[0]==Ge&&(j[0]=1));break}else{if(j[M]+=m,j[M]!=Ge)break;j[M--]=0,m=1}for(l=j.length;j[--l]===0;j.pop());}i.e>k?i.c=i.e=null:i.e<D&&(i.c=[i.e=0])}return i}function he(i){var g,a=i.e;return a===null?i.toString():(g=Ue(i.c),g=a<=O||a>=T?sr(g,a):rt(g,a,"0"),i.s<0?"-"+g:g)}return o.absoluteValue=o.abs=function(){var i=new c(this);return i.s<0&&(i.s=1),i},o.comparedTo=function(i,g){return gt(this,new c(i,g))},o.decimalPlaces=o.dp=function(i,g){var a,d,h,l=this;if(i!=null)return Te(i,0,Fe),g==null?g=_:Te(g,0,8),se(new c(l),i+l.e+1,g);if(!(a=l.c))return null;if(d=((h=a.length-1)-Be(this.e/pe))*pe,h=a[h])for(;h%10==0;h/=10,d--);return d<0&&(d=0),d},o.dividedBy=o.div=function(i,g){return e(this,new c(i,g),u,_)},o.dividedToIntegerBy=o.idiv=function(i,g){return e(this,new c(i,g),0,1)},o.exponentiatedBy=o.pow=function(i,g){var a,d,h,l,I,m,R,M,b,j=this;if(i=new c(i),i.c&&!i.isInteger())throw Error(Me+"Exponent not an integer: "+he(i));if(g!=null&&(g=new c(g)),m=i.e>14,!j.c||!j.c[0]||j.c[0]==1&&!j.e&&j.c.length==1||!i.c||!i.c[0])return b=new c(Math.pow(+he(j),m?i.s*(2-or(i)):+he(i))),g?b.mod(g):b;if(R=i.s<0,g){if(g.c?!g.c[0]:!g.s)return new c(NaN);d=!R&&j.isInteger()&&g.isInteger(),d&&(j=j.mod(g))}else{if(i.e>9&&(j.e>0||j.e<-1||(j.e==0?j.c[0]>1||m&&j.c[1]>=24e7:j.c[0]<8e13||m&&j.c[0]<=9999975e7)))return l=j.s<0&&or(i)?-0:0,j.e>-1&&(l=1/l),new c(R?1/l:l);q&&(l=hn(q/pe+2))}for(m?(a=new c(.5),R&&(i.s=1),M=or(i)):(h=Math.abs(+he(i)),M=h%2),b=new c(s);;){if(M){if(b=b.times(j),!b.c)break;l?b.c.length>l&&(b.c.length=l):d&&(b=b.mod(g))}if(h){if(h=qe(h/2),h===0)break;M=h%2}else if(i=i.times(a),se(i,i.e+1,1),i.e>14)M=or(i);else{if(h=+he(i),h===0)break;M=h%2}j=j.times(j),l?j.c&&j.c.length>l&&(j.c.length=l):d&&(j=j.mod(g))}return d?b:(R&&(b=s.div(b)),g?b.mod(g):l?se(b,q,_,I):b)},o.integerValue=function(i){var g=new c(this);return i==null?i=_:Te(i,0,8),se(g,g.e+1,i)},o.isEqualTo=o.eq=function(i,g){return gt(this,new c(i,g))===0},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(i,g){return gt(this,new c(i,g))>0},o.isGreaterThanOrEqualTo=o.gte=function(i,g){return(g=gt(this,new c(i,g)))===1||g===0},o.isInteger=function(){return!!this.c&&Be(this.e/pe)>this.c.length-2},o.isLessThan=o.lt=function(i,g){return gt(this,new c(i,g))<0},o.isLessThanOrEqualTo=o.lte=function(i,g){return(g=gt(this,new c(i,g)))===-1||g===0},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&this.c[0]==0},o.minus=function(i,g){var a,d,h,l,I=this,m=I.s;if(i=new c(i,g),g=i.s,!m||!g)return new c(NaN);if(m!=g)return i.s=-g,I.plus(i);var R=I.e/pe,M=i.e/pe,b=I.c,j=i.c;if(!R||!M){if(!b||!j)return b?(i.s=-g,i):new c(j?I:NaN);if(!b[0]||!j[0])return j[0]?(i.s=-g,i):new c(b[0]?I:_==3?-0:0)}if(R=Be(R),M=Be(M),b=b.slice(),m=R-M){for((l=m<0)?(m=-m,h=b):(M=R,h=j),h.reverse(),g=m;g--;h.push(0));h.reverse()}else for(d=(l=(m=b.length)<(g=j.length))?m:g,m=g=0;g<d;g++)if(b[g]!=j[g]){l=b[g]<j[g];break}if(l&&(h=b,b=j,j=h,i.s=-i.s),g=(d=j.length)-(a=b.length),g>0)for(;g--;b[a++]=0);for(g=Ge-1;d>m;){if(b[--d]<j[d]){for(a=d;a&&!b[--a];b[a]=g);--b[a],b[d]+=Ge}b[d]-=j[d]}for(;b[0]==0;b.splice(0,1),--M);return b[0]?G(i,b,M):(i.s=_==3?-1:1,i.c=[i.e=0],i)},o.modulo=o.mod=function(i,g){var a,d,h=this;return i=new c(i,g),!h.c||!i.s||i.c&&!i.c[0]?new c(NaN):!i.c||h.c&&!h.c[0]?new c(h):(F==9?(d=i.s,i.s=1,a=e(h,i,0,3),i.s=d,a.s*=d):a=e(h,i,0,F),i=h.minus(a.times(i)),!i.c[0]&&F==1&&(i.s=h.s),i)},o.multipliedBy=o.times=function(i,g){var a,d,h,l,I,m,R,M,b,j,w,W,Y,B,X,ee=this,le=ee.c,ae=(i=new c(i,g)).c;if(!le||!ae||!le[0]||!ae[0])return!ee.s||!i.s||le&&!le[0]&&!ae||ae&&!ae[0]&&!le?i.c=i.e=i.s=null:(i.s*=ee.s,!le||!ae?i.c=i.e=null:(i.c=[0],i.e=0)),i;for(d=Be(ee.e/pe)+Be(i.e/pe),i.s*=ee.s,R=le.length,j=ae.length,R<j&&(Y=le,le=ae,ae=Y,h=R,R=j,j=h),h=R+j,Y=[];h--;Y.push(0));for(B=Ge,X=at,h=j;--h>=0;){for(a=0,w=ae[h]%X,W=ae[h]/X|0,I=R,l=h+I;l>h;)M=le[--I]%X,b=le[I]/X|0,m=W*M+b*w,M=w*M+m%X*X+Y[l]+a,a=(M/B|0)+(m/X|0)+W*b,Y[l--]=M%B;Y[l]=a}return a?++d:Y.splice(0,1),G(i,Y,d)},o.negated=function(){var i=new c(this);return i.s=-i.s||null,i},o.plus=function(i,g){var a,d=this,h=d.s;if(i=new c(i,g),g=i.s,!h||!g)return new c(NaN);if(h!=g)return i.s=-g,d.minus(i);var l=d.e/pe,I=i.e/pe,m=d.c,R=i.c;if(!l||!I){if(!m||!R)return new c(h/0);if(!m[0]||!R[0])return R[0]?i:new c(m[0]?d:h*0)}if(l=Be(l),I=Be(I),m=m.slice(),h=l-I){for(h>0?(I=l,a=R):(h=-h,a=m),a.reverse();h--;a.push(0));a.reverse()}for(h=m.length,g=R.length,h-g<0&&(a=R,R=m,m=a,g=h),h=0;g;)h=(m[--g]=m[g]+R[g]+h)/Ge|0,m[g]=Ge===m[g]?0:m[g]%Ge;return h&&(m=[h].concat(m),++I),G(i,m,I)},o.precision=o.sd=function(i,g){var a,d,h,l=this;if(i!=null&&i!==!!i)return Te(i,1,Fe),g==null?g=_:Te(g,0,8),se(new c(l),i,g);if(!(a=l.c))return null;if(h=a.length-1,d=h*pe+1,h=a[h]){for(;h%10==0;h/=10,d--);for(h=a[0];h>=10;h/=10,d++);}return i&&l.e+1>d&&(d=l.e+1),d},o.shiftedBy=function(i){return Te(i,-9007199254740991,zi),this.times("1e"+i)},o.squareRoot=o.sqrt=function(){var i,g,a,d,h,l=this,I=l.c,m=l.s,R=l.e,M=u+4,b=new c("0.5");if(m!==1||!I||!I[0])return new c(!m||m<0&&(!I||I[0])?NaN:I?l:1/0);if(m=Math.sqrt(+he(l)),m==0||m==1/0?(g=Ue(I),(g.length+R)%2==0&&(g+="0"),m=Math.sqrt(+g),R=Be((R+1)/2)-(R<0||R%2),m==1/0?g="5e"+R:(g=m.toExponential(),g=g.slice(0,g.indexOf("e")+1)+R),a=new c(g)):a=new c(m+""),a.c[0]){for(R=a.e,m=R+M,m<3&&(m=0);;)if(h=a,a=b.times(h.plus(e(l,h,M,1))),Ue(h.c).slice(0,m)===(g=Ue(a.c)).slice(0,m))if(a.e<R&&--m,g=g.slice(m-3,m+1),g=="9999"||!d&&g=="4999"){if(!d&&(se(h,h.e+u+2,0),h.times(h).eq(l))){a=h;break}M+=4,m+=4,d=1}else{(!+g||!+g.slice(1)&&g.charAt(0)=="5")&&(se(a,a.e+u+2,1),i=!a.times(a).eq(l));break}}return se(a,a.e+u+1,_,i)},o.toExponential=function(i,g){return i!=null&&(Te(i,0,Fe),i++),S(this,i,g,1)},o.toFixed=function(i,g){return i!=null&&(Te(i,0,Fe),i=i+this.e+1),S(this,i,g)},o.toFormat=function(i,g,a){var d,h=this;if(a==null)i!=null&&g&&typeof g=="object"?(a=g,g=null):i&&typeof i=="object"?(a=i,i=g=null):a=P;else if(typeof a!="object")throw Error(Me+"Argument not an object: "+a);if(d=h.toFixed(i,g),h.c){var l,I=d.split("."),m=+a.groupSize,R=+a.secondaryGroupSize,M=a.groupSeparator||"",b=I[0],j=I[1],w=h.s<0,W=w?b.slice(1):b,Y=W.length;if(R&&(l=m,m=R,R=l,Y-=l),m>0&&Y>0){for(l=Y%m||m,b=W.substr(0,l);l<Y;l+=m)b+=M+W.substr(l,m);R>0&&(b+=M+W.slice(l)),w&&(b="-"+b)}d=j?b+(a.decimalSeparator||"")+((R=+a.fractionGroupSize)?j.replace(new RegExp("\\d{"+R+"}\\B","g"),"$&"+(a.fractionGroupSeparator||"")):j):b}return(a.prefix||"")+d+(a.suffix||"")},o.toFraction=function(i){var g,a,d,h,l,I,m,R,M,b,j,w,W=this,Y=W.c;if(i!=null&&(m=new c(i),!m.isInteger()&&(m.c||m.s!==1)||m.lt(s)))throw Error(Me+"Argument "+(m.isInteger()?"out of range: ":"not an integer: ")+he(m));if(!Y)return new c(W);for(g=new c(s),M=a=new c(s),d=R=new c(s),w=Ue(Y),l=g.e=w.length-W.e-1,g.c[0]=gn[(I=l%pe)<0?pe+I:I],i=!i||m.comparedTo(g)>0?l>0?g:M:m,I=k,k=1/0,m=new c(w),R.c[0]=0;b=e(m,g,0,1),h=a.plus(b.times(d)),h.comparedTo(i)!=1;)a=d,d=h,M=R.plus(b.times(h=M)),R=h,g=m.minus(b.times(h=g)),m=h;return h=e(i.minus(a),d,0,1),R=R.plus(h.times(M)),a=a.plus(h.times(d)),R.s=M.s=W.s,l=l*2,j=e(M,d,l,_).minus(W).abs().comparedTo(e(R,a,l,_).minus(W).abs())<1?[M,d]:[R,a],k=I,j},o.toNumber=function(){return+he(this)},o.toPrecision=function(i,g){return i!=null&&Te(i,1,Fe),S(this,i,g,2)},o.toString=function(i){var g,a=this,d=a.s,h=a.e;return h===null?d?(g="Infinity",d<0&&(g="-"+g)):g="NaN":(i==null?g=h<=O||h>=T?sr(Ue(a.c),h):rt(Ue(a.c),h,"0"):i===10&&f?(a=se(new c(a),u+h+1,_),g=rt(Ue(a.c),a.e,"0")):(Te(i,2,A.length,"Base"),g=t(rt(Ue(a.c),h,"0"),10,i,d,!0)),d<0&&a.c[0]&&(g="-"+g)),g},o.valueOf=o.toJSON=function(){return he(this)},o._isBigNumber=!0,o[Symbol.toStringTag]="BigNumber",o[Symbol.for("nodejs.util.inspect.custom")]=o.valueOf,r!=null&&c.set(r),c}function Be(r){var e=r|0;return r>0||r===e?e:e-1}function Ue(r){for(var e,t,n=1,o=r.length,s=r[0]+"";n<o;){for(e=r[n++]+"",t=pe-e.length;t--;e="0"+e);s+=e}for(o=s.length;s.charCodeAt(--o)===48;);return s.slice(0,o+1||1)}function gt(r,e){var t,n,o=r.c,s=e.c,u=r.s,_=e.s,O=r.e,T=e.e;if(!u||!_)return null;if(t=o&&!o[0],n=s&&!s[0],t||n)return t?n?0:-_:u;if(u!=_)return u;if(t=u<0,n=O==T,!o||!s)return n?0:!o^t?1:-1;if(!n)return O>T^t?1:-1;for(_=(O=o.length)<(T=s.length)?O:T,u=0;u<_;u++)if(o[u]!=s[u])return o[u]>s[u]^t?1:-1;return O==T?0:O>T^t?1:-1}function Te(r,e,t,n){if(r<e||r>t||r!==qe(r))throw Error(Me+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function or(r){var e=r.c.length-1;return Be(r.e/pe)==e&&r.c[e]%2!=0}function sr(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function rt(r,e,t){var n,o;if(e<0){for(o=t+".";++e;o+=t);r=o+r}else if(n=r.length,++e>n){for(o=t,e-=n;--e;o+=t);r+=o}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}go();class Xs extends Error{}Xs.prototype.name="InvalidTokenError";const ar={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},it={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},Qs={GET_PROVIDER_STATE:"wallet_get_provider_state"},pn={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function Zs(r){return function(t,n,o){o(s=>{n.error&&cr.warn(`Error in RPC response:
`,n),!t.isTorusInternal&&(cr.info(`RPC (${r.origin}):`,t,"->",n),s())})}}var wn={},pt={},Gi;function In(){if(Gi)return pt;Gi=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.EthereumProviderError=pt.EthereumRpcError=void 0;const r=lo();class e extends Error{constructor(u,_,O){if(!Number.isInteger(u))throw new Error('"code" must be an integer.');if(!_||typeof _!="string")throw new Error('"message" must be a nonempty string.');super(_),this.code=u,O!==void 0&&(this.data=O)}serialize(){const u={code:this.code,message:this.message};return this.data!==void 0&&(u.data=this.data),this.stack&&(u.stack=this.stack),u}toString(){return r.default(this.serialize(),o,2)}}pt.EthereumRpcError=e;class t extends e{constructor(u,_,O){if(!n(u))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(u,_,O)}}pt.EthereumProviderError=t;function n(s){return Number.isInteger(s)&&s>=1e3&&s<=4999}function o(s,u){if(u!=="[Circular]")return u}return pt}var _n={},wt={},Ki;function On(){return Ki||(Ki=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.errorValues=wt.errorCodes=void 0,wt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},wt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}),wt}var Vi;function po(){return Vi||(Vi=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=On(),t=In(),n=e.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",s={code:n,message:u(n)};r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function u(v,F=o){if(Number.isInteger(v)){const q=v.toString();if(k(e.errorValues,q))return e.errorValues[q].message;if(T(v))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return F}r.getMessageFromCode=u;function _(v){if(!Number.isInteger(v))return!1;const F=v.toString();return!!(e.errorValues[F]||T(v))}r.isValidCode=_;function O(v,{fallbackError:F=s,shouldIncludeStack:q=!1}={}){var P,A;if(!F||!Number.isInteger(F.code)||typeof F.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(v instanceof t.EthereumRpcError)return v.serialize();const f={};if(v&&typeof v=="object"&&!Array.isArray(v)&&k(v,"code")&&_(v.code)){const S=v;f.code=S.code,S.message&&typeof S.message=="string"?(f.message=S.message,k(S,"data")&&(f.data=S.data)):(f.message=u(f.code),f.data={originalError:D(v)})}else{f.code=F.code;const S=(P=v)===null||P===void 0?void 0:P.message;f.message=S&&typeof S=="string"?S:F.message,f.data={originalError:D(v)}}const c=(A=v)===null||A===void 0?void 0:A.stack;return q&&v&&c&&typeof c=="string"&&(f.stack=c),f}r.serializeError=O;function T(v){return v>=-32099&&v<=-32e3}function D(v){return v&&typeof v=="object"&&!Array.isArray(v)?Object.assign({},v):v}function k(v,F){return Object.prototype.hasOwnProperty.call(v,F)}}(_n)),_n}var xt={},Ji;function ea(){if(Ji)return xt;Ji=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.ethErrors=void 0;const r=In(),e=po(),t=On();xt.ethErrors={rpc:{parse:u=>n(t.errorCodes.rpc.parse,u),invalidRequest:u=>n(t.errorCodes.rpc.invalidRequest,u),invalidParams:u=>n(t.errorCodes.rpc.invalidParams,u),methodNotFound:u=>n(t.errorCodes.rpc.methodNotFound,u),internal:u=>n(t.errorCodes.rpc.internal,u),server:u=>{if(!u||typeof u!="object"||Array.isArray(u))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:_}=u;if(!Number.isInteger(_)||_>-32005||_<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return n(_,u)},invalidInput:u=>n(t.errorCodes.rpc.invalidInput,u),resourceNotFound:u=>n(t.errorCodes.rpc.resourceNotFound,u),resourceUnavailable:u=>n(t.errorCodes.rpc.resourceUnavailable,u),transactionRejected:u=>n(t.errorCodes.rpc.transactionRejected,u),methodNotSupported:u=>n(t.errorCodes.rpc.methodNotSupported,u),limitExceeded:u=>n(t.errorCodes.rpc.limitExceeded,u)},provider:{userRejectedRequest:u=>o(t.errorCodes.provider.userRejectedRequest,u),unauthorized:u=>o(t.errorCodes.provider.unauthorized,u),unsupportedMethod:u=>o(t.errorCodes.provider.unsupportedMethod,u),disconnected:u=>o(t.errorCodes.provider.disconnected,u),chainDisconnected:u=>o(t.errorCodes.provider.chainDisconnected,u),custom:u=>{if(!u||typeof u!="object"||Array.isArray(u))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:_,message:O,data:T}=u;if(!O||typeof O!="string")throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(_,O,T)}}};function n(u,_){const[O,T]=s(_);return new r.EthereumRpcError(u,O||e.getMessageFromCode(u),T)}function o(u,_){const[O,T]=s(_);return new r.EthereumProviderError(u,O||e.getMessageFromCode(u),T)}function s(u){if(u){if(typeof u=="string")return[u];if(typeof u=="object"&&!Array.isArray(u)){const{message:_,data:O}=u;if(_&&typeof _!="string")throw new Error("Must specify string message.");return[_||void 0,O]}}return[]}return xt}var Yi;function ta(){return Yi||(Yi=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMessageFromCode=r.serializeError=r.EthereumProviderError=r.EthereumRpcError=r.ethErrors=r.errorCodes=void 0;const e=In();Object.defineProperty(r,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const t=po();Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const n=ea();Object.defineProperty(r,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const o=On();Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}(wn)),wn}var ut=ta(),bn,Xi;function ra(){return Xi||(Xi=1,bn=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[o]))return!1;for(o=n;o--!==0;){var u=s[o];if(!r(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}),bn}var na=ra();const ia=St(na);var oa="2.1.0";function wo(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}function sa(r){return wo(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object"}function aa(r){return wo(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object"}function la(r){return sa(r)&&aa(r)}var Je={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:r=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${r} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:r=>`Invalid options. Received: { maxEventListeners: ${r}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:r=>`'args.logger' must include required method '${r}'.`},info:{connected:r=>`Torus: Connected to chain with ID "${r}".`}};const ua={PRODUCTION:"production"},Dt={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},fa={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var Nn={translations:fa,localStorageKeyPrefix:"torus-"},ve=cr.getLogger("solana-embed");function ca(){return(r,e,t)=>{(typeof r.method!="string"||!r.method)&&(e.error=ut.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:r})),t(n=>{const{error:o}=e;return o&&ve.error(`Torus - RPC Error: ${o.message}`,o),n()})}}function da(r,e,t){let n=`Torus: Lost connection to "${r}".`;e!=null&&e.stack&&(n+=`
${e.stack}`),ve.warn(n),t&&t.listenerCount("error")>0&&t.emit("error",n)}const lr=()=>Math.random().toString(36).slice(2),_o=async r=>{let e,t;switch(r){case"testing":e="https://solana-testing.tor.us",t="debug";break;case"development":e="http://localhost:8080",t="debug";break;default:e="https://solana.tor.us",t="error";break}return{torusUrl:e,logLevel:t}},ha=()=>{let r=window.navigator.language||"en-US";const e=r.split("-");return r=Object.prototype.hasOwnProperty.call(Nn.translations,e[0])?e[0]:"en",r},ga={height:660,width:375},pa={height:740,width:1315},wa={height:700,width:1200},bo={height:600,width:400};function _a(r){let e;try{e=window[r];const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){const n=t;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function kt(r){let{width:e,height:t}=r;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,o=window.screenTop!==void 0?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,u=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,_=1,O=Math.abs((s-e)/2/_+n),T=Math.abs((u-t)/2/_+o);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${t/_},width=${e/_},top=${T},left=${O}`}class yo extends _r{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;if(super(),ge(this,"isTorus",void 0),ge(this,"_rpcEngine",void 0),ge(this,"jsonRpcConnectionEvents",void 0),ge(this,"_state",void 0),!la(e))throw new Error(Je.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const s=new xs;Si(e,s,e,this._handleStreamDisconnect.bind(this,"Torus")),s.ignoreStream("phishing");const u=Cs();Si(u.stream,s.createStream(o),u.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const _=new nt;_.push(Ps()),_.push(ca()),_.push(Zs({origin:location.origin})),_.push(u.middleware),this._rpcEngine=_,this.jsonRpcConnectionEvents=u.events}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw ut.ethErrors.rpc.invalidRequest({message:Je.errors.invalidRequestArgs(),data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw ut.ethErrors.rpc.invalidRequest({message:Je.errors.invalidRequestMethod(),data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw ut.ethErrors.rpc.invalidRequest({message:Je.errors.invalidRequestParams(),data:e});return new Promise((o,s)=>{this._rpcRequest({method:t,params:n},mn(o,s))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,n)=>{this._rpcRequest(e,mn(t,n))})}_handleStreamDisconnect(e,t){da(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const vt=r=>{const e=window.document.createElement("template"),t=r.trim();return e.innerHTML=t,e.content.firstChild};function ur(r){return r.version===void 0}class mo extends _r{constructor(e){let{url:t,target:n,features:o,timeout:s=3e4}=e;super(),ge(this,"url",void 0),ge(this,"target",void 0),ge(this,"features",void 0),ge(this,"window",void 0),ge(this,"windowTimer",void 0),ge(this,"iClosedWindow",void 0),ge(this,"timeout",void 0),this.url=t,this.target=n||"_blank",this.features=o||kt(wa),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=s,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),(e=this.window)!=null&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class yr extends yo{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:o}),ge(this,"embedTranslations",void 0),ge(this,"torusUrl",void 0),ge(this,"dappStorageKey",void 0),ge(this,"windowRefs",void 0),ge(this,"tryWindowHandle",void 0),ge(this,"torusAlertContainer",void 0),ge(this,"torusIframe",void 0),this._state=$e({},yr._defaultState),this.torusUrl="",this.dappStorageKey="";const s=Nn.translations[ha()];this.embedTranslations=s.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const u=_=>{const{method:O,params:T}=_;if(O===ar.IFRAME_STATUS){const{isFullScreen:D,rid:k}=T;this._displayIframe({isFull:D,rid:k})}else if(O==="create_window"){const{windowId:D,url:k}=T;this._createPopupBlockAlert(D,k)}else if(O===ar.CLOSE_WINDOW)this._handleCloseWindow(T);else if(O===ar.USER_LOGGED_IN){const{currentLoginProvider:D}=T;this._state.isLoggedIn=!0,this._state.currentLoginProvider=D}else O===ar.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",u)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:n,torusAlertContainer:o,torusIframe:s}=e;this.torusUrl=t,this.dappStorageKey=n,this.torusAlertContainer=o,this.torusIframe=s,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:u,isLoggedIn:_}=await this.request({method:it.GET_PROVIDER_STATE,params:[]});this._handleConnect(u,_)}catch(t){ve.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{ve.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:n,features:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(s.hash?s.hash+=`&dappStorageKey=${this.dappStorageKey}`:s.hash=`#dappStorageKey=${this.dappStorageKey}`);const u=new mo({url:s,target:n,features:o});if(u.open(),!u.window){this._createPopupBlockAlert(e,s.href);return}this.windowRefs[e]=u,this.request({method:"opened_window",params:{windowId:e}}),u.once("close",()=>{delete this.windowRefs[e],this.request({method:it.CLOSED_WINDOW,params:{windowId:e}})})}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(e)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case Dt.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case Dt.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case Dt.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case Dt.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=e,this.request({method:it.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const n=t,o=e;Array.isArray(o)||o.jsonrpc||(o.jsonrpc="2.0"),this.tryWindowHandle(o,n)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),ve.debug(Je.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new ut.EthereumRpcError(1013,t||Je.errors.disconnected()),ve.debug(n)):(n=new ut.EthereumRpcError(1011,t||Je.errors.permanentlyDisconnected()),ve.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const n=this.getLogoUrl(),o=vt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),s=vt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),u=vt('<div id="torusAlert__btn-container"></div>');u.appendChild(s),o.appendChild(u);const _=()=>{s.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:kt(bo)}),o.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(o)})(),_(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ge(yr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class mr extends yo{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:o}),ge(this,"chainId",void 0),ge(this,"selectedAddress",void 0),ge(this,"tryWindowHandle",void 0),this._state=$e({},mr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const s=u=>{const{method:_,params:O}=u;_===pn.ACCOUNTS_CHANGED?this._handleAccountsChanged(O):_===pn.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(O):_===pn.CHAIN_CHANGED&&this._handleChainChanged(O)};this.jsonRpcConnectionEvents.on("notification",s)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:n}=await this.request({method:Qs.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:n}),this._handleAccountsChanged(e)}catch(e){ve.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{ve.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=t;const s=e;if(!Array.isArray(s)){if(s.jsonrpc||(s.jsonrpc="2.0"),s.method==="solana_accounts"||s.method==="solana_requestAccounts")o=(u,_)=>{this._handleAccountsChanged(_.result||[],s.method==="solana_accounts",n),t(u,_)};else if(s.method==="wallet_getProviderState"){this._rpcEngine.handle(e,o);return}}this.tryWindowHandle(s,o)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),ve.debug(Je.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new ut.EthereumRpcError(1013,t||Je.errors.disconnected()),ve.debug(n)):(n=new ut.EthereumRpcError(1011,t||Je.errors.permanentlyDisconnected()),ve.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=e;Array.isArray(o)||(ve.error("Torus: Received non-array accounts parameter. Please report this bug.",o),o=[]);for(const s of e)if(typeof s!="string"){ve.error("Torus: Received non-string account. Please report this bug.",e),o=[];break}ia(this._state.accounts,o)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&ve.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',o),this._state.accounts=o,this.emit("accountsChanged",o)),this.selectedAddress!==o[0]&&(this.selectedAddress=o[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e){ve.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e});return}e==="loading"?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){ve.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}}ge(mr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Qi(r){return new Promise((e,t)=>{try{const n=document.createElement("img");n.onload=()=>e(!0),n.onerror=()=>e(!1),n.src=r}catch(n){t(n)}})}const ba=r=>{const{document:e}=r,t=e.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const n=e.querySelector('head > meta[name="title"]');return n?n.content:e.title&&e.title.length>0?e.title:r.location.hostname};async function ya(r){try{const{document:e}=r;let t=e.querySelector('head > link[rel="shortcut icon"]');return t&&await Qi(t.href)||(t=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),t&&await Qi(t.href))?t.href:""}catch{return""}}const ma=async()=>({name:ba(window),icon:await ya(window)}),va=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Sa=[it.SET_PROVIDER],Ea=_a("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await _o("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){ve.warn(e)}})();class Ia{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,"isInitialized",void 0),ge(this,"torusAlert",void 0),ge(this,"modalZIndex",void 0),ge(this,"alertZIndex",void 0),ge(this,"requestedLoginProvider",void 0),ge(this,"provider",void 0),ge(this,"communicationProvider",void 0),ge(this,"dappStorageKey",void 0),ge(this,"isTopupHidden",!1),ge(this,"torusAlertContainer",void 0),ge(this,"torusUrl",void 0),ge(this,"torusIframe",void 0),ge(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:e=ua.PRODUCTION,enableLogging:t=!1,network:n,showTorusButton:o=!1,useLocalStorage:s=!1,buttonPosition:u=Dt.BOTTOM_LEFT,apiKey:_="torus-default",extraParams:O={},whiteLabel:T}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:D,logLevel:k}=await _o(e);ve.enableAll(),ve.info(D,"url loaded"),ve.info(`Solana Embed Version :${oa}`),this.torusUrl=D,ve.setDefaultLevel(k),t?ve.enableAll():ve.disableAll();const v=this.handleDappStorageKey(s),F=new URL(D);F.pathname.endsWith("/")?F.pathname+="frame":F.pathname+="/frame";const q=new URLSearchParams;return v&&q.append("dappStorageKey",v),q.append("origin",window.location.origin),F.hash=q.toString(),this.torusIframe=vt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${F.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=vt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=vt(`<link href="${D}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((P,A)=>{try{this.torusIframe.addEventListener("load",async()=>{const f=await ma();this.torusIframe.contentWindow.postMessage({buttonPosition:u,apiKey:_,network:n,dappMetadata:f,extraParams:O,whiteLabel:T},F.origin),await this._setupWeb3({torusUrl:D}),o&&this.showTorusButton(),T!=null&&T.topupHide?this.isTopupHidden=T.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,P()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(f){A(f)}})}async login(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((n,o)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},mn(n,o))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw ve.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:n}=e,{success:o}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:n}});if(!o)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:it.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(t){return t instanceof Element||t instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:it.SET_PROVIDER,params:$e({},e)})}async showWallet(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:it.WALLET_INSTANCE_ID,params:[]}),o=e?`/${e}`:"",s=new URL(`${this.torusUrl}/wallet${o}`);s.searchParams.append("instanceId",n),Object.keys(t).forEach(_=>{s.searchParams.append(_,t[_])}),this.dappStorageKey&&(s.hash=`#dappStorageKey=${this.dappStorageKey}`),new mo({url:s,features:kt(pa)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:it.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=lr();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:it.TOPUP,params:{provider:e,params:t,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=ur(e),n=t?e.serialize({requireAllSignatures:!1}).toString("hex"):Ke.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const n=ur(e),o=n?e.serialize({requireAllSignatures:!1}).toString("hex"):Ke.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:o,options:t,isLegacyTransaction:n}})}}async signTransaction(e){const t=ur(e),n=t?e.serializeMessage().toString("hex"):Ke.from(e.message.serialize()).toString("hex"),o=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:t}}),s=JSON.parse(o),u={publicKey:new Un(s.publicKey),signature:Ke.from(s.signature,"hex")};return e.addSignature(u.publicKey,u.signature),e}async signAllTransactions(e){let t;const n=e.map(u=>(t=ur(u),t?u.serializeMessage().toString("hex"):Ke.from(u.message.serialize()).toString("hex"))),s=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:t}})).map(u=>{const _=JSON.parse(u);return{publicKey:new Un(_.publicKey),signature:Ke.from(_.signature,"hex")}});return e.forEach((u,_)=>(u.addSignature(s[_].publicKey,s[_].signature),u)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${Nn.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(Ea&&e){const o=window.localStorage.getItem(t);if(o)n=o;else{const s=`torus-app-${lr()}`;window.localStorage.setItem(t,s),n=s}}return this.dappStorageKey=n,n}async _setupWeb3(e){ve.info("setupWeb3 running");const t=new Ri({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new Ri({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),o=new mr(t,{}),s=new yr(n,{});o.tryWindowHandle=(T,D)=>{const k=T;if(!Array.isArray(k)&&va.includes(k.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const v=lr();s._handleWindow(v,{target:"_blank",features:kt(bo)}),k.windowId=v}o._rpcEngine.handle(k,D)},s.tryWindowHandle=(T,D)=>{const k=T;if(!Array.isArray(k)&&Sa.includes(k.method)){const v=lr();s._handleWindow(v,{target:"_blank",features:kt(ga)}),k.params.windowId=v}s._rpcEngine.handle(k,D)};const u=T=>{const D=o[T],k=this;o[T]=function(F,q){const{method:P,params:A=[]}=F;if(P==="solana_requestAccounts"){if(!q)return k.login({loginProvider:A[0]});k.login({loginProvider:A[0]}).then(f=>q(null,f)).catch(f=>q(f))}return D.apply(this,[F,q])}};u("request"),u("sendAsync"),u("send");const _=new Proxy(o,{deleteProperty:()=>!0}),O=new Proxy(s,{deleteProperty:()=>!0});this.provider=_,this.communicationProvider=O,await Promise.all([o._initializeState(),s._initializeState($e($e({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),ve.debug("Torus - injected provider")}}export{Dt as BUTTON_POSITION,ua as TORUS_BUILD_ENV,mr as TorusInPageProvider,Ia as default};
